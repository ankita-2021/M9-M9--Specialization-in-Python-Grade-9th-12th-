!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4be247e2-15e6-4672-a848-0cd46ca0d5b0",e._sentryDebugIdIdentifier="sentry-dbid-4be247e2-15e6-4672-a848-0cd46ca0d5b0")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"f78dcecc"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9748],{2417:(e,t,n)=>{"use strict";var r;e=n.hmd(e),function(e){var t,n=e.Symbol;if("function"==typeof n)if(n.observable)t=n.observable;else{t="function"==typeof n.for?n.for("https://github.com/benlesh/symbol-observable"):n("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch(e){}}else t="@@observable"}(r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},3107:(e,t,n)=>{"use strict";function r(e){return Symbol.for(e)}n.d(t,{l:()=>i,n:()=>r});var i=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}},4401:(e,t,n)=>{e.exports=n(65174)},5845:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,_0:()=>r});var r,i,o=n(21462);function s(e={}){let{thr:t=0,axis:n=r.Y,scrollUp:a=n===r.Y?i.Up:i.Left,scrollDown:u=n===r.Y?i.Down:i.Right,still:l=i.Still}=e,[c,d]=(0,o.useState)(l),[h,f]=(0,o.useState)({top:0,bottom:0,left:0,right:0}),p=Math.max(0,t),g=!1,m=0,y=(0,o.useCallback)(()=>{let e=n===r.Y?window.scrollY:window.scrollX;Math.abs(e-m)>=p&&(d(e>m?u:a),m=Math.max(0,e)),g=!1},[n,p,u,a]);return(0,o.useEffect)(()=>{let e=()=>{let e=window.scrollY,t=window.scrollX,n=document.documentElement.scrollHeight-window.innerHeight-e,r=document.documentElement.scrollWidth-window.innerWidth-t;f({top:e,bottom:n,left:t,right:r})};return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,o.useEffect)(()=>{m=n===r.Y?window.scrollY:window.scrollX;let e=()=>{g||(window.requestAnimationFrame(y),g=!0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[y]),{scrollDir:c,scrollPosition:h}}!function(e){e.X="x",e.Y="y"}(r||(r={})),function(e){e.Up="up",e.Down="down",e.Left="left",e.Right="right",e.Still="still"}(i||(i={}))},6235:(e,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=n(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default},6639:(e,t,n)=>{"use strict";n.d(t,{_:()=>f});var r=n(3107),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},s=function(){function e(){}return e.prototype.active=function(){return r.l},e.prototype.with=function(e,t,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];return t.call.apply(t,o([n],i(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),a=n(7079),u=n(17063),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},c=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d="context",h=new s,f=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,a.$G)(d,e,u.K.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,c([e,t,n],l(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,a.mS)(d)||h},e.prototype.disable=function(){this._getContextManager().disable(),(0,a.kv)(d,u.K.instance())},e}()},7079:(e,t,n)=>{"use strict";n.d(t,{mS:()=>l,$G:()=>u,kv:()=>c});var r="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},i="1.9.0",o=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,s=function(e){var t=new Set([e]),n=new Set,r=e.match(o);if(!r)return function(){return!1};var i={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=i.prerelease)return function(t){return t===e};function s(e){return n.add(e),!1}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(o);if(!r)return s(e);var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=a.prerelease||i.major!==a.major)return s(e);if(0===i.major)return i.minor===a.minor&&i.patch<=a.patch?(t.add(e),!0):s(e);return i.minor<=a.minor?(t.add(e),!0):s(e)}}(i),a=Symbol.for("opentelemetry.js.api."+i.split(".")[0]);function u(e,t,n,o){void 0===o&&(o=!1);var s,u=r[a]=null!=(s=r[a])?s:{version:i};if(!o&&u[e]){var l=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(l.stack||l.message),!1}if(u.version!==i){var l=Error("@opentelemetry/api: Registration of version v"+u.version+" for "+e+" does not match previously registered API v"+i);return n.error(l.stack||l.message),!1}return u[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+i+"."),!0}function l(e){var t,n,i=null==(t=r[a])?void 0:t.version;if(i&&s(i))return null==(n=r[a])?void 0:n[e]}function c(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+i+".");var n=r[a];n&&delete n[e]}},10752:(e,t,n)=>{"use strict";e.exports=n(18319)},14e3:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy");Symbol.for("react.offscreen");Symbol.for("react.module.reference")},15860:(e,t,n)=>{"use strict";n(14e3)},16128:(e,t,n)=>{"use strict";n.d(t,{I:()=>I,Yp:()=>r});var r,i=n(91601),o=n(69094),s=n(91061),a=n(35816),u=n(39626),l=n(80029);let c=function(e){switch(e.errorType){case r.ArrayContains:return"Expected array to contain at least one matching value";case r.ArrayMaxContains:return`Expected array to contain no more than ${e.schema.maxContains} matching values`;case r.ArrayMinContains:return`Expected array to contain at least ${e.schema.minContains} matching values`;case r.ArrayMaxItems:return`Expected array length to be less or equal to ${e.schema.maxItems}`;case r.ArrayMinItems:return`Expected array length to be greater or equal to ${e.schema.minItems}`;case r.ArrayUniqueItems:return"Expected array elements to be unique";case r.Array:return"Expected array";case r.AsyncIterator:return"Expected AsyncIterator";case r.BigIntExclusiveMaximum:return`Expected bigint to be less than ${e.schema.exclusiveMaximum}`;case r.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${e.schema.exclusiveMinimum}`;case r.BigIntMaximum:return`Expected bigint to be less or equal to ${e.schema.maximum}`;case r.BigIntMinimum:return`Expected bigint to be greater or equal to ${e.schema.minimum}`;case r.BigIntMultipleOf:return`Expected bigint to be a multiple of ${e.schema.multipleOf}`;case r.BigInt:return"Expected bigint";case r.Boolean:return"Expected boolean";case r.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${e.schema.exclusiveMinimumTimestamp}`;case r.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${e.schema.exclusiveMaximumTimestamp}`;case r.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${e.schema.minimumTimestamp}`;case r.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${e.schema.maximumTimestamp}`;case r.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${e.schema.multipleOfTimestamp}`;case r.Date:return"Expected Date";case r.Function:return"Expected function";case r.IntegerExclusiveMaximum:return`Expected integer to be less than ${e.schema.exclusiveMaximum}`;case r.IntegerExclusiveMinimum:return`Expected integer to be greater than ${e.schema.exclusiveMinimum}`;case r.IntegerMaximum:return`Expected integer to be less or equal to ${e.schema.maximum}`;case r.IntegerMinimum:return`Expected integer to be greater or equal to ${e.schema.minimum}`;case r.IntegerMultipleOf:return`Expected integer to be a multiple of ${e.schema.multipleOf}`;case r.Integer:return"Expected integer";case r.IntersectUnevaluatedProperties:return"Unexpected property";case r.Intersect:return"Expected all values to match";case r.Iterator:return"Expected Iterator";case r.Literal:return`Expected ${"string"==typeof e.schema.const?`'${e.schema.const}'`:e.schema.const}`;case r.Never:return"Never";case r.Not:return"Value should not match";case r.Null:return"Expected null";case r.NumberExclusiveMaximum:return`Expected number to be less than ${e.schema.exclusiveMaximum}`;case r.NumberExclusiveMinimum:return`Expected number to be greater than ${e.schema.exclusiveMinimum}`;case r.NumberMaximum:return`Expected number to be less or equal to ${e.schema.maximum}`;case r.NumberMinimum:return`Expected number to be greater or equal to ${e.schema.minimum}`;case r.NumberMultipleOf:return`Expected number to be a multiple of ${e.schema.multipleOf}`;case r.Number:return"Expected number";case r.Object:return"Expected object";case r.ObjectAdditionalProperties:return"Unexpected property";case r.ObjectMaxProperties:return`Expected object to have no more than ${e.schema.maxProperties} properties`;case r.ObjectMinProperties:return`Expected object to have at least ${e.schema.minProperties} properties`;case r.ObjectRequiredProperty:return"Expected required property";case r.Promise:return"Expected Promise";case r.RegExp:return"Expected string to match regular expression";case r.StringFormatUnknown:return`Unknown format '${e.schema.format}'`;case r.StringFormat:return`Expected string to match '${e.schema.format}' format`;case r.StringMaxLength:return`Expected string length less or equal to ${e.schema.maxLength}`;case r.StringMinLength:return`Expected string length greater or equal to ${e.schema.minLength}`;case r.StringPattern:return`Expected string to match '${e.schema.pattern}'`;case r.String:return"Expected string";case r.Symbol:return"Expected symbol";case r.TupleLength:return`Expected tuple to have ${e.schema.maxItems||0} elements`;case r.Tuple:return"Expected tuple";case r.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${e.schema.maxByteLength}`;case r.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${e.schema.minByteLength}`;case r.Uint8Array:return"Expected Uint8Array";case r.Undefined:return"Expected undefined";case r.Union:return"Expected union value";case r.Void:return"Expected void";case r.Kind:return`Expected kind '${e.schema[l.b8]}'`;default:return"Unknown error type"}};var d=n(37609),h=n(83850),f=n(33112),p=n(97858),g=n(32721),m=n(99410);!function(e){e[e.ArrayContains=0]="ArrayContains",e[e.ArrayMaxContains=1]="ArrayMaxContains",e[e.ArrayMaxItems=2]="ArrayMaxItems",e[e.ArrayMinContains=3]="ArrayMinContains",e[e.ArrayMinItems=4]="ArrayMinItems",e[e.ArrayUniqueItems=5]="ArrayUniqueItems",e[e.Array=6]="Array",e[e.AsyncIterator=7]="AsyncIterator",e[e.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",e[e.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",e[e.BigIntMaximum=10]="BigIntMaximum",e[e.BigIntMinimum=11]="BigIntMinimum",e[e.BigIntMultipleOf=12]="BigIntMultipleOf",e[e.BigInt=13]="BigInt",e[e.Boolean=14]="Boolean",e[e.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",e[e.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",e[e.DateMaximumTimestamp=17]="DateMaximumTimestamp",e[e.DateMinimumTimestamp=18]="DateMinimumTimestamp",e[e.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",e[e.Date=20]="Date",e[e.Function=21]="Function",e[e.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",e[e.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",e[e.IntegerMaximum=24]="IntegerMaximum",e[e.IntegerMinimum=25]="IntegerMinimum",e[e.IntegerMultipleOf=26]="IntegerMultipleOf",e[e.Integer=27]="Integer",e[e.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",e[e.Intersect=29]="Intersect",e[e.Iterator=30]="Iterator",e[e.Kind=31]="Kind",e[e.Literal=32]="Literal",e[e.Never=33]="Never",e[e.Not=34]="Not",e[e.Null=35]="Null",e[e.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",e[e.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",e[e.NumberMaximum=38]="NumberMaximum",e[e.NumberMinimum=39]="NumberMinimum",e[e.NumberMultipleOf=40]="NumberMultipleOf",e[e.Number=41]="Number",e[e.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",e[e.ObjectMaxProperties=43]="ObjectMaxProperties",e[e.ObjectMinProperties=44]="ObjectMinProperties",e[e.ObjectRequiredProperty=45]="ObjectRequiredProperty",e[e.Object=46]="Object",e[e.Promise=47]="Promise",e[e.RegExp=48]="RegExp",e[e.StringFormatUnknown=49]="StringFormatUnknown",e[e.StringFormat=50]="StringFormat",e[e.StringMaxLength=51]="StringMaxLength",e[e.StringMinLength=52]="StringMinLength",e[e.StringPattern=53]="StringPattern",e[e.String=54]="String",e[e.Symbol=55]="Symbol",e[e.TupleLength=56]="TupleLength",e[e.Tuple=57]="Tuple",e[e.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",e[e.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",e[e.Uint8Array=60]="Uint8Array",e[e.Undefined=61]="Undefined",e[e.Union=62]="Union",e[e.Void=63]="Void"}(r||(r={}));class y extends d.i{constructor(e){super("Unknown type"),this.schema=e}}function v(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function b(e){return void 0!==e}class w{constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}}function x(e,t,n,r,i=[]){return{type:e,schema:t,path:n,value:r,message:c({errorType:e,path:n,schema:t,value:r,errors:i}),errors:i}}function*E(e,t,n,c){let d=b(e.$id)?[...t,e]:t;switch(e[l.b8]){case"Any":return yield*function*(e,t,n,r){}(0,0,0,0);case"Argument":return yield*function*(e,t,n,r){}(0,0,0,0);case"Array":return yield*function*(e,t,n,i){if(!(0,m.QS)(i))return yield x(r.Array,e,n,i);b(e.minItems)&&!(i.length>=e.minItems)&&(yield x(r.ArrayMinItems,e,n,i)),b(e.maxItems)&&!(i.length<=e.maxItems)&&(yield x(r.ArrayMaxItems,e,n,i));for(let r=0;r<i.length;r++)yield*E(e.items,t,`${n}/${r}`,i[r]);if(!0===e.uniqueItems&&!function(){let e=new Set;for(let t of i){let n=(0,f.V)(t);if(e.has(n))return!1;e.add(n)}return!0}()&&(yield x(r.ArrayUniqueItems,e,n,i)),!(b(e.contains)||b(e.minContains)||b(e.maxContains)))return;let o=b(e.contains)?e.contains:(0,g.p)(),s=i.reduce((e,r,i)=>!0===E(o,t,`${n}${i}`,r).next().done?e+1:e,0);0===s&&(yield x(r.ArrayContains,e,n,i)),(0,m.Mx)(e.minContains)&&s<e.minContains&&(yield x(r.ArrayMinContains,e,n,i)),(0,m.Mx)(e.maxContains)&&s>e.maxContains&&(yield x(r.ArrayMaxContains,e,n,i))}(e,d,n,c);case"AsyncIterator":return yield*function*(e,t,n,i){(0,m.H1)(i)||(yield x(r.AsyncIterator,e,n,i))}(e,0,n,c);case"BigInt":return yield*function*(e,t,n,i){if(!(0,m.cQ)(i))return yield x(r.BigInt,e,n,i);b(e.exclusiveMaximum)&&!(i<e.exclusiveMaximum)&&(yield x(r.BigIntExclusiveMaximum,e,n,i)),b(e.exclusiveMinimum)&&!(i>e.exclusiveMinimum)&&(yield x(r.BigIntExclusiveMinimum,e,n,i)),b(e.maximum)&&!(i<=e.maximum)&&(yield x(r.BigIntMaximum,e,n,i)),b(e.minimum)&&!(i>=e.minimum)&&(yield x(r.BigIntMinimum,e,n,i)),b(e.multipleOf)&&i%e.multipleOf!==BigInt(0)&&(yield x(r.BigIntMultipleOf,e,n,i))}(e,0,n,c);case"Boolean":return yield*function*(e,t,n,i){(0,m.Zx)(i)||(yield x(r.Boolean,e,n,i))}(e,0,n,c);case"Constructor":return yield*function*(e,t,n,r){yield*E(e.returns,t,n,r.prototype)}(e,d,n,c);case"Date":return yield*function*(e,t,n,i){if(!(0,m.XF)(i))return yield x(r.Date,e,n,i);b(e.exclusiveMaximumTimestamp)&&!(i.getTime()<e.exclusiveMaximumTimestamp)&&(yield x(r.DateExclusiveMaximumTimestamp,e,n,i)),b(e.exclusiveMinimumTimestamp)&&!(i.getTime()>e.exclusiveMinimumTimestamp)&&(yield x(r.DateExclusiveMinimumTimestamp,e,n,i)),b(e.maximumTimestamp)&&!(i.getTime()<=e.maximumTimestamp)&&(yield x(r.DateMaximumTimestamp,e,n,i)),b(e.minimumTimestamp)&&!(i.getTime()>=e.minimumTimestamp)&&(yield x(r.DateMinimumTimestamp,e,n,i)),b(e.multipleOfTimestamp)&&i.getTime()%e.multipleOfTimestamp!=0&&(yield x(r.DateMultipleOfTimestamp,e,n,i))}(e,0,n,c);case"Function":return yield*function*(e,t,n,i){(0,m.hg)(i)||(yield x(r.Function,e,n,i))}(e,0,n,c);case"Import":return yield*function*(e,t,n,r){let i=globalThis.Object.values(e.$defs),o=e.$defs[e.$ref];yield*E(o,[...t,...i],n,r)}(e,d,n,c);case"Integer":return yield*function*(e,t,n,i){if(!(0,m.$p)(i))return yield x(r.Integer,e,n,i);b(e.exclusiveMaximum)&&!(i<e.exclusiveMaximum)&&(yield x(r.IntegerExclusiveMaximum,e,n,i)),b(e.exclusiveMinimum)&&!(i>e.exclusiveMinimum)&&(yield x(r.IntegerExclusiveMinimum,e,n,i)),b(e.maximum)&&!(i<=e.maximum)&&(yield x(r.IntegerMaximum,e,n,i)),b(e.minimum)&&!(i>=e.minimum)&&(yield x(r.IntegerMinimum,e,n,i)),b(e.multipleOf)&&i%e.multipleOf!=0&&(yield x(r.IntegerMultipleOf,e,n,i))}(e,0,n,c);case"Intersect":return yield*function*(e,t,n,i){let s=!1;for(let r of e.allOf)for(let e of E(r,t,n,i))s=!0,yield e;if(s)return yield x(r.Intersect,e,n,i);if(!1===e.unevaluatedProperties){let t=new RegExp((0,o.n)(e));for(let o of Object.getOwnPropertyNames(i))t.test(o)||(yield x(r.IntersectUnevaluatedProperties,e,`${n}/${o}`,i))}if("object"==typeof e.unevaluatedProperties){let r=new RegExp((0,o.n)(e));for(let o of Object.getOwnPropertyNames(i))if(!r.test(o)){let r=E(e.unevaluatedProperties,t,`${n}/${o}`,i[o]).next();r.done||(yield r.value)}}}(e,d,n,c);case"Iterator":return yield*function*(e,t,n,i){(0,m.jo)(i)||(yield x(r.Iterator,e,n,i))}(e,0,n,c);case"Literal":return yield*function*(e,t,n,i){i!==e.const&&(yield x(r.Literal,e,n,i))}(e,0,n,c);case"Never":return yield*function*(e,t,n,i){yield x(r.Never,e,n,i)}(e,0,n,c);case"Not":return yield*function*(e,t,n,i){!0===E(e.not,t,n,i).next().done&&(yield x(r.Not,e,n,i))}(e,d,n,c);case"Null":return yield*function*(e,t,n,i){(0,m.Ef)(i)||(yield x(r.Null,e,n,i))}(e,0,n,c);case"Number":return yield*function*(e,t,n,o){if(!i.Q.IsNumberLike(o))return yield x(r.Number,e,n,o);b(e.exclusiveMaximum)&&!(o<e.exclusiveMaximum)&&(yield x(r.NumberExclusiveMaximum,e,n,o)),b(e.exclusiveMinimum)&&!(o>e.exclusiveMinimum)&&(yield x(r.NumberExclusiveMinimum,e,n,o)),b(e.maximum)&&!(o<=e.maximum)&&(yield x(r.NumberMaximum,e,n,o)),b(e.minimum)&&!(o>=e.minimum)&&(yield x(r.NumberMinimum,e,n,o)),b(e.multipleOf)&&o%e.multipleOf!=0&&(yield x(r.NumberMultipleOf,e,n,o))}(e,0,n,c);case"Object":return yield*function*(e,t,n,o){if(!i.Q.IsObjectLike(o))return yield x(r.Object,e,n,o);b(e.minProperties)&&!(Object.getOwnPropertyNames(o).length>=e.minProperties)&&(yield x(r.ObjectMinProperties,e,n,o)),b(e.maxProperties)&&!(Object.getOwnPropertyNames(o).length<=e.maxProperties)&&(yield x(r.ObjectMaxProperties,e,n,o));let s=Array.isArray(e.required)?e.required:[],a=Object.getOwnPropertyNames(e.properties),l=Object.getOwnPropertyNames(o);for(let t of s)l.includes(t)||(yield x(r.ObjectRequiredProperty,e.properties[t],`${n}/${v(t)}`,void 0));if(!1===e.additionalProperties)for(let t of l)a.includes(t)||(yield x(r.ObjectAdditionalProperties,e,`${n}/${v(t)}`,o[t]));if("object"==typeof e.additionalProperties)for(let r of l)a.includes(r)||(yield*E(e.additionalProperties,t,`${n}/${v(r)}`,o[r]));for(let s of a){let a=e.properties[s];e.required&&e.required.includes(s)?(yield*E(a,t,`${n}/${v(s)}`,o[s]),!(0,u.Q)(e)||s in o||(yield x(r.ObjectRequiredProperty,a,`${n}/${v(s)}`,void 0))):i.Q.IsExactOptionalProperty(o,s)&&(yield*E(a,t,`${n}/${v(s)}`,o[s]))}}(e,d,n,c);case"Promise":return yield*function*(e,t,n,i){(0,m.OD)(i)||(yield x(r.Promise,e,n,i))}(e,0,n,c);case"Record":return yield*function*(e,t,n,o){if(!i.Q.IsRecordLike(o))return yield x(r.Object,e,n,o);b(e.minProperties)&&!(Object.getOwnPropertyNames(o).length>=e.minProperties)&&(yield x(r.ObjectMinProperties,e,n,o)),b(e.maxProperties)&&!(Object.getOwnPropertyNames(o).length<=e.maxProperties)&&(yield x(r.ObjectMaxProperties,e,n,o));let[s,a]=Object.entries(e.patternProperties)[0],u=new RegExp(s);for(let[e,r]of Object.entries(o))u.test(e)&&(yield*E(a,t,`${n}/${v(e)}`,r));if("object"==typeof e.additionalProperties)for(let[r,i]of Object.entries(o))u.test(r)||(yield*E(e.additionalProperties,t,`${n}/${v(r)}`,i));if(!1===e.additionalProperties){for(let[t,i]of Object.entries(o))if(!u.test(t))return yield x(r.ObjectAdditionalProperties,e,`${n}/${v(t)}`,i)}}(e,d,n,c);case"Ref":return yield*function*(e,t,n,r){yield*E((0,h.Lk)(e,t),t,n,r)}(e,d,n,c);case"RegExp":return yield*function*(e,t,n,i){return(0,m.IP)(i)?(b(e.minLength)&&!(i.length>=e.minLength)&&(yield x(r.StringMinLength,e,n,i)),b(e.maxLength)&&!(i.length<=e.maxLength)&&(yield x(r.StringMaxLength,e,n,i)),new RegExp(e.source,e.flags).test(i))?void 0:yield x(r.RegExp,e,n,i):yield x(r.String,e,n,i)}(e,0,n,c);case"String":return yield*function*(e,t,n,i){if(!(0,m.IP)(i))return yield x(r.String,e,n,i);b(e.minLength)&&!(i.length>=e.minLength)&&(yield x(r.StringMinLength,e,n,i)),b(e.maxLength)&&!(i.length<=e.maxLength)&&(yield x(r.StringMaxLength,e,n,i)),(0,m.IP)(e.pattern)&&(new RegExp(e.pattern).test(i)||(yield x(r.StringPattern,e,n,i))),(0,m.IP)(e.format)&&(s.ru(e.format)?s.nu(e.format)(i)||(yield x(r.StringFormat,e,n,i)):yield x(r.StringFormatUnknown,e,n,i))}(e,0,n,c);case"Symbol":return yield*function*(e,t,n,i){(0,m.nH)(i)||(yield x(r.Symbol,e,n,i))}(e,0,n,c);case"TemplateLiteral":return yield*function*(e,t,n,i){if(!(0,m.IP)(i))return yield x(r.String,e,n,i);new RegExp(e.pattern).test(i)||(yield x(r.StringPattern,e,n,i))}(e,0,n,c);case"This":return yield*function*(e,t,n,r){yield*E((0,h.Lk)(e,t),t,n,r)}(e,d,n,c);case"Tuple":return yield*function*(e,t,n,i){if(!(0,m.QS)(i))return yield x(r.Tuple,e,n,i);if(void 0===e.items&&0!==i.length||i.length!==e.maxItems)return yield x(r.TupleLength,e,n,i);if(e.items)for(let r=0;r<e.items.length;r++)yield*E(e.items[r],t,`${n}/${r}`,i[r])}(e,d,n,c);case"Undefined":return yield*function*(e,t,n,i){(0,m.R1)(i)||(yield x(r.Undefined,e,n,i))}(e,0,n,c);case"Union":return yield*function*(e,t,n,i){if((0,p.J)(e,t,i))return;let o=e.anyOf.map(e=>new w(E(e,t,n,i)));yield x(r.Union,e,n,i,o)}(e,d,n,c);case"Uint8Array":return yield*function*(e,t,n,i){if(!(0,m.G4)(i))return yield x(r.Uint8Array,e,n,i);b(e.maxByteLength)&&!(i.length<=e.maxByteLength)&&(yield x(r.Uint8ArrayMaxByteLength,e,n,i)),b(e.minByteLength)&&!(i.length>=e.minByteLength)&&(yield x(r.Uint8ArrayMinByteLength,e,n,i))}(e,0,n,c);case"Unknown":return yield*function*(e,t,n,r){}(0,0,0,0);case"Void":return yield*function*(e,t,n,o){i.Q.IsVoidLike(o)||(yield x(r.Void,e,n,o))}(e,0,n,c);default:if(!a.ru(e[l.b8]))throw new y(e);return yield*function*(e,t,n,i){a.nu(e[l.b8])(e,i)||(yield x(r.Kind,e,n,i))}(e,0,n,c)}}function I(...e){return new w(3===e.length?E(e[0],e[1],"",e[2]):E(e[0],[],"",e[1]))}},17051:(e,t,n)=>{"use strict";function r(e){for(var t=e.length,n=0,r=0;r<t;){var i=e.charCodeAt(r++);if((0xffffff80&i)==0){n++;continue}if((0xfffff800&i)==0)n+=2;else{if(i>=55296&&i<=56319&&r<t){var o=e.charCodeAt(r);(64512&o)==56320&&(++r,i=((1023&i)<<10)+(1023&o)+65536)}(0xffff0000&i)==0?n+=3:n+=4}}return n}n.d(t,{Zf:()=>s,_u:()=>u,dS:()=>r,yi:()=>o});var i=new TextEncoder;function o(e,t,n){if(e.length>50)i.encodeInto(e,t.subarray(n));else!function(e,t,n){for(var r=e.length,i=n,o=0;o<r;){var s=e.charCodeAt(o++);if((0xffffff80&s)==0){t[i++]=s;continue}if((0xfffff800&s)==0)t[i++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&o<r){var a=e.charCodeAt(o);(64512&a)==56320&&(++o,s=((1023&s)<<10)+(1023&a)+65536)}(0xffff0000&s)==0?t[i++]=s>>12&15|224:(t[i++]=s>>18&7|240,t[i++]=s>>12&63|128),t[i++]=s>>6&63|128}t[i++]=63&s|128}}(e,t,n)}function s(e,t,n){for(var r=t,i=r+n,o=[],s="";r<i;){var a=e[r++];if((128&a)==0)o.push(a);else if((224&a)==192){var u=63&e[r++];o.push((31&a)<<6|u)}else if((240&a)==224){var u=63&e[r++],l=63&e[r++];o.push((31&a)<<12|u<<6|l)}else if((248&a)==240){var u=63&e[r++],l=63&e[r++],c=(7&a)<<18|u<<12|l<<6|63&e[r++];c>65535&&(c-=65536,o.push(c>>>10&1023|55296),c=56320|1023&c),o.push(c)}else o.push(a);o.length>=4096&&(s+=String.fromCharCode.apply(String,o),o.length=0)}return o.length>0&&(s+=String.fromCharCode.apply(String,o)),s}var a=new TextDecoder;function u(e,t,n){var r;return n>200?(r=e.subarray(t,t+n),a.decode(r)):s(e,t,n)}},17063:(e,t,n)=>{"use strict";n.d(t,{K:()=>d});var r,i=n(7079),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u("verbose",this._namespace,e)},e}();function u(e,t,n){var r=(0,i.mS)("diag");if(r)return n.unshift(t),r[e].apply(r,s([],o(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}));var l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},c=function(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},d=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(0,i.mS)("diag");if(r)return r[e].apply(r,c([],l(t),!1))}}var t=this;t.setLogger=function(e,n){if(void 0===n&&(n={logLevel:r.INFO}),e===t){var o,s,a,u=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(o=u.stack)?o:u.message),!1}"number"==typeof n&&(n={logLevel:n});var l=(0,i.mS)("diag"),c=function(e,t){function n(n,r){var i=t[n];return"function"==typeof i&&e>=r?i.bind(t):function(){}}return e<r.NONE?e=r.NONE:e>r.ALL&&(e=r.ALL),t=t||{},{error:n("error",r.ERROR),warn:n("warn",r.WARN),info:n("info",r.INFO),debug:n("debug",r.DEBUG),verbose:n("verbose",r.VERBOSE)}}(null!=(s=n.logLevel)?s:r.INFO,e);if(l&&!n.suppressOverrideMessage){var d=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+d),c.warn("Current logger will overwrite one already registered from "+d)}return(0,i.$G)("diag",c,t,!0)},t.disable=function(){(0,i.kv)("diag",t)},t.createComponentLogger=function(e){return new a(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},18319:(e,t,n)=>{"use strict";var r=n(2272),i=function(e){if(e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.domainReentrant){if(void 0===r||void 0===r.domain)throw Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=e.timeout||i.DEFAULT_TIMEOUT,this.maxOccupationTime=e.maxOccupationTime||i.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=e.maxExecutionTime||i.DEFAULT_MAX_EXECUTION_TIME,e.maxPending===1/0||Number.isInteger(e.maxPending)&&e.maxPending>=0?this.maxPending=e.maxPending:this.maxPending=i.DEFAULT_MAX_PENDING};i.DEFAULT_TIMEOUT=0,i.DEFAULT_MAX_OCCUPATION_TIME=0,i.DEFAULT_MAX_EXECUTION_TIME=0,i.DEFAULT_MAX_PENDING=1e3,i.prototype.acquire=function(e,t,n,i){if(Array.isArray(e))return this._acquireBatch(e,t,n,i);if("function"!=typeof t)throw Error("You must pass a function to execute");var o=null,s=null,a=null;"function"!=typeof n&&(i=n,n=null,a=new this.Promise(function(e,t){o=e,s=t})),i=i||{};var u=!1,l=null,c=null,d=null,h=this,f=function(t,r,i){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),t&&(h.queues[e]&&0===h.queues[e].length&&delete h.queues[e],h.domainReentrant&&delete h.domains[e]),u||(a?r?s(r):o(i):"function"==typeof n&&n(r,i),u=!0),t&&h.queues[e]&&h.queues[e].length>0&&h.queues[e].shift()()},p=function(n){if(u)return f(n);l&&(clearTimeout(l),l=null),h.domainReentrant&&n&&(h.domains[e]=r.domain);var o=i.maxExecutionTime||h.maxExecutionTime;if(o&&(d=setTimeout(function(){h.queues[e]&&f(n,Error("Maximum execution time is exceeded "+e))},o)),1===t.length){var s=!1;try{t(function(e,t){s||(s=!0,f(n,e,t))})}catch(e){s||(s=!0,f(n,e))}}else h._promiseTry(function(){return t()}).then(function(e){f(n,void 0,e)},function(e){f(n,e)})};h.domainReentrant&&r.domain&&(p=r.domain.bind(p));var g=i.maxPending||h.maxPending;if(h.queues[e])if(h.domainReentrant&&r.domain&&r.domain===h.domains[e])p(!1);else if(h.queues[e].length>=g)f(!1,Error("Too many pending tasks in queue "+e));else{var m=function(){p(!0)};i.skipQueue?h.queues[e].unshift(m):h.queues[e].push(m);var y=i.timeout||h.timeout;y&&(l=setTimeout(function(){l=null,f(!1,Error("async-lock timed out in queue "+e))},y))}else h.queues[e]=[],p(!0);var v=i.maxOccupationTime||h.maxOccupationTime;if(v&&(c=setTimeout(function(){h.queues[e]&&f(!1,Error("Maximum occupation time is exceeded in queue "+e))},v)),a)return a},i.prototype._acquireBatch=function(e,t,n,r){"function"!=typeof n&&(r=n,n=null);var i=this,o=e.reduceRight(function(e,t){return function(n){i.acquire(t,e,n,r)}},t);if("function"!=typeof n)return new this.Promise(function(e,t){1===o.length?o(function(n,r){n?t(n):e(r)}):e(o())});o(n)},i.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0},i.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(e){return this.Promise.reject(e)}},e.exports=i},18497:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(e);var n=t.strictSeparator?o.test(e):i.test(e);return n&&t.strict?s(e):n};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(6235)),i=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,s=function(e){var t=e.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(t){var n=Number(t[1]),r=Number(t[2]);return n%4==0&&n%100!=0||n%400==0?r<=366:r<=365}var i=e.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),o=i[1],s=i[2],a=i[3],u=s?"0".concat(s).slice(-2):s,l=a?"0".concat(a).slice(-2):a,c=new Date("".concat(o,"-").concat(u||"01","-").concat(l||"01"));return!s||!a||c.getUTCFullYear()===o&&c.getUTCMonth()+1===s&&c.getUTCDate()===a};e.exports=t.default,e.exports.default=t.default},21186:(e,t,n)=>{"use strict";n.d(t,{g:()=>a});var r=function(e,t){this.type=e,this.data=t},i=n(26350),o=n(58059),s={type:-1,encode:function(e){var t,n,r,i;return e instanceof Date?function(e){var t=e.sec,n=e.nsec;if(t>=0&&n>=0&&t<=0x3ffffffff)if(0===n&&t<=0xffffffff){var r=new Uint8Array(4),i=new DataView(r.buffer);return i.setUint32(0,t),r}else{var s=t/0x100000000,r=new Uint8Array(8),i=new DataView(r.buffer);return i.setUint32(0,n<<2|3&s),i.setUint32(4,0|t),r}var r=new Uint8Array(12),i=new DataView(r.buffer);return i.setUint32(0,n),(0,o._j)(i,4,t),r}((n=Math.floor((t=e.getTime())/1e3),i=Math.floor((r=(t-1e3*n)*1e6)/1e9),{sec:n+i,nsec:r-1e9*i})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:var n=t.getUint32(0),r=0;return{sec:n,nsec:0};case 8:var s=t.getUint32(0),n=(3&s)*0x100000000+t.getUint32(4),r=s>>>2;return{sec:n,nsec:r};case 12:var n=(0,o.eN)(t,4),r=t.getUint32(0);return{sec:n,nsec:r};default:throw new i.X("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},a=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(s)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var i=1+t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){var i=this.builtInEncoders[n];if(null!=i){var o=i(e,t);if(null!=o){var s=-1-n;return new r(s,o)}}}for(var n=0;n<this.encoders.length;n++){var i=this.encoders[n];if(null!=i){var o=i(e,t);if(null!=o){var s=n;return new r(s,o)}}}return e instanceof r?e:null},e.prototype.decode=function(e,t,n){var i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,n):new r(t,e)},e.defaultCodec=new e,e}()},22102:(e,t,n)=>{"use strict";function r(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}function i(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=r(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}n.d(t,{C:()=>r,o:()=>i})},22139:(e,t)=>{"use strict";var n,r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){var i,s,a=[];for(s in"string"!=typeof(t=t||"")&&(t="?"),e)if(r.call(e,s)){if(!(i=e[s])&&(null===i||i===n||isNaN(i))&&(i=""),s=o(s),i=o(i),null===s||null===i)continue;a.push(s+"="+i)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),s=i(t[2]);null===o||null===s||o in r||(r[o]=s)}return r}},23099:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var r,i,o,s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},25831:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(39440),i=n(69918),o=n(90663),s=n(36747),a=n(55271),u=n(37513);function l(e,t){var n,l,c,d,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,u.A)(2,arguments);var f=h.locale||a.A;if(!f.formatDistance)throw RangeError("locale must contain localize.formatDistance property");var p=(0,i.A)(e,t);if(isNaN(p))throw RangeError("Invalid time value");var g=(0,s.A)(h);g.addSuffix=!!h.addSuffix,g.comparison=p,p>0?(n=(0,o.A)(t),l=(0,o.A)(e)):(n=(0,o.A)(e),l=(0,o.A)(t));var m=null==h.roundingMethod?"round":String(h.roundingMethod);if("floor"===m)c=Math.floor;else if("ceil"===m)c=Math.ceil;else if("round"===m)c=Math.round;else throw RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");var y=l.getTime()-n.getTime(),v=y/6e4,b=(y-((0,r.A)(l)-(0,r.A)(n)))/6e4;if("second"===(d=null==h.unit?v<1?"second":v<60?"minute":v<1440?"hour":b<43200?"day":b<525600?"month":"year":String(h.unit))){var w=c(y/1e3);return f.formatDistance("xSeconds",w,g)}if("minute"===d){var x=c(v);return f.formatDistance("xMinutes",x,g)}if("hour"===d){var E=c(v/60);return f.formatDistance("xHours",E,g)}if("day"===d){var I=c(b/1440);return f.formatDistance("xDays",I,g)}if("month"===d){var M=c(b/43200);return 12===M&&"month"!==h.unit?f.formatDistance("xYears",1,g):f.formatDistance("xMonths",M,g)}else if("year"===d){var C=c(b/525600);return f.formatDistance("xYears",C,g)}throw RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}},25883:(e,t,n)=>{"use strict";function r(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}n.d(t,{D4:()=>E});var i=n(21186),o=n(58059),s=n(17051),a=n(22102),u=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){var r=this.caches[n-1];e:for(var i=0;i<r.length;i++){for(var o=r[i],s=o.bytes,a=0;a<n;a++)if(s[a]!==e[t+a])continue e;return o.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var i=(0,s.Zf)(e,t,n),o=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(o,i),i},e}(),l=n(26350),c=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){var l=[a,u];if(n)throw TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(6===l[0]&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},d=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var o,s,a;o=r,s=i,a=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:a})},s)})}}},h=function(e){return this instanceof h?(this.v=e,this):new h(e)},f=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{var n;(n=i[e](t)).value instanceof h?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(e){c(o[0][3],e)}}function u(e){a("next",e)}function l(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},p="array",g="map_key",m=new DataView(new ArrayBuffer(0)),y=new Uint8Array(m.buffer);try{m.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var v=RangeError,b=new v("Insufficient data"),w=new u,x=function(){function e(e){var t,n,r,s,a,u,l;this.totalPos=0,this.pos=0,this.view=m,this.bytes=y,this.headByte=-1,this.stack=[],this.extensionCodec=null!=(t=null==e?void 0:e.extensionCodec)?t:i.g.defaultCodec,this.context=null==e?void 0:e.context,this.useBigInt64=null!=(n=null==e?void 0:e.useBigInt64)&&n,this.maxStrLength=null!=(r=null==e?void 0:e.maxStrLength)?r:o.f7,this.maxBinLength=null!=(s=null==e?void 0:e.maxBinLength)?s:o.f7,this.maxArrayLength=null!=(a=null==e?void 0:e.maxArrayLength)?a:o.f7,this.maxMapLength=null!=(u=null==e?void 0:e.maxMapLength)?u:o.f7,this.maxExtLength=null!=(l=null==e?void 0:e.maxExtLength)?l:o.f7,this.keyDecoder=(null==e?void 0:e.keyDecoder)!==void 0?e.keyDecoder:w}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=(0,a.C)(e),this.view=(0,a.o)(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=(0,a.C)(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return c(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:if(!this.hasRemaining(1))return[3,3];return[4,this.doDecodeSync()];case 2:return t.sent(),[3,1];case 3:return[2]}})},e.prototype.decodeAsync=function(e){var t,n,i,o,s,a,u,l,h,f,p;return l=this,h=void 0,f=void 0,p=function(){var l,h,f,p,g,m,y;return c(this,function(c){switch(c.label){case 0:l=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),t=!0,n=d(e),c.label=2;case 2:return[4,n.next()];case 3:if(o=(i=c.sent()).done)return[3,5];u=i.value,t=!1;try{if(f=u,l)throw this.createExtraByteError(this.totalPos);this.appendBuffer(f);try{h=this.doDecodeSync(),l=!0}catch(e){if(!(e instanceof v))throw e}this.totalPos+=this.pos}finally{t=!0}c.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return s={error:c.sent()},[3,12];case 7:if(c.trys.push([7,,10,11]),!(!t&&!o&&(a=n.return)))return[3,9];return[4,a.call(n)];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(s)throw s.error;return[7];case 11:return[7];case 12:if(l){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,h]}throw p=this,g=p.headByte,m=p.pos,y=p.totalPos,RangeError("Insufficient data in parsing ".concat(r(g)," at ").concat(y," (").concat(m," in the current buffer)"))}})},new(f||(f=Promise))(function(e,t){function n(e){try{i(p.next(e))}catch(e){t(e)}}function r(e){try{i(p.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof f?i:new f(function(e){e(i)})).then(n,r)}i((p=p.apply(l,h||[])).next())})},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return f(this,arguments,function(){var n,r,i,o,s,a,u,l,f,p,g;return c(this,function(c){switch(c.label){case 0:n=t,r=-1,c.label=1;case 1:c.trys.push([1,15,16,21]),i=!0,o=d(e),c.label=2;case 2:return[4,h(o.next())];case 3:if(l=(s=c.sent()).done)return[3,14];g=s.value,i=!1,c.label=4;case 4:if(c.trys.push([4,,12,13]),a=g,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),c.label=5;case 5:c.trys.push([5,10,,11]),c.label=6;case 6:return[4,h(this.doDecodeSync())];case 7:return[4,c.sent()];case 8:if(c.sent(),0==--r)return[3,9];return[3,6];case 9:return[3,11];case 10:if(!((u=c.sent())instanceof v))throw u;return[3,11];case 11:return this.totalPos+=this.pos,[3,13];case 12:return i=!0,[7];case 13:return[3,2];case 14:return[3,21];case 15:return f={error:c.sent()},[3,21];case 16:if(c.trys.push([16,,19,20]),!(!i&&!l&&(p=o.return)))return[3,18];return[4,h(p.call(o))];case 17:c.sent(),c.label=18;case 18:return[3,20];case 19:if(f)throw f.error;return[7];case 20:return[7];case 21:return[2]}})})},e.prototype.doDecodeSync=function(){t:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var n=e-128;if(0!==n){this.pushMapState(n),this.complete();continue}t={}}else if(e<160){var n=e-144;if(0!==n){this.pushArrayState(n),this.complete();continue}t=[]}else{var i=e-160;t=this.decodeUtf8String(i,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===e){var i=this.lookU8();t=this.decodeUtf8String(i,1)}else if(218===e){var i=this.lookU16();t=this.decodeUtf8String(i,2)}else if(219===e){var i=this.lookU32();t=this.decodeUtf8String(i,4)}else if(220===e){var n=this.readU16();if(0!==n){this.pushArrayState(n),this.complete();continue}t=[]}else if(221===e){var n=this.readU32();if(0!==n){this.pushArrayState(n),this.complete();continue}t=[]}else if(222===e){var n=this.readU16();if(0!==n){this.pushMapState(n),this.complete();continue}t={}}else if(223===e){var n=this.readU32();if(0!==n){this.pushMapState(n),this.complete();continue}t={}}else if(196===e){var n=this.lookU8();t=this.decodeBinary(n,1)}else if(197===e){var n=this.lookU16();t=this.decodeBinary(n,2)}else if(198===e){var n=this.lookU32();t=this.decodeBinary(n,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){var n=this.lookU8();t=this.decodeExtension(n,1)}else if(200===e){var n=this.lookU16();t=this.decodeExtension(n,2)}else if(201===e){var n=this.lookU32();t=this.decodeExtension(n,4)}else throw new l.X("Unrecognized type byte: ".concat(r(e)));this.complete();for(var o=this.stack;o.length>0;){var s,a=o[o.length-1];if(a.type===p)if(a.array[a.position]=t,a.position++,a.position===a.size)o.pop(),t=a.array;else continue t;else if(a.type===g){if("string"!=typeof(s=t)&&"number"!=typeof s)throw new l.X("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new l.X("The key __proto__ is not allowed");a.key=t,a.type="map_value";continue t}else if(a.map[a.key]=t,a.readCount++,a.readCount===a.size)o.pop(),t=a.map;else{a.key=null,a.type=g;continue t}}return t}},e.prototype.readHeadByte=function(){return -1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new l.X("Unrecognized array type byte: ".concat(r(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new l.X("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:g,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new l.X("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:p,size:e,array:Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){if(e>this.maxStrLength)throw new l.X("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw b;var n,r,i=this.pos+t;return r=this.stateIsMapKey()&&(null==(n=this.keyDecoder)?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,i,e):(0,s._u)(this.bytes,i,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&this.stack[this.stack.length-1].type===g},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new l.X("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw b;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new l.X("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e=(0,o.Hn)(this.view,this.pos);return this.pos+=8,e},e.prototype.readI64=function(){var e=(0,o.eN)(this.view,this.pos);return this.pos+=8,e},e.prototype.readU64AsBigInt=function(){var e=this.view.getBigUint64(this.pos);return this.pos+=8,e},e.prototype.readI64AsBigInt=function(){var e=this.view.getBigInt64(this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}();function E(e,t){return new x(t).decode(e)}},26325:(e,t,n)=>{"use strict";n.d(t,{yF:()=>s});var r=n(21462),i=n(79203),o=n(76957);function s(e,t){let n=(0,r.useMemo)(()=>(0,o.eU)(null,(t,n,...r)=>e(t,n,...r)),[e]);return(0,i.Xr)(n,t)}n(95570)},26350:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,Object.create(t.prototype)),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return r(t,e),t}(Error)},26571:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(90663),i=n(37513);function o(e){(0,i.A)(1,arguments);var t=(0,r.A)(e);return t.setHours(0,0,0,0),t}},27324:(e,t,n)=>{"use strict";function r(e,t){if(null==e)throw TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e}n.d(t,{A:()=>r})},32809:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(90663),i=n(87819),o=n(37513);function s(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function a(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(e),a=(0,r.A)(t),u=s(n,a),l=Math.abs((0,i.A)(n,a));n.setDate(n.getDate()-u*l);var c=Number(s(n,a)===-u),d=u*(l-c);return 0===d?0:d}},33685:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+e[t+d],d+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=l}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,h=5960464477539062e-23*(23===i),f=r?0:o-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+d>=1?t+=h/u:t+=h*Math.pow(2,1-d),t*u>=2&&(s++,u/=2),s+d>=c?(a=0,s=c):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+f]=255&s,f+=p,s/=256,l-=8);e[n+f-p]|=128*g}},34504:(e,t,n)=>{"use strict";var r=n(72182),i=n(22139),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function p(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new y(unescape(e.pathname),{});else if("string"===o)for(t in i=new y(e,{}),f)delete i[t];else if("object"===o){for(t in e)t in f||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=d(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],u=0;return o?a?(n=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(n=r[2]+r[4],u=r[2].length):a?(n=r[3]+r[4],u=r[3].length):n=r[4],"file:"===i?u>=2&&(n=n.slice(2)):g(i)?n=r[4]:i?o&&(n=n.slice(2)):u>=2&&g(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||g(i),slashesCount:u,rest:n}}function y(e,t,n){if(e=(e=d(e)).replace(s,""),!(this instanceof y))return new y(e,t,n);var o,a,u,l,f,v,b=h.slice(),w=typeof t,x=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=m(e||"",t=p(t))).protocol&&!a.slashes,this.slashes=a.slashes||o&&t.slashes,this.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||c.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(this.protocol)))&&(b[3]=[/(.*)/,"pathname"]);x<b.length;x++){if("function"==typeof(l=b[x])){e=l(e,this);continue}u=l[0],v=l[1],u!=u?this[v]=e:"string"==typeof u?~(f="@"===u?e.lastIndexOf(u):e.indexOf(u))&&("number"==typeof l[2]?(this[v]=e.slice(0,f),e=e.slice(f+l[2])):(this[v]=e.slice(f),e=e.slice(0,f))):(f=u.exec(e))&&(this[v]=f[1],e=e.slice(0,f.index)),this[v]=this[v]||o&&l[3]&&t[v]||"",l[4]&&(this[v]=this[v].toLowerCase())}n&&(this.query=n(this.query)),o&&t.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==t.pathname)&&(this.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),("."===i||".."===i)&&n.push(""),n.join("/")}(this.pathname,t.pathname)),"/"!==this.pathname.charAt(0)&&g(this.protocol)&&(this.pathname="/"+this.pathname),r(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(~(f=this.auth.indexOf(":"))?(this.username=this.auth.slice(0,f),this.username=encodeURIComponent(decodeURIComponent(this.username)),this.password=this.auth.slice(f+1),this.password=encodeURIComponent(decodeURIComponent(this.password))):this.username=encodeURIComponent(decodeURIComponent(this.auth)),this.auth=this.password?this.username+":"+this.password:this.username),this.origin="file:"!==this.protocol&&g(this.protocol)&&this.host?this.protocol+"//"+this.host:"null",this.href=this.toString()}y.prototype={set:function(e,t,n){switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),this[e]=t;break;case"port":this[e]=t,r(t,this.protocol)?t&&(this.host=this.hostname+":"+t):(this.host=this.hostname,this[e]="");break;case"hostname":this[e]=t,this.port&&(t+=":"+this.port),this.host=t;break;case"host":this[e]=t,u.test(t)?(t=t.split(":"),this.port=t.pop(),this.hostname=t.join(":")):(this.hostname=t,this.port="");break;case"protocol":this.protocol=t.toLowerCase(),this.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";this[e]=t.charAt(0)!==o?o+t:t}else this[e]=t;break;case"username":case"password":this[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(this.username=t.slice(0,s),this.username=encodeURIComponent(decodeURIComponent(this.username)),this.password=t.slice(s+1),this.password=encodeURIComponent(decodeURIComponent(this.password))):this.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<h.length;a++){var l=h[a];l[4]&&(this[l[1]]=this[l[1]].toLowerCase())}return this.auth=this.password?this.username+":"+this.password:this.username,this.origin="file:"!==this.protocol&&g(this.protocol)&&this.host?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this.host,r=this.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(this.protocol&&this.slashes||g(this.protocol)?"//":"");return this.username?(o+=this.username,this.password&&(o+=":"+this.password),o+="@"):this.password?(o+=":"+this.password,o+="@"):"file:"!==this.protocol&&g(this.protocol)&&!n&&"/"!==this.pathname&&(o+="@"),(":"===n[n.length-1]||u.test(this.hostname)&&!this.port)&&(n+=":"),o+=n+this.pathname,(t="object"==typeof this.query?e(this.query):this.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),this.hash&&(o+=this.hash),o}},y.extractProtocol=m,y.location=p,y.trimLeft=d,y.qs=i,e.exports=y},35329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53847),i=n(17844),o=n(93629),s=n(22531);Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return d},noSSR:function(){return c}});var a=n(51532);n(23798),n(21462);var u=a._(n(68230));function l(e){return{default:(null==e?void 0:e.default)||e}}function c(e,t){return delete t.webpack,delete t.modules,e(t)}function d(e,t){var n=u.default,a={loading:function(e){return e.error,e.isLoading,e.pastDelay,null}};r._(e,Promise)?a.loader=function(){return e}:"function"==typeof e?a.loader=e:(void 0===e?"undefined":s._(e))==="object"&&(a=i._({},a,e));var d=(a=i._({},a,t)).loader;return(a.loadableGenerated&&(a=i._({},a,a.loadableGenerated),delete a.loadableGenerated),"boolean"!=typeof a.ssr||a.ssr)?n(o._(i._({},a),{loader:function(){return null!=d?d().then(l):Promise.resolve(l(function(){return null}))}})):(delete a.webpack,delete a.modules,c(n,a))}("function"==typeof t.default||"object"===s._(t.default)&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},36747:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(27324);function i(e){return(0,r.A)({},e)}},37591:(e,t,n)=>{"use strict";n.d(t,{Ng:()=>h,bd:()=>l,oK:()=>d}),n(95570);var r={debug:-1,info:0,warn:1,error:2},i=e=>(t,n)=>{if(!n?.transportMessage)return void e(t,n);let{payload:r,...i}=n.transportMessage;n.transportMessage=i,e(t,n)},o=class{minLevel;output;constructor(e,t="info"){this.minLevel=t,this.output=e}debug(e,t){r[this.minLevel]<=r.debug&&this.output(e,t??{},"debug")}info(e,t){r[this.minLevel]<=r.info&&this.output(e,t??{},"info")}warn(e,t){r[this.minLevel]<=r.warn&&this.output(e,t??{},"warn")}error(e,t){r[this.minLevel]<=r.error&&this.output(e,t??{},"error")}},s=e=>({debug:i(e.debug.bind(e)),info:i(e.info.bind(e)),warn:i(e.warn.bind(e)),error:i(e.error.bind(e))}),a=n(38325),u=n(90673),l={RetriesExceeded:"conn_retry_exceeded",HandshakeFailed:"handshake_failed",MessageOrderingViolated:"message_ordering_violated",InvalidMessage:"invalid_message"},c=class{eventListeners={};removeAllListeners(){this.eventListeners={}}numberOfListeners(e){return this.eventListeners[e]?.size??0}addEventListener(e,t){this.eventListeners[e]||(this.eventListeners[e]=new Set),this.eventListeners[e]?.add(t)}removeEventListener(e,t){this.eventListeners[e]&&this.eventListeners[e]?.delete(t)}dispatchEvent(e,t){let n=this.eventListeners[e];if(n)for(let e of[...n])e(t)}},d=class{status;clientId;eventDispatcher;options;log;sessions;constructor(e,t){this.options={...a.jw,...t},this.eventDispatcher=new c,this.clientId=e,this.status="open",this.sessions=new Map}bindLogger(e,t){if("function"==typeof e){this.log=s(new o(e,t));return}this.log=s(e)}handleMsg(e){"open"===this.getStatus()&&this.eventDispatcher.dispatchEvent("message",e)}addEventListener(e,t){this.eventDispatcher.addEventListener(e,t)}removeEventListener(e,t){this.eventDispatcher.removeEventListener(e,t)}protocolError(e){this.eventDispatcher.dispatchEvent("protocolError",e)}close(){for(let e of(this.status="closed",this.sessions.values()))this.deleteSession(e);this.eventDispatcher.dispatchEvent("transportStatus",{status:this.status}),this.eventDispatcher.removeAllListeners(),this.log?.info("manually closed transport",{clientId:this.clientId})}getStatus(){return this.status}updateSession(e){let t=this.sessions.get(e.to);if(t&&t.id!==e.id)throw Error(`attempt to transition active session for ${e.to} but active session (${t.id}) is different from handle (${e.id})`);return this.sessions.set(e.to,e),t||this.eventDispatcher.dispatchEvent("sessionStatus",{status:"connect",session:e}),this.eventDispatcher.dispatchEvent("sessionTransition",{state:e.state,session:e}),e}deleteSession(e,t){if(e._isConsumed)return;let n=e.loggingMetadata;n.tags&&t?.unhealthy&&n.tags.push("unhealthy-session"),e.log?.info(`closing session ${e.id}`,n),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"disconnect",session:e});let r=e.to;e.close(),this.sessions.delete(r)}onSessionGracePeriodElapsed(e){this.log?.warn(`session to ${e.to} grace period elapsed, closing`,e.loggingMetadata),this.deleteSession(e)}onConnectingFailed(e){let t=a.CC.transition.ConnectingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}});return this.updateSession(t)}onConnClosed(e){let t;return t="Handshaking"===e.state?a.CC.transition.HandshakingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}):a.CC.transition.ConnectedToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}),this.updateSession(t)}},h=class{id;telemetry;constructor(){this.id=`conn-${(0,u.$C)()}`}get loggingMetadata(){let e={connId:this.id},t=this.telemetry?.span.spanContext();return this.telemetry?.span.isRecording()&&t&&(e.telemetry={traceId:t.traceId,spanId:t.spanId}),e}_dataListeners=new Set;_closeListeners=new Set;_errorListeners=new Set;get dataListeners(){return[...this._dataListeners]}get closeListeners(){return[...this._closeListeners]}get errorListeners(){return[...this._errorListeners]}addDataListener(e){this._dataListeners.add(e)}removeDataListener(e){this._dataListeners.delete(e)}addCloseListener(e){this._closeListeners.add(e)}removeCloseListener(e){this._closeListeners.delete(e)}addErrorListener(e){this._errorListeners.add(e)}removeErrorListener(e){this._errorListeners.delete(e)}}},38325:(e,t,n)=>{"use strict";n.d(t,{Dl:()=>O,CC:()=>S,I$:()=>d,jw:()=>c});var r=n(90673),i=new TextEncoder,o=new TextDecoder,s=n(97858),a=n(16128),u=n(63650),l=n(64254).hp,c={heartbeatIntervalMs:1e3,heartbeatsUntilDead:2,sessionDisconnectGraceMs:5e3,connectionTimeoutMs:2e3,handshakeTimeoutMs:1e3,enableTransparentSessionReconnects:!0,codec:{toBuffer:e=>i.encode(JSON.stringify(e,function(e){let t,n=this[e];if(!(n instanceof Uint8Array))return n;return{$t:(t="",n.forEach(e=>{t+=String.fromCharCode(e)}),btoa(t))}})),fromBuffer:e=>{try{let t=JSON.parse(o.decode(e),function(e,t){return t?.$t?function(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t.$t):t});if("object"==typeof t)return t;return null}catch{return null}}}},d={...c,baseIntervalMs:150,maxJitterMs:200,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:200};({...c});var h=(e=>(e.NoConnection="NoConnection",e.BackingOff="BackingOff",e.Connecting="Connecting",e.Handshaking="Handshaking",e.Connected="Connected",e.WaitingForHandshake="WaitingForHandshake",e))(h||{}),f="session state has been consumed and is no longer valid",p=class{_isConsumed;close(){this._handleClose()}constructor(){return this._isConsumed=!1,new Proxy(this,{get(e,t){if("_isConsumed"===t||"id"===t||"state"===t)return Reflect.get(e,t);if("_handleStateExit"===t)return()=>{e._isConsumed=!0,e._handleStateExit()};if("_handleClose"===t)return()=>{e._isConsumed=!0,e._handleStateExit(),e._handleClose()};if(e._isConsumed)throw Error(`${f}: getting ${t.toString()} on consumed state`);return Reflect.get(e,t)},set(e,t,n){if(e._isConsumed)throw Error(`${f}: setting ${t.toString()} on consumed state`);return Reflect.set(e,t,n)}})}},g=class extends p{from;options;log;constructor({from:e,options:t,log:n}){super(),this.from=e,this.options=t,this.log=n}parseMsg(e){let t=this.options.codec.fromBuffer(e);if(null===t){let t=new TextDecoder().decode(l.from(e));return this.log?.error(`received malformed msg: ${t}`,this.loggingMetadata),null}return s.J(r.bH,t)?t:(this.log?.error(`received invalid msg: ${JSON.stringify(t)}`,{...this.loggingMetadata,validationErrors:[...a.I(r.bH,t)]}),null)}},m=class extends g{id;telemetry;to;seq;ack;sendBuffer;constructor(e){let{id:t,to:n,seq:r,ack:i,sendBuffer:o,telemetry:s,log:a}=e;super(e),this.id=t,this.to=n,this.seq=r,this.ack=i,this.sendBuffer=o,this.telemetry=s,this.log=a}get loggingMetadata(){let e=this.telemetry.span.spanContext(),t={clientId:this.from,connectedTo:this.to,sessionId:this.id};return this.telemetry.span.isRecording()&&(t.telemetry={traceId:e.traceId,spanId:e.spanId}),t}constructMsg(e){let t={...e,id:(0,r.$C)(),to:this.to,from:this.from,seq:this.seq,ack:this.ack};return this.seq++,t}nextSeq(){return this.sendBuffer.length>0?this.sendBuffer[0].seq:this.seq}send(e){let t=this.constructMsg(e);return this.sendBuffer.push(t),t.id}_handleStateExit(){}_handleClose(){this.sendBuffer.length=0,this.telemetry.span.end()}},y=class extends m{graceExpiryTime;gracePeriodTimeout;listeners;constructor(e){super(e),this.listeners=e.listeners,this.graceExpiryTime=e.graceExpiryTime,this.gracePeriodTimeout=setTimeout(()=>{this.listeners.onSessionGracePeriodElapsed()},this.graceExpiryTime-Date.now())}_handleStateExit(){super._handleStateExit(),this.gracePeriodTimeout&&(clearTimeout(this.gracePeriodTimeout),this.gracePeriodTimeout=void 0)}_handleClose(){super._handleClose()}},v=class extends y{state="Connecting";connPromise;listeners;connectionTimeout;constructor(e){super(e),this.connPromise=e.connPromise,this.listeners=e.listeners,this.connPromise.then(e=>{this._isConsumed||this.listeners.onConnectionEstablished(e)},e=>{this._isConsumed||this.listeners.onConnectionFailed(e)}),this.connectionTimeout=setTimeout(()=>{this.listeners.onConnectionTimeout()},this.options.connectionTimeoutMs)}bestEffortClose(){let e=this.log,t=this.loggingMetadata;this.connPromise.then(n=>{n.close(),e?.info("connection eventually resolved but session has transitioned, closed connection",{...t,...n.loggingMetadata})}).catch(()=>{})}_handleStateExit(){super._handleStateExit(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)}_handleClose(){this.bestEffortClose(),super._handleClose()}},b=class extends y{state="NoConnection";_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit()}},w=class extends g{state="WaitingForHandshake";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.addDataListener(this.onHandshakeData),this.conn.addErrorListener(this.listeners.onConnectionErrored),this.conn.addCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{clientId:this.from,connId:this.conn.id,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.parseMsg(e);if(null===t)return void this.listeners.onInvalidHandshake("could not parse message","MALFORMED_HANDSHAKE");this.listeners.onHandshake(t)};sendHandshake(e){return this.conn.send(this.options.codec.toBuffer(e))}_handleStateExit(){this.conn.removeDataListener(this.onHandshakeData),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.conn.removeCloseListener(this.listeners.onConnectionClosed),clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0}_handleClose(){this.conn.close()}},x=class extends y{state="Handshaking";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.addDataListener(this.onHandshakeData),this.conn.addErrorListener(this.listeners.onConnectionErrored),this.conn.addCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.parseMsg(e);if(null===t)return void this.listeners.onInvalidHandshake("could not parse message","MALFORMED_HANDSHAKE");this.listeners.onHandshake(t)};sendHandshake(e){return this.conn.send(this.options.codec.toBuffer(e))}_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(this.onHandshakeData),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.conn.removeCloseListener(this.listeners.onConnectionClosed),this.handshakeTimeout&&(clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},E=class extends m{state="Connected";conn;listeners;heartbeatHandle;heartbeatMisses=0;isActivelyHeartbeating;updateBookkeeping(e,t){this.sendBuffer=this.sendBuffer.filter(t=>t.seq>=e),this.ack=t+1,this.heartbeatMisses=0}send(e){let t=this.constructMsg(e);return this.sendBuffer.push(t),this.conn.send(this.options.codec.toBuffer(t)),t.id}constructor(e){if(super(e),this.conn=e.conn,this.listeners=e.listeners,this.conn.addDataListener(this.onMessageData),this.conn.addCloseListener(this.listeners.onConnectionClosed),this.conn.addErrorListener(this.listeners.onConnectionErrored),this.sendBuffer.length>0)for(let e of(this.log?.info(`sending ${this.sendBuffer.length} buffered messages, starting at seq ${this.nextSeq()}`,this.loggingMetadata),this.sendBuffer))this.conn.send(this.options.codec.toBuffer(e));this.isActivelyHeartbeating=!1,this.heartbeatHandle=setInterval(()=>{let e=this.heartbeatMisses,t=e*this.options.heartbeatIntervalMs;if(e>=this.options.heartbeatsUntilDead){this.log?.info(`closing connection to ${this.to} due to inactivity (missed ${e} heartbeats which is ${t}ms)`,this.loggingMetadata),this.telemetry.span.addEvent("closing connection due to inactivity"),this.conn.close(),clearInterval(this.heartbeatHandle),this.heartbeatHandle=void 0;return}this.isActivelyHeartbeating&&this.sendHeartbeat(),this.heartbeatMisses++},this.options.heartbeatIntervalMs)}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}startActiveHeartbeat(){this.isActivelyHeartbeating=!0}sendHeartbeat(){this.log?.debug("sending heartbeat",this.loggingMetadata),this.send({streamId:"heartbeat",controlFlags:1,payload:{type:"ACK"}})}closeConnection(){this.conn.removeDataListener(this.onMessageData),this.conn.removeCloseListener(this.listeners.onConnectionClosed),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.conn.close()}onMessageData=e=>{let t=this.parseMsg(e);if(null===t)return void this.listeners.onInvalidMessage("could not parse message");if(t.seq!==this.ack){if(t.seq<this.ack)this.log?.debug(`received duplicate msg (got seq: ${t.seq}, wanted seq: ${this.ack}), discarding`,{...this.loggingMetadata,transportMessage:t});else{let e=`received out-of-order msg, closing connection (got seq: ${t.seq}, wanted seq: ${this.ack})`;this.log?.warn(e,{...this.loggingMetadata,transportMessage:t,tags:["invariant-violation"]}),this.telemetry.span.setStatus({code:u.s.ERROR,message:e}),this.closeConnection()}return}if(this.log?.debug("received msg",{...this.loggingMetadata,transportMessage:t}),this.updateBookkeeping(t.ack,t.seq),!(0,r.o0)(t.controlFlags))return void this.listeners.onMessage(t);this.log?.debug("discarding msg (ack bit set)",{...this.loggingMetadata,transportMessage:t}),this.isActivelyHeartbeating||this.sendHeartbeat()};_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(this.onMessageData),this.conn.removeCloseListener(this.listeners.onConnectionClosed),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.heartbeatHandle&&(clearInterval(this.heartbeatHandle),this.heartbeatHandle=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},I=class extends y{state="BackingOff";listeners;backoffTimeout;constructor(e){super(e),this.listeners=e.listeners,this.backoffTimeout=setTimeout(()=>{this.listeners.onBackoffFinished()},e.backoffMs)}_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit(),this.backoffTimeout&&(clearTimeout(this.backoffTimeout),this.backoffTimeout=void 0)}};function M(e){return{id:e.id,from:e.from,to:e.to,seq:e.seq,ack:e.ack,sendBuffer:e.sendBuffer,telemetry:e.telemetry,options:e.options,log:e.log}}function C(e){return{...M(e),graceExpiryTime:e.graceExpiryTime}}var S={entrypoints:{NoConnection:(e,t,n,i,o)=>{let s=`session-${(0,r.$C)()}`,a=(0,r.iH)(s,e,t),u=new b({listeners:n,id:s,from:t,to:e,seq:0,ack:0,graceExpiryTime:Date.now()+i.sessionDisconnectGraceMs,sendBuffer:[],telemetry:a,options:i,log:o});return u.log?.info(`session ${u.id} created in NoConnection state`,{...u.loggingMetadata,tags:["state-transition"]}),u},WaitingForHandshake:(e,t,n,r,i)=>{let o=new w({conn:t,listeners:n,from:e,options:r,log:i});return o.log?.info("session created in WaitingForHandshake state",{...o.loggingMetadata,tags:["state-transition"]}),o}},transition:{NoConnectionToBackingOff:(e,t,n)=>{let r=C(e);e._handleStateExit();let i=new I({backoffMs:t,listeners:n,...r});return i.log?.info(`session ${i.id} transition from NoConnection to BackingOff`,{...i.loggingMetadata,tags:["state-transition"]}),i},BackingOffToConnecting:(e,t,n)=>{let r=C(e);e._handleStateExit();let i=new v({connPromise:t,listeners:n,...r});return i.log?.info(`session ${i.id} transition from BackingOff to Connecting`,{...i.loggingMetadata,tags:["state-transition"]}),i},ConnectingToHandshaking:(e,t,n)=>{let r=C(e);e._handleStateExit();let i=new x({conn:t,listeners:n,...r});return i.log?.info(`session ${i.id} transition from Connecting to Handshaking`,{...i.loggingMetadata,tags:["state-transition"]}),i},HandshakingToConnected:(e,t)=>{let n=M(e),r=e.conn;e._handleStateExit();let i=new E({conn:r,listeners:t,...n});return i.log?.info(`session ${i.id} transition from Handshaking to Connected`,{...i.loggingMetadata,tags:["state-transition"]}),i},WaitingForHandshakeToConnected:(e,t,n,i,o,s)=>{let a=e.conn,{from:u,options:l}=e,c=t?M(t):{id:n,from:u,to:i,seq:0,ack:0,sendBuffer:[],telemetry:(0,r.iH)(n,i,u,o),options:l,log:e.log};e._handleStateExit(),t?._handleStateExit();let d=new E({conn:a,listeners:s,...c});return d.log?.info(`session ${d.id} transition from WaitingForHandshake to Connected`,{...d.loggingMetadata,tags:["state-transition"]}),d},BackingOffToNoConnection:(e,t)=>{let n=C(e);e._handleStateExit();let r=new b({listeners:t,...n});return r.log?.info(`session ${r.id} transition from BackingOff to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectingToNoConnection:(e,t)=>{let n=C(e);e.bestEffortClose(),e._handleStateExit();let r=new b({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Connecting to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},HandshakingToNoConnection:(e,t)=>{let n=C(e);e.conn.close(),e._handleStateExit();let r=new b({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Handshaking to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectedToNoConnection:(e,t)=>{let n=M(e),r=Date.now()+e.options.sessionDisconnectGraceMs;e.conn.close(),e._handleStateExit();let i=new b({listeners:t,graceExpiryTime:r,...n});return i.log?.info(`session ${i.id} transition from Connected to NoConnection`,{...i.loggingMetadata,tags:["state-transition"]}),i}}},k=S.transition,O={entrypoint:S.entrypoints.NoConnection,transition:{NoConnectionToBackingOff:k.NoConnectionToBackingOff,BackingOffToConnecting:k.BackingOffToConnecting,ConnectingToHandshaking:k.ConnectingToHandshaking,HandshakingToConnected:k.HandshakingToConnected,BackingOffToNoConnection:k.BackingOffToNoConnection,ConnectingToNoConnection:k.ConnectingToNoConnection,HandshakingToNoConnection:k.HandshakingToNoConnection,ConnectedToNoConnection:k.ConnectedToNoConnection}};S.entrypoints.WaitingForHandshake,k.WaitingForHandshakeToConnected,k.ConnectedToNoConnection},42028:(e,t,n)=>{"use strict";n.d(t,{T:()=>y});var r=n(91601),i=n(80029),o=n(37609),s=n(80031),a=n(69094),u=n(83850),l=n(97858),c=n(99410),d=n(93294);class h extends o.i{constructor(e,t,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=t,this.error=n}}class f extends o.i{constructor(e,t,n,r){super(r instanceof Error?r.message:"Unknown error"),this.schema=e,this.path=t,this.value=n,this.error=r}}function p(e,t,n){try{return(0,d.n_)(e)?e[i.H7].Decode(n):n}catch(r){throw new f(e,t,n,r)}}let g=new Set;var m=n(16128);function y(...e){let[t,n,o]=3===e.length?[e[0],e[1],e[2]]:[e[0],[],e[1]];if(!(0,l.J)(t,n,o))throw new h(t,o,(0,m.I)(t,n,o).First());return(g.clear(),function e(t,n){let r=(0,u.uN)(t,n);if(t.$id&&g.has(t.$id))return!1;switch(t.$id&&g.add(t.$id),t[i.b8]){case"Array":case"AsyncIterator":case"Iterator":return(0,d.n_)(t)||e(t.items,r);case"Constructor":return(0,d.n_)(t)||e(t.returns,r)||t.parameters.some(t=>e(t,r));case"Function":return(0,d.n_)(t)||e(t.returns,r)||t.parameters.some(t=>e(t,r));case"Import":let o=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((e,n)=>[...e,t.$defs[n]],[]),s=t.$defs[t.$ref];return(0,d.n_)(t)||e(s,[...o,...r]);case"Intersect":return(0,d.n_)(t)||(0,d.n_)(t.unevaluatedProperties)||t.allOf.some(t=>e(t,r));case"Not":return(0,d.n_)(t)||e(t.not,r);case"Object":return(0,d.n_)(t)||Object.values(t.properties).some(t=>e(t,r))||(0,d.Yi)(t.additionalProperties)&&e(t.additionalProperties,r);case"Promise":return(0,d.n_)(t)||e(t.item,r);case"Record":let a=Object.getOwnPropertyNames(t.patternProperties)[0],l=t.patternProperties[a];return(0,d.n_)(t)||e(l,r)||(0,d.Yi)(t.additionalProperties)&&(0,d.n_)(t.additionalProperties);case"Ref":case"This":return!!(0,d.n_)(t)||e((0,u.Lk)(t,r),r);case"Tuple":return(0,d.n_)(t)||!(0,c.R1)(t.items)&&t.items.some(t=>e(t,r));case"Union":return(0,d.n_)(t)||t.anyOf.some(t=>e(t,r));default:return(0,d.n_)(t)}}(t,n))?function e(t,n,o,h){let f=(0,u.uN)(t,n);switch(t[i.b8]){case"Array":return(0,c.QS)(h)?p(t,o,h.map((n,r)=>e(t.items,f,`${o}/${r}`,n))):p(t,o,h);case"Import":let g=globalThis.Object.values(t.$defs),m=e(t.$defs[t.$ref],[...f,...g],o,h);return p(t,o,m);case"Intersect":return function(t,n,r,i){if(!(0,c.av)(i)||(0,c.u$)(i))return p(t,r,i);let o=function(e){let t=(0,a.g)(e),n=(0,s.u$)(e,t);return t.map((e,r)=>[t[r],n[r]])}(t),u=o.map(e=>e[0]),l={...i};for(let[t,i]of o)t in l&&(l[t]=e(i,n,`${r}/${t}`,l[t]));if(!(0,d.n_)(t.unevaluatedProperties))return p(t,r,l);let h=Object.getOwnPropertyNames(l),f=t.unevaluatedProperties,g={...l};for(let e of h)u.includes(e)||(g[e]=p(f,`${r}/${e}`,g[e]));return p(t,r,g)}(t,f,o,h);case"Not":return p(t,o,e(t.not,f,o,h));case"Object":return function(t,n,i,o){if(!(0,c.av)(o))return p(t,i,o);let s=(0,a.g)(t),u={...o};for(let o of s)(0,c.LT)(u,o)&&((0,c.R1)(u[o])&&(!(0,d.R1)(t.properties[o])||r.Q.IsExactOptionalProperty(u,o))||(u[o]=e(t.properties[o],n,`${i}/${o}`,u[o])));if(!(0,d.Yi)(t.additionalProperties))return p(t,i,u);let l=Object.getOwnPropertyNames(u),h=t.additionalProperties,f={...u};for(let e of l)s.includes(e)||(f[e]=p(h,`${i}/${e}`,f[e]));return p(t,i,f)}(t,f,o,h);case"Record":return function(t,n,r,i){if(!(0,c.av)(i))return p(t,r,i);let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=new RegExp(o),a={...i};for(let u of Object.getOwnPropertyNames(i))s.test(u)&&(a[u]=e(t.patternProperties[o],n,`${r}/${u}`,a[u]));if(!(0,d.Yi)(t.additionalProperties))return p(t,r,a);let u=Object.getOwnPropertyNames(a),l=t.additionalProperties,h={...a};for(let e of u)s.test(e)||(h[e]=p(l,`${r}/${e}`,h[e]));return p(t,r,h)}(t,f,o,h);case"Ref":let y=(0,u.Lk)(t,f);return p(t,o,e(y,f,o,h));case"Symbol":default:return p(t,o,h);case"This":let v=(0,u.Lk)(t,f);return p(t,o,e(v,f,o,h));case"Tuple":return(0,c.QS)(h)&&(0,c.QS)(t.items)?p(t,o,t.items.map((t,n)=>e(t,f,`${o}/${n}`,h[n]))):p(t,o,h);case"Union":for(let n of t.anyOf){if(!(0,l.J)(n,f,h))continue;let r=e(n,f,o,h);return p(t,o,r)}return p(t,o,h)}}(t,n,"",o):o}},45564:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,o=u(e),s=o[0],a=o[1],l=new i((s+a)*3/4-a),c=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===a&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===a&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(function(e,t,r){for(var i,o=[],s=t;s<r;s+=3)i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[i>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r[45]=62,r[95]=63},46434:(e,t,n)=>{"use strict";function r(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new i(t.call(e));n="@@asyncIterator",r="@@iterator"}throw TypeError("Object is not async iterable")}function i(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(i=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new i(e)}n.d(t,{_:()=>r})},47477:(e,t,n)=>{"use strict";n.d(t,{eu:()=>s}),Error("timeout while waiting for mutex to become available"),Error("mutex already locked");let r=Error("request for lock canceled");class i{constructor(e,t=r){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return new Promise((n,r)=>{let i={resolve:n,reject:r,weight:e,priority:t},s=o(this._queue,e=>t<=e.priority);-1===s&&e<=this._value?this._dispatchItem(i):this._queue.splice(s+1,0,i)})}runExclusive(e){var t,n,r,i;return t=this,n=arguments,r=void 0,i=function*(e,t=1,n=0){let[r,i]=yield this.acquire(t,n);try{return yield e(r)}finally{i()}},new(r||(r=Promise))(function(e,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,a)}u((i=i.apply(t,n||[])).next())})}waitForUnlock(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),function(e,t){let n=o(e,e=>t.priority<=e.priority);e.splice(n+1,0,t)}(this._weightedWaiters[e-1],{resolve:n,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){let t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){let t=this._weightedWaiters[e-1];t&&(t.forEach(e=>e.resolve()),this._weightedWaiters[e-1]=[])}else{let e=this._queue[0].priority;for(let t=this._value;t>0;t--){let n=this._weightedWaiters[t-1];if(!n)continue;let r=n.findIndex(t=>t.priority<=e);(-1===r?n:n.splice(0,r)).forEach(e=>e.resolve())}}}_couldLockImmediately(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value}}function o(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return -1}class s{constructor(e){this._semaphore=new i(1,e)}acquire(){var e,t,n,r;return e=this,t=arguments,n=void 0,r=function*(e=0){let[,t]=yield this._semaphore.acquire(1,e);return t},new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}},51175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{_:()=>i});var r=n(86466);function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r._)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}},57010:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=n(6639)._.getInstance()},57564:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(11972),i=n(62589),o=n(37513);function s(e,t){(0,o.A)(2,arguments);var n=(0,r.A)(t);return(0,i.A)(e,36e5*n)}},57764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)(e);var n=i[![void 0,null].includes(t)?t:"all"];return!!n&&n.test(e)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(6235)),i={1:/^[0-9A-F]{8}-[0-9A-F]{4}-1[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,2:/^[0-9A-F]{8}-[0-9A-F]{4}-2[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};e.exports=t.default,e.exports.default=t.default},58059:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>a,X3:()=>i,_j:()=>o,eN:()=>s,f7:()=>r});var r=0xffffffff;function i(e,t,n){e.setUint32(t,n/0x100000000),e.setUint32(t+4,n)}function o(e,t,n){var r=Math.floor(n/0x100000000);e.setUint32(t,r),e.setUint32(t+4,n)}function s(e,t){return 0x100000000*e.getInt32(t)+e.getUint32(t+4)}function a(e,t){return 0x100000000*e.getUint32(t)+e.getUint32(t+4)}},59254:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=Object.prototype.hasOwnProperty;function i(e,t,n){for(n of e.keys())if(o(n,t))return n}function o(e,t){var n,s,a;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&o(e[s],t[s]););return -1===s}if(n===Set){if(e.size!==t.size)return!1;for(s of e)if((a=s)&&"object"==typeof a&&!(a=i(t,a))||!t.has(a))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(s of e)if((a=s[0])&&"object"==typeof a&&!(a=i(t,a))||!o(s[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return -1===s}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return -1===s}if(!n||"object"==typeof e){for(n in s=0,e)if(r.call(e,n)&&++s&&!r.call(t,n)||!(n in t)||!o(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!=e&&t!=t}},60296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});var r=n(51532)._(n(21462)).default.createContext(null)},63650:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},64254:(e,t,n)=>{"use strict";var r=n(95570),i=n(45564),o=n(33685),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e){var r=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!u.isEncoding(i))throw TypeError("Unknown encoding: "+i);var o=0|g(r,i),s=a(o),l=s.write(r,i);return l!==o&&(s=s.slice(0,l)),s}if(ArrayBuffer.isView(e)){var c=e;if(_(c,Uint8Array)){var d=new Uint8Array(c);return f(d.buffer,d.byteOffset,d.byteLength)}return h(c)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(_(e,ArrayBuffer)||e&&_(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(_(e,SharedArrayBuffer)||e&&_(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var m=e.valueOf&&e.valueOf();if(null!=m&&m!==e)return u.from(m,t,n);var y=function(e){if(u.isBuffer(e)){var t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(y)return y;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),a(e<0?0:0|p(e))}function h(e){for(var t=e.length<0?0:0|p(e.length),n=a(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),u.prototype),r}function p(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||_(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(i)return r?-1:k(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var r,o,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=A[e[o]];return i}(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=t,s=n,0===o&&s===r.length?i.fromByteArray(r):i.fromByteArray(r.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){var o;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>0x7fffffff?n=0x7fffffff:n<-0x80000000&&(n=-0x80000000),(o=n*=1)!=o&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length)if(i)return -1;else n=e.length-1;else if(n<0)if(!i)return -1;else n=0;if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,n);else return Uint8Array.prototype.lastIndexOf.call(e,t,n);return b(e,[t],n,r,i)}throw TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;s=2,a/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else -1!==c&&(o-=o-c),c=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var d=!0,h=0;h<u;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return -1}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:(192&(o=e[i+1]))==128&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],s=e[i+2],(192&o)==128&&(192&s)==128&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],(192&o)==128&&(192&s)==128&&(192&a)==128&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}var h=r,f=h.length;if(f<=4096)return String.fromCharCode.apply(String,h);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,h.slice(g,g+=4096));return p}function x(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,i,o){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function I(e,t,n,r,i,o){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function M(e,t,n,r,i){return t*=1,n>>>=0,i||I(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,r,23,4),n+4}function C(e,t,n,r,i){return t*=1,n>>>=0,i||I(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,r,52,8),n+8}t.hp=u,t.IS=50,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===r||"function"!=typeof r.error||r.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,n){return(c(e),e<=0)?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(_(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),_(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:+(r<n)},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(_(o,Uint8Array))i+o.length>r.length?u.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else if(u.isBuffer(o))o.copy(r,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=o.length}return r},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(e,t,n,r,i){if(_(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,a=Math.min(o,s),l=this.slice(r,i),c=e.slice(t,n),d=0;d<a;++d)if(l[d]!==c[d]){o=l[d],s=c[d];break}return o<s?-1:+(s<o)},u.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,o,s,a,u,l,c,d,h=this.length-t;if((void 0===n||n>h)&&(n=h),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a,u=parseInt(t.substr(2*s,2),16);if((a=u)!=a)break;e[n+s]=u}return s}(this,e,t,n);case"utf8":case"utf-8":return i=t,o=n,T(k(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=t,a=n,T(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,s,a);case"base64":return u=t,l=n,T(O(e),this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=n,T(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,this.length-c),this,c,d);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return(e>>>=0,t||x(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},u.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;E(this,e,t,n,i,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,n,r){if(e*=1,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;E(this,e,t,n,i,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e*=1,t>>>=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e*=1,t>>>=0,!r){var i=Math.pow(2,8*n-1);E(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||E(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(!u.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var i,o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=u.isBuffer(e)?e:u.from(e,r),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var S=/[^+/0-9A-Za-z-_]/g;function k(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319||s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function O(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length)&&!(i>=e.length);++i)t[i+n]=e[i];return i}function _(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var A=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},66218:(e,t,n)=>{"use strict";n.d(t,{u:()=>_});var r,i=n(7079),o=n(6639),s=n(3107);!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r||(r={}));var a="0000000000000000",u="00000000000000000000000000000000",l={traceId:u,spanId:a,traceFlags:r.NONE},c=function(){function e(e){void 0===e&&(e=l),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),d=(0,s.n)("OpenTelemetry Context Key SPAN");function h(e){return e.getValue(d)||void 0}function f(){return h(o._.getInstance().active())}function p(e,t){return e.setValue(d,t)}function g(e){return e.deleteValue(d)}function m(e,t){return p(e,new c(t))}function y(e){var t;return null==(t=h(e))?void 0:t.spanContext()}var v=/^([0-9a-f]{32})$/i,b=/^[0-9a-f]{16}$/i;function w(e){var t,n;return t=e.traceId,v.test(t)&&t!==u&&(n=e.spanId,b.test(n)&&n!==a)}function x(e){return new c(e)}var E=o._.getInstance(),I=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=E.active()),null==t?void 0:t.root)return new c;var r,i=n&&y(n);return"object"==typeof(r=i)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&w(i)?new c(i):new c},e.prototype.startActiveSpan=function(e,t,n,r){if(!(arguments.length<2)){2==arguments.length?s=t:3==arguments.length?(i=t,s=n):(i=t,o=n,s=r);var i,o,s,a=null!=o?o:E.active(),u=this.startSpan(e,i,a),l=p(a,u);return E.with(l,s,void 0,u)}},e}(),M=new I,C=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):M},e}(),S=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new I},e}()),k=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!=(r=this.getDelegateTracer(e,t,n))?r:new C(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:S},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,n)},e}(),O=n(17063),T="trace",_=(function(){function e(){this._proxyTracerProvider=new k,this.wrapSpanContext=x,this.isSpanContextValid=w,this.deleteSpan=g,this.getSpan=h,this.getActiveSpan=f,this.getSpanContext=y,this.setSpan=p,this.setSpanContext=m}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,i.$G)(T,this._proxyTracerProvider,O.K.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,i.mS)(T)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,i.kv)(T,O.K.instance()),this._proxyTracerProvider=new k},e})().getInstance()},67255:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>a});let i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));let a=function(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();let a=(e=e||{}).random??e.rng?.()??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(o)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(a)}},67323:(e,t,n)=>{"use strict";n.d(t,{MU:()=>L,xp:()=>q,Ng:()=>V,bd:()=>g});var r,i=n(66218),o=n(57010);n(95570);var s={debug:-1,info:0,warn:1,error:2},a=e=>(t,n)=>{if(n&&!n.telemetry){let e=i.u.getSpan(o._.active());e&&(n.telemetry={traceId:e.spanContext().traceId,spanId:e.spanContext().spanId})}if(!n?.transportMessage)return void e(t,n);let{payload:r,...s}=n.transportMessage;n.transportMessage=s,e(t,n)},u=class{minLevel;output;constructor(e,t="info"){this.minLevel=t,this.output=e}debug(e,t){s[this.minLevel]<=s.debug&&this.output(e,t??{},"debug")}info(e,t){s[this.minLevel]<=s.info&&this.output(e,t??{},"info")}warn(e,t){s[this.minLevel]<=s.warn&&this.output(e,t??{},"warn")}error(e,t){s[this.minLevel]<=s.error&&this.output(e,t??{},"error")}},l=e=>({debug:a(e.debug.bind(e)),info:a(e.info.bind(e)),warn:a(e.warn.bind(e)),error:a(e.error.bind(e))}),c=n(94450);!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}));var d=n(94598),h=n(25883),f=n(97858),p=n(16128),g={RetriesExceeded:"conn_retry_exceeded",HandshakeFailed:"handshake_failed",MessageOrderingViolated:"message_ordering_violated",InvalidMessage:"invalid_message",MessageSendFailure:"message_send_failure"},m=class{eventListeners={};removeAllListeners(){this.eventListeners={}}numberOfListeners(e){return this.eventListeners[e]?.size??0}addEventListener(e,t){this.eventListeners[e]||(this.eventListeners[e]=new Set),this.eventListeners[e]?.add(t)}removeEventListener(e,t){this.eventListeners[e]&&this.eventListeners[e]?.delete(t)}dispatchEvent(e,t){let n=this.eventListeners[e];if(n)for(let e of[...n])e(t)}},y=new TextEncoder,v=new TextDecoder,b={heartbeatIntervalMs:1e3,heartbeatsUntilDead:2,sessionDisconnectGraceMs:5e3,connectionTimeoutMs:2e3,handshakeTimeoutMs:1e3,enableTransparentSessionReconnects:!0,codec:{toBuffer:e=>y.encode(JSON.stringify(e,function(e){let t,n=this[e];if(!(n instanceof Uint8Array))return n;return{$t:(t="",n.forEach(e=>{t+=String.fromCharCode(e)}),btoa(t))}})),fromBuffer:e=>{let t=JSON.parse(v.decode(e),function(e,t){return t?.$t!==void 0?function(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t.$t):t});if("object"!=typeof t||null===t)throw Error("unpacked msg is not an object");return t}}},w={...b,baseIntervalMs:150,maxJitterMs:200,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:200},x=(e=>(e.NoConnection="NoConnection",e.BackingOff="BackingOff",e.Connecting="Connecting",e.Handshaking="Handshaking",e.Connected="Connected",e.WaitingForHandshake="WaitingForHandshake",e))(x||{}),E="session state has been consumed and is no longer valid",I=class{_isConsumed;close(){this._handleClose()}constructor(){return this._isConsumed=!1,new Proxy(this,{get(e,t){if("_isConsumed"===t||"id"===t||"state"===t)return Reflect.get(e,t);if("_handleStateExit"===t)return()=>{e._isConsumed=!0,e._handleStateExit()};if("_handleClose"===t)return()=>{e._isConsumed=!0,e._handleStateExit(),e._handleClose()};if(e._isConsumed)throw Error(`${E}: getting ${t.toString()} on consumed state`);return Reflect.get(e,t)},set(e,t,n){if(e._isConsumed)throw Error(`${E}: setting ${t.toString()} on consumed state`);return Reflect.set(e,t,n)}})}},M=class extends I{from;options;codec;tracer;log;constructor({from:e,options:t,log:n,tracer:r,codec:i}){super(),this.from=e,this.options=t,this.log=n,this.tracer=r,this.codec=i}},C=class extends M{id;telemetry;to;protocolVersion;seq;seqSent;ack;sendBuffer;constructor(e){let{id:t,to:n,seq:r,ack:i,sendBuffer:o,telemetry:s,log:a,protocolVersion:u,seqSent:l}=e;super(e),this.id=t,this.to=n,this.seq=r,this.ack=i,this.sendBuffer=o,this.telemetry=s,this.log=a,this.protocolVersion=u,this.seqSent=l}get loggingMetadata(){let e={clientId:this.from,connectedTo:this.to,sessionId:this.id};if(this.telemetry.span.isRecording()){let t=this.telemetry.span.spanContext();e.telemetry={traceId:t.traceId,spanId:t.spanId}}return e}constructMsg(e){let t={...e,id:(0,c.$C)(),to:this.to,from:this.from,seq:this.seq,ack:this.ack};return this.seq++,t}nextSeq(){return this.sendBuffer.length>0?this.sendBuffer[0].seq:this.seq}send(e){let t=this.constructMsg(e);return this.sendBuffer.push(t),{ok:!0,value:t.id}}_handleStateExit(){}_handleClose(){this.sendBuffer.length=0,this.telemetry.span.end()}},S=class extends C{graceExpiryTime;gracePeriodTimeout;listeners;constructor(e){super(e),this.listeners=e.listeners,this.graceExpiryTime=e.graceExpiryTime,this.gracePeriodTimeout=setTimeout(()=>{this.listeners.onSessionGracePeriodElapsed()},this.graceExpiryTime-Date.now())}_handleStateExit(){super._handleStateExit(),this.gracePeriodTimeout&&(clearTimeout(this.gracePeriodTimeout),this.gracePeriodTimeout=void 0)}_handleClose(){super._handleClose()}};function k(e,t,n){let r=t.toBuffer(n);return r.ok?e.send(r.value)?{ok:!0,value:n.id}:{ok:!1,reason:"failed to send message"}:r}var O=class extends S{state="Connecting";connPromise;listeners;connectionTimeout;constructor(e){super(e),this.connPromise=e.connPromise,this.listeners=e.listeners,this.connPromise.then(e=>{this._isConsumed||this.listeners.onConnectionEstablished(e)},e=>{this._isConsumed||this.listeners.onConnectionFailed(e)}),this.connectionTimeout=setTimeout(()=>{this.listeners.onConnectionTimeout()},this.options.connectionTimeoutMs)}bestEffortClose(){let e=this.log,t=this.loggingMetadata;this.connPromise.then(n=>{n.close(),e?.info("connection eventually resolved but session has transitioned, closed connection",{...t,...n.loggingMetadata})}).catch(()=>{})}_handleStateExit(){super._handleStateExit(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)}_handleClose(){super._handleClose(),this.bestEffortClose()}},T=class extends S{state="NoConnection";_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit()}},_=class extends M{state="WaitingForHandshake";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.setDataListener(this.onHandshakeData),this.conn.setErrorListener(this.listeners.onConnectionErrored),this.conn.setCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{clientId:this.from,connId:this.conn.id,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.codec.fromBuffer(e);if(!t.ok)return void this.listeners.onInvalidHandshake(`could not parse handshake message: ${t.reason}`,"MALFORMED_HANDSHAKE");this.listeners.onHandshake(t.value)};sendHandshake(e){return k(this.conn,this.codec,e)}_handleStateExit(){this.conn.removeDataListener(),this.conn.removeErrorListener(),this.conn.removeCloseListener(),clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0}_handleClose(){this.conn.close()}},A=class extends S{state="Handshaking";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.setDataListener(this.onHandshakeData),this.conn.setErrorListener(this.listeners.onConnectionErrored),this.conn.setCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.codec.fromBuffer(e);if(!t.ok)return void this.listeners.onInvalidHandshake(`could not parse handshake message: ${t.reason}`,"MALFORMED_HANDSHAKE");this.listeners.onHandshake(t.value)};sendHandshake(e){return k(this.conn,this.codec,e)}_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(),this.conn.removeErrorListener(),this.conn.removeCloseListener(),this.handshakeTimeout&&(clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},U=class extends C{state="Connected";conn;listeners;heartbeatHandle;heartbeatMissTimeout;isActivelyHeartbeating=!1;updateBookkeeping(e,t){this.sendBuffer=this.sendBuffer.filter(t=>t.seq>=e),this.ack=t+1,this.heartbeatMissTimeout&&clearTimeout(this.heartbeatMissTimeout),this.startMissingHeartbeatTimeout()}assertSendOrdering(e){if(e.seq>this.seqSent+1){let t=`invariant violation: would have sent out of order msg (seq: ${e.seq}, expected: ${this.seqSent} + 1)`;throw this.log?.error(t,{...this.loggingMetadata,transportMessage:e,tags:["invariant-violation"]}),Error(t)}}send(e){let t=this.constructMsg(e);this.assertSendOrdering(t),this.sendBuffer.push(t);let n=k(this.conn,this.codec,t);return n.ok?this.seqSent=t.seq:this.listeners.onMessageSendFailure(t,n.reason),n}constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.conn.setDataListener(this.onMessageData),this.conn.setCloseListener(this.listeners.onConnectionClosed),this.conn.setErrorListener(this.listeners.onConnectionErrored)}sendBufferedMessages(){if(this.sendBuffer.length>0)for(let e of(this.log?.info(`sending ${this.sendBuffer.length} buffered messages, starting at seq ${this.nextSeq()}`,this.loggingMetadata),this.sendBuffer)){this.assertSendOrdering(e);let t=k(this.conn,this.codec,e);if(!t.ok)return this.listeners.onMessageSendFailure(e,t.reason),t;this.seqSent=e.seq}return{ok:!0,value:void 0}}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}startMissingHeartbeatTimeout(){let e=this.options.heartbeatsUntilDead,t=e*this.options.heartbeatIntervalMs;this.heartbeatMissTimeout=setTimeout(()=>{this.log?.info(`closing connection to ${this.to} due to inactivity (missed ${e} heartbeats which is ${t}ms)`,this.loggingMetadata),this.telemetry.span.addEvent("closing connection due to missing heartbeat"),this.conn.close()},t)}startActiveHeartbeat(){this.isActivelyHeartbeating=!0,this.heartbeatHandle=setInterval(()=>{this.sendHeartbeat()},this.options.heartbeatIntervalMs)}sendHeartbeat(){this.log?.debug("sending heartbeat",this.loggingMetadata),this.send({streamId:"heartbeat",controlFlags:1,payload:{type:"ACK"}})}onMessageData=e=>{let t=this.codec.fromBuffer(e);if(!t.ok)return void this.listeners.onInvalidMessage(`could not parse message: ${t.reason}`);let n=t.value;if(n.seq!==this.ack){if(n.seq<this.ack)this.log?.debug(`received duplicate msg (got seq: ${n.seq}, wanted seq: ${this.ack}), discarding`,{...this.loggingMetadata,transportMessage:n});else{let e=`received out-of-order msg, closing connection (got seq: ${n.seq}, wanted seq: ${this.ack})`;this.log?.error(e,{...this.loggingMetadata,transportMessage:n,tags:["invariant-violation"]}),this.telemetry.span.setStatus({code:r.ERROR,message:e}),this.conn.close()}return}if(this.log?.debug("received msg",{...this.loggingMetadata,transportMessage:n}),this.updateBookkeeping(n.ack,n.seq),!(0,c.o0)(n.controlFlags))return void this.listeners.onMessage(n);this.log?.debug("discarding msg (ack bit set)",{...this.loggingMetadata,transportMessage:n}),this.isActivelyHeartbeating||this.sendHeartbeat()};_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(),this.conn.removeCloseListener(),this.conn.removeErrorListener(),this.heartbeatHandle&&(clearInterval(this.heartbeatHandle),this.heartbeatHandle=void 0),this.heartbeatMissTimeout&&(clearTimeout(this.heartbeatMissTimeout),this.heartbeatMissTimeout=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},B=class extends S{state="BackingOff";listeners;backoffTimeout;constructor(e){super(e),this.listeners=e.listeners,this.backoffTimeout=setTimeout(()=>{this.listeners.onBackoffFinished()},e.backoffMs)}_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit(),this.backoffTimeout&&(clearTimeout(this.backoffTimeout),this.backoffTimeout=void 0)}},L={toBuffer:e=>(0,d.l)(e,{ignoreUndefined:!0}),fromBuffer:e=>{let t=(0,h.D4)(e);if("object"!=typeof t||null===t)throw Error("unpacked msg is not an object");return t}},R=class{constructor(e){this.codec=e}toBuffer(e){try{return{ok:!0,value:this.codec.toBuffer(e)}}catch(e){return{ok:!1,reason:(0,c.xH)(e)}}}fromBuffer(e){try{let t=this.codec.fromBuffer(e);if(!f.J(c.bH,t))return{ok:!1,reason:"transport message schema mismatch"};return{ok:!0,value:t}}catch(e){return{ok:!1,reason:(0,c.xH)(e)}}}};function D(e){return{id:e.id,from:e.from,to:e.to,seq:e.seq,ack:e.ack,seqSent:e.seqSent,sendBuffer:e.sendBuffer,telemetry:e.telemetry,options:e.options,log:e.log,tracer:e.tracer,protocolVersion:e.protocolVersion,codec:e.codec}}function P(e){return{...D(e),graceExpiryTime:e.graceExpiryTime}}var $={entrypoints:{NoConnection:(e,t,n,r,i,o,s)=>{let a=`session-${(0,c.$C)()}`,u=(0,c.iH)(o,a,e,t),l=new T({listeners:n,id:a,from:t,to:e,seq:0,ack:0,seqSent:0,graceExpiryTime:Date.now()+r.sessionDisconnectGraceMs,sendBuffer:[],telemetry:u,options:r,protocolVersion:i,tracer:o,log:s,codec:new R(r.codec)});return l.log?.info(`session ${l.id} created in NoConnection state`,{...l.loggingMetadata,tags:["state-transition"]}),l},WaitingForHandshake:(e,t,n,r,i,o)=>{let s=new _({conn:t,listeners:n,from:e,options:r,tracer:i,log:o,codec:new R(r.codec)});return s.log?.info("session created in WaitingForHandshake state",{...s.loggingMetadata,tags:["state-transition"]}),s}},transition:{NoConnectionToBackingOff:(e,t,n)=>{let r=P(e);e._handleStateExit();let i=new B({backoffMs:t,listeners:n,...r});return i.log?.info(`session ${i.id} transition from NoConnection to BackingOff`,{...i.loggingMetadata,tags:["state-transition"]}),i},BackingOffToConnecting:(e,t,n)=>{let r=P(e);e._handleStateExit();let i=new O({connPromise:t,listeners:n,...r});return i.log?.info(`session ${i.id} transition from BackingOff to Connecting`,{...i.loggingMetadata,tags:["state-transition"]}),i},ConnectingToHandshaking:(e,t,n)=>{let r=P(e);e._handleStateExit();let i=new A({conn:t,listeners:n,...r});return t.telemetry=(0,c._I)(i.tracer,t,i.telemetry),i.log?.info(`session ${i.id} transition from Connecting to Handshaking`,{...i.loggingMetadata,tags:["state-transition"]}),i},HandshakingToConnected:(e,t)=>{let n=D(e),r=e.conn;e._handleStateExit();let i=new U({conn:r,listeners:t,...n});return i.startMissingHeartbeatTimeout(),i.log?.info(`session ${i.id} transition from Handshaking to Connected`,{...i.loggingMetadata,tags:["state-transition"]}),i},WaitingForHandshakeToConnected:(e,t,n,r,i,o,s)=>{let a=e.conn,{from:u,options:l}=e,d=t?D(t):{id:n,from:u,to:r,seq:0,ack:0,seqSent:0,sendBuffer:[],telemetry:(0,c.iH)(e.tracer,n,r,u,i),options:l,tracer:e.tracer,log:e.log,protocolVersion:s,codec:new R(l.codec)};e._handleStateExit(),t?._handleStateExit();let h=new U({conn:a,listeners:o,...d});return h.startMissingHeartbeatTimeout(),a.telemetry=(0,c._I)(h.tracer,a,h.telemetry),h.log?.info(`session ${h.id} transition from WaitingForHandshake to Connected`,{...h.loggingMetadata,tags:["state-transition"]}),h},BackingOffToNoConnection:(e,t)=>{let n=P(e);e._handleStateExit();let r=new T({listeners:t,...n});return r.log?.info(`session ${r.id} transition from BackingOff to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectingToNoConnection:(e,t)=>{let n=P(e);e.bestEffortClose(),e._handleStateExit();let r=new T({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Connecting to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},HandshakingToNoConnection:(e,t)=>{let n=P(e);e.conn.close(),e._handleStateExit();let r=new T({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Handshaking to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectedToNoConnection:(e,t)=>{let n=D(e),r=Date.now()+e.options.sessionDisconnectGraceMs;e.conn.close(),e._handleStateExit();let i=new T({listeners:t,graceExpiryTime:r,...n});return i.log?.info(`session ${i.id} transition from Connected to NoConnection`,{...i.loggingMetadata,tags:["state-transition"]}),i}}},j=$.transition,N={entrypoint:$.entrypoints.NoConnection,transition:{NoConnectionToBackingOff:j.NoConnectionToBackingOff,BackingOffToConnecting:j.BackingOffToConnecting,ConnectingToHandshaking:j.ConnectingToHandshaking,HandshakingToConnected:j.HandshakingToConnected,BackingOffToNoConnection:j.BackingOffToNoConnection,ConnectingToNoConnection:j.ConnectingToNoConnection,HandshakingToNoConnection:j.HandshakingToNoConnection,ConnectedToNoConnection:j.ConnectedToNoConnection}},H=($.entrypoints.WaitingForHandshake,j.WaitingForHandshakeToConnected,j.ConnectedToNoConnection,class{status;clientId;eventDispatcher;options;log;tracer;sessions;constructor(e,t){this.options={...b,...t},this.eventDispatcher=new m,this.clientId=e,this.status="open",this.sessions=new Map,this.tracer=(0,c.EK)()}bindLogger(e,t){if("function"==typeof e){this.log=l(new u(e,t));return}this.log=l(e)}handleMsg(e){"open"===this.getStatus()&&this.eventDispatcher.dispatchEvent("message",e)}addEventListener(e,t){this.eventDispatcher.addEventListener(e,t)}removeEventListener(e,t){this.eventDispatcher.removeEventListener(e,t)}protocolError(e){this.eventDispatcher.dispatchEvent("protocolError",e)}close(){for(let e of(this.status="closed",Array.from(this.sessions.values())))this.deleteSession(e);this.eventDispatcher.dispatchEvent("transportStatus",{status:this.status}),this.eventDispatcher.removeAllListeners(),this.log?.info("manually closed transport",{clientId:this.clientId})}getStatus(){return this.status}createSession(e){let t=this.sessions.get(e.to);if(t){let n=`attempt to create session for ${e.to} but active session (${t.id}) already exists`;throw this.log?.error(n,{...e.loggingMetadata,tags:["invariant-violation"]}),Error(n)}this.sessions.set(e.to,e),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"created",session:e}),this.eventDispatcher.dispatchEvent("sessionTransition",{state:e.state,id:e.id})}updateSession(e){let t=this.sessions.get(e.to);if(!t){let t=`attempt to transition session for ${e.to} but no active session exists`;throw this.log?.error(t,{...e.loggingMetadata,tags:["invariant-violation"]}),Error(t)}if(t.id!==e.id){let n=`attempt to transition active session for ${e.to} but active session (${t.id}) is different from handle (${e.id})`;throw this.log?.error(n,{...e.loggingMetadata,tags:["invariant-violation"]}),Error(n)}this.sessions.set(e.to,e),this.eventDispatcher.dispatchEvent("sessionTransition",{state:e.state,id:e.id})}deleteSession(e,t){if(e._isConsumed)return;let n=e.loggingMetadata;n.tags&&t?.unhealthy&&n.tags.push("unhealthy-session"),e.log?.info(`closing session ${e.id}`,n),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"closing",session:e});let r=e.to;e.close(),this.sessions.delete(r),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"closed",session:{id:e.id,to:r}})}onSessionGracePeriodElapsed(e){this.log?.info(`session to ${e.to} grace period elapsed, closing`,e.loggingMetadata),this.deleteSession(e)}onConnectingFailed(e){let t=$.transition.ConnectingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}});return this.updateSession(t),t}onConnClosed(e){let t;return t="Handshaking"===e.state?$.transition.HandshakingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}):$.transition.ConnectedToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}),this.updateSession(t),t}getSessionBoundSendFn(e,t){if("open"!==this.getStatus())throw Error("cannot get a bound send function on a closed transport");return n=>{let r=this.sessions.get(e);if(!r)throw Error(`session scope for ${t} has ended (close), can't send`);if(r.id!==t||r._isConsumed)throw Error(`session scope for ${t} has ended (transition), can't send`);let i=r.send(n);if(!i.ok)throw Error(i.reason);return i.value}}}),F=class{budgetConsumed;intervalHandle;options;constructor(e){this.options=e,this.budgetConsumed=0}getBackoffMs(){if(0===this.getBudgetConsumed())return 0;let e=Math.max(0,this.getBudgetConsumed()-1),t=Math.floor(Math.random()*this.options.maxJitterMs);return Math.min(this.options.baseIntervalMs*2**e,this.options.maxBackoffMs)+t}get totalBudgetRestoreTime(){return this.options.budgetRestoreIntervalMs*this.options.attemptBudgetCapacity}consumeBudget(){this.stopLeak(),this.budgetConsumed=this.getBudgetConsumed()+1}getBudgetConsumed(){return this.budgetConsumed}hasBudget(){return this.getBudgetConsumed()<this.options.attemptBudgetCapacity}startRestoringBudget(){if(this.intervalHandle)return;let e=()=>{let e=this.budgetConsumed;if(!e)return void this.stopLeak();let t=e-1;0!==t&&(this.budgetConsumed=t)};this.intervalHandle=setInterval(e,this.options.budgetRestoreIntervalMs)}stopLeak(){this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=void 0)}close(){this.stopLeak()}},q=class extends H{options;retryBudget;reconnectOnConnectionDrop=!0;handshakeExtensions;sessions;constructor(e,t){super(e,t),this.sessions=new Map,this.options={...w,...t},this.retryBudget=new F(this.options)}extendHandshake(e){this.handshakeExtensions=e}tryReconnecting(e){let t=this.sessions.get(e);!this.options.enableTransparentSessionReconnects&&t&&this.deleteSession(t),this.reconnectOnConnectionDrop&&"open"===this.getStatus()&&this.connect(e)}createUnconnectedSession(e){let t=N.entrypoint(e,this.clientId,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}},this.options,c.mH,this.tracer,this.log);return this.createSession(t),t}onConnectingFailed(e){let t=super.onConnectingFailed(e);return this.tryReconnecting(t.to),t}onConnClosed(e){let t=super.onConnClosed(e);return this.tryReconnecting(t.to),t}onConnectionEstablished(e,t){let n=N.transition.ConnectingToHandshaking(e,t,{onConnectionErrored:e=>{let t=(0,c.xH)(e);this.log?.error(`connection to ${n.to} errored during handshake: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.warn(`connection to ${n.to} closed during handshake`,n.loggingMetadata),this.onConnClosed(n)},onHandshake:e=>{this.onHandshakeResponse(n,e)},onInvalidHandshake:(t,r)=>{this.log?.error(`invalid handshake: ${t}`,n.loggingMetadata),this.deleteSession(e,{unhealthy:!0}),this.protocolError({type:g.HandshakeFailed,code:r,message:t})},onHandshakeTimeout:()=>{this.log?.error(`connection to ${n.to} timed out during handshake`,n.loggingMetadata),this.onConnClosed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});return this.updateSession(n),this.sendHandshake(n),n}rejectHandshakeResponse(e,t,n){e.conn.telemetry?.span.setStatus({code:r.ERROR,message:t}),this.log?.warn(t,n),this.deleteSession(e,{unhealthy:!0})}onHandshakeResponse(e,t){if(!f.J(c.O9,t.payload))return void this.rejectHandshakeResponse(e,"received invalid handshake response",{...e.loggingMetadata,transportMessage:t,validationErrors:[...p.I(c.O9,t.payload)]});if(!t.payload.status.ok){let n=f.J(c.Bi,t.payload.status.code),r=`handshake failed: ${t.payload.status.reason}`,i=e.to;this.rejectHandshakeResponse(e,r,{...e.loggingMetadata,transportMessage:t}),n?this.tryReconnecting(i):this.protocolError({type:g.HandshakeFailed,code:t.payload.status.code,message:r});return}if(t.payload.status.sessionId!==e.id){let n=`session id mismatch: expected ${e.id}, got ${t.payload.status.sessionId}`;this.rejectHandshakeResponse(e,n,{...e.loggingMetadata,transportMessage:t});return}this.log?.info(`handshake from ${t.from} ok`,{...e.loggingMetadata,transportMessage:t});let n=N.transition.HandshakingToConnected(e,{onConnectionErrored:e=>{let t=(0,c.xH)(e);this.log?.warn(`connection to ${n.to} errored: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.info(`connection to ${n.to} closed`,n.loggingMetadata),this.onConnClosed(n)},onMessage:e=>{this.handleMsg(e)},onInvalidMessage:e=>{this.log?.error(`invalid message: ${e}`,{...n.loggingMetadata,transportMessage:t}),this.protocolError({type:g.InvalidMessage,message:e}),this.deleteSession(n,{unhealthy:!0})},onMessageSendFailure:(e,t)=>{this.log?.error(`failed to send message: ${t}`,{...n.loggingMetadata,transportMessage:e}),this.protocolError({type:g.MessageSendFailure,message:t}),this.deleteSession(n,{unhealthy:!0})}});n.sendBufferedMessages().ok&&(this.updateSession(n),this.retryBudget.startRestoringBudget())}connect(e){if("open"!==this.getStatus())return void this.log?.info(`transport state is no longer open, cancelling attempt to connect to ${e}`);let t=this.sessions.get(e)??this.createUnconnectedSession(e);if("NoConnection"!==t.state)return void this.log?.debug(`session to ${e} has state ${t.state}, skipping connect attempt`,t.loggingMetadata);if(!this.retryBudget.hasBudget()){let n=this.retryBudget.getBudgetConsumed(),r=`tried to connect to ${e} but retry budget exceeded (more than ${n} attempts in the last ${this.retryBudget.totalBudgetRestoreTime}ms)`;this.log?.error(r,t.loggingMetadata),this.protocolError({type:g.RetriesExceeded,message:r});return}let n=this.retryBudget.getBackoffMs();this.log?.info(`attempting connection to ${e} (${n}ms backoff)`,t.loggingMetadata),this.retryBudget.consumeBudget();let r=N.transition.NoConnectionToBackingOff(t,n,{onBackoffFinished:()=>{this.onBackoffFinished(r)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(r)}});this.updateSession(r)}hardDisconnect(){for(let e of Array.from(this.sessions.values()))this.deleteSession(e)}onBackoffFinished(e){let t=e.tracer.startActiveSpan("connect",async t=>{try{return await this.createNewOutgoingConnection(e.to)}catch(n){let e=(0,c.xH)(n);throw t.recordException(e),t.setStatus({code:r.ERROR}),n}finally{t.end()}}),n=N.transition.BackingOffToConnecting(e,t,{onConnectionEstablished:e=>{this.log?.debug(`connection to ${n.to} established`,{...e.loggingMetadata,...n.loggingMetadata}),this.onConnectionEstablished(n,e)},onConnectionFailed:e=>{let t=(0,c.xH)(e);this.log?.error(`error connecting to ${n.to}: ${t}`,n.loggingMetadata),this.onConnectingFailed(n)},onConnectionTimeout:()=>{this.log?.error(`connection to ${n.to} timed out`,n.loggingMetadata),this.onConnectingFailed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});this.updateSession(n)}async sendHandshake(e){let t;if(this.handshakeExtensions&&(t=await this.handshakeExtensions.construct()),e._isConsumed)return;let n=(0,c.sE)({from:this.clientId,to:e.to,sessionId:e.id,expectedSessionState:{nextExpectedSeq:e.ack,nextSentSeq:e.nextSeq()},metadata:t,tracing:(0,c.oG)(e.telemetry.ctx)});this.log?.debug(`sending handshake request to ${e.to}`,{...e.loggingMetadata,transportMessage:n});let r=e.sendHandshake(n);r.ok||(this.log?.error(`failed to send handshake request: ${r.reason}`,{...e.loggingMetadata,transportMessage:n}),this.protocolError({type:g.MessageSendFailure,message:r.reason}),this.deleteSession(e,{unhealthy:!0}))}close(){this.retryBudget.close(),super.close()}},V=class{id;telemetry;constructor(){this.id=`conn-${(0,c.$C)()}`}get loggingMetadata(){let e={connId:this.id};if(this.telemetry?.span.isRecording()){let t=this.telemetry.span.spanContext();e.telemetry={traceId:t.traceId,spanId:t.spanId}}return e}dataListener;closeListener;errorListener;onData(e){this.dataListener?.(e)}onError(e){this.errorListener?.(e)}onClose(){this.closeListener?.(),this.telemetry?.span.end()}setDataListener(e){this.dataListener=e}removeDataListener(){this.dataListener=void 0}setCloseListener(e){this.closeListener=e}removeCloseListener(){this.closeListener=void 0}setErrorListener(e){this.errorListener=e}removeErrorListener(){this.errorListener=void 0}}},68230:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37743),i=n(48122),o=n(17844),s=n(93629);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});var a=n(51532)._(n(21462)),u=n(60296),l=[],c=[],d=!1;function h(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}var f=function(){function e(t,n){r._(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i._(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"==typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout(function(){e._update({pastDelay:!0})},n.delay)),"number"==typeof n.timeout&&(this._timeout=setTimeout(function(){e._update({timedOut:!0})},n.timeout))),this._res.promise.then(function(){e._update({}),e._clearTimeouts()}).catch(function(t){e._update({}),e._clearTimeouts()}),this._update({})}},{key:"_update",value:function(e){this._state=o._(s._(o._({},this._state),{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading}),e),this._callbacks.forEach(function(e){return e()})}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function p(e){return function(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function i(){if(!r){var t=new f(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!d){var o=n.webpack&&1?n.webpack():n.modules;o&&c.push(function(e){var t=!0,n=!1,r=void 0;try{for(var s,a=o[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var u=s.value;if(e.includes(u))return i()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}})}function s(e,t){i(),(o=a.default.useContext(u.LoadableContext))&&Array.isArray(n.modules)&&n.modules.forEach(function(e){o(e)});var o,s=a.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return a.default.useImperativeHandle(t,function(){return{retry:r.retry}},[]),a.default.useMemo(function(){var t;return s.loading||s.error?a.default.createElement(n.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:r.retry}):s.loaded?a.default.createElement((t=s.loaded)&&t.default?t.default:t,e):null},[e,s])}return s.preload=function(){return i()},s.displayName="LoadableComponent",a.default.forwardRef(s)}(h,e)}function g(e,t){for(var n=[];e.length;){var r=e.pop();n.push(r(t))}return Promise.all(n).then(function(){if(e.length)return g(e,t)})}p.preloadAll=function(){return new Promise(function(e,t){g(l).then(e,t)})},p.preloadReady=function(e){return void 0===e&&(e=[]),new Promise(function(t){var n=function(){return d=!0,t()};g(c,e).then(n,n)})},window.__NEXT_PRELOADREADY=p.preloadReady;var m=p},69737:(e,t,n)=>{"use strict";n.d(t,{Iz:()=>a,KU:()=>h,Rq:()=>y,Ut:()=>o,mg:()=>c,tG:()=>p,t_:()=>d,tx:()=>s});var r=n(76957),i=n(95570);let o=Symbol("RESET");function s(e){let t=(0,r.eU)(e,(n,r,i)=>{let s="function"==typeof i?i(n(t)):i;r(t,s===o?e:s)});return t}function a(e,t){let n=null,r=new Map,i=new Set,o=i=>{let a;if(void 0===t)a=r.get(i);else for(let[e,n]of r)if(t(e,i)){a=n;break}if(void 0!==a)if(null==n||!n(a[1],i))return a[0];else o.remove(i);let u=e(i);return r.set(i,[u,Date.now()]),s("CREATE",i,u),u};function s(e,t,n){for(let r of i)r({type:e,param:t,atom:n})}return o.unstable_listen=e=>(i.add(e),()=>{i.delete(e)}),o.getParams=()=>r.keys(),o.remove=e=>{if(void 0===t){if(!r.has(e))return;let[t]=r.get(e);r.delete(e),s("REMOVE",e,t)}else for(let[n,[i]]of r)if(t(n,e)){r.delete(n),s("REMOVE",n,i);break}},o.setShouldRemove=e=>{if(n=e)for(let[e,[t,i]]of r)n(i,e)&&(r.delete(e),s("REMOVE",e,t))},o}let u=(e,t,n)=>(t.has(n)?t:t.set(n,e())).get(n),l=new WeakMap;function c(e,t,n=Object.is){let i=u(()=>new WeakMap,l,e),o=u(()=>new WeakMap,i,t);return u(()=>{let i=Symbol(),o=(0,r.eU)(r=>{let s=r(o);return(([e,r])=>{if(r===i)return t(e);let o=t(e,r);return n(r,o)?r:o})([r(e),s])});return o.init=i,o},o,n)}function d(e){let t=Symbol(),n=(0,r.eU)(t);n.debugPrivate=!0;let i=(0,r.eU)((r,i)=>{let o=r(n);return o!==t?o:e(r,i)},(e,r,s)=>{r(n,s===o?t:"function"==typeof s?s(e(i)):s)});return i}function h(e=()=>{try{return window.localStorage}catch(e){"undefined"!=typeof window&&i.warn(e);return}},t){var n;let r,o,s,a,u={getItem:(n,i)=>{var s,a;let u=e=>{if(r!==(e=e||"")){try{o=JSON.parse(e,null==t?void 0:t.reviver)}catch(e){return i}r=e}return o},l=null!=(a=null==(s=e())?void 0:s.getItem(n))?a:null;return"function"==typeof(null==l?void 0:l.then)?l.then(u):u(l)},setItem:(n,r)=>{var i;return null==(i=e())?void 0:i.setItem(n,JSON.stringify(r,null==t?void 0:t.replacer))},removeItem:t=>{var n;return null==(n=e())?void 0:n.removeItem(t)}};try{s=null==(n=e())?void 0:n.subscribe}catch(e){}return!s&&"undefined"!=typeof window&&"function"==typeof window.addEventListener&&window.Storage&&(s=(t,n)=>{if(!(e()instanceof window.Storage))return()=>{};let r=r=>{r.storageArea===e()&&r.key===t&&n(r.newValue)};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}}),s&&(a=s,u.subscribe=(e,t,n)=>a(e,e=>{let r;try{r=JSON.parse(e||"")}catch(e){r=n}t(r)})),u}let f=h();function p(e,t,n=f,i){let s=null==i?void 0:i.getOnInit,a=(0,r.eU)(s?n.getItem(e,t):t);return a.debugPrivate=!0,a.onMount=r=>{let i;return r(n.getItem(e,t)),n.subscribe&&(i=n.subscribe(e,r,t)),i},(0,r.eU)(e=>e(a),(r,i,s)=>{let u="function"==typeof s?s(r(a)):s;return u===o?(i(a,t),n.removeItem(e)):u instanceof Promise?u.then(t=>(i(a,t),n.setItem(e,t))):(i(a,u),n.setItem(e,u))})}let g=new WeakMap,m={state:"loading"};function y(e){let t;return t=()=>{let t=new WeakMap,n=(0,r.eU)(0);n.debugPrivate=!0;let i=(0,r.eU)((r,{setSelf:i})=>{let o;r(n);try{o=r(e)}catch(e){return{state:"hasError",error:e}}if(!(o instanceof Promise))return{state:"hasData",data:o};let s=o,a=t.get(s);return a?a:(s.then(e=>{t.set(s,{state:"hasData",data:e}),i()},e=>{t.set(s,{state:"hasError",error:e}),i()}),t.get(s)||(t.set(s,m),m))},(e,t)=>{t(n,e=>e+1)});return i.debugPrivate=!0,(0,r.eU)(e=>e(i))},(g.has(e)?g:g.set(e,t())).get(e)}},69918:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(90663),i=n(37513);function o(e,t){(0,i.A)(2,arguments);var n=(0,r.A)(e),o=(0,r.A)(t),s=n.getTime()-o.getTime();return s<0?-1:s>0?1:s}},72182:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e*=1))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},72723:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var r=n(21462);function i(e){var t=e(),n=(0,r.useState)(t)[1];return(0,r.useEffect)(function(){var r=e();if(t===r)return e.onNextChange(n);n(r)},[t]),t}},75599:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(94598),i=n(25883),o={toBuffer:e=>(0,r.l)(e,{ignoreUndefined:!0}),fromBuffer:e=>{try{let t=(0,i.D4)(e);if("object"!=typeof t)return null;return t}catch{return null}}}},77269:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=n(67323),i=class extends r.Ng{ws;extras;get loggingMetadata(){let e=super.loggingMetadata;return this.extras&&(e.extras=this.extras),e}constructor(e,t){super(),this.ws=e,this.extras=t,this.ws.binaryType="arraybuffer";let n=!1;this.ws.onerror=()=>{n=!0},this.ws.onclose=({code:e,reason:t})=>{if(n){let n=Error(`websocket closed with code and reason: ${e} - ${t}`);this.onError(n)}this.onClose()},this.ws.onmessage=e=>{this.onData(e.data)}}send(e){try{return this.ws.send(e),!0}catch{return!1}}close(){this.ws.close(1e3)}},o=class extends r.xp{wsGetter;constructor(e,t,n){super(t,n),this.wsGetter=e}async createNewOutgoingConnection(e){this.log?.info(`establishing a new websocket to ${e}`,{clientId:this.clientId,connectedTo:e});let t=await this.wsGetter(e);await new Promise((e,n)=>t.readyState===t.OPEN?void e():t.readyState===t.CLOSING||t.readyState===t.CLOSED?void n(Error("ws is closing or closed")):void(t.onopen=()=>{e()},t.onclose=e=>{n(Error(e.reason))},t.onerror=e=>{n(Error(e.message))}));let n=new i(t);return this.log?.info(`raw websocket to ${e} ok`,{clientId:this.clientId,connectedTo:e,...n.loggingMetadata}),n}}},82568:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,{Bp:()=>eh,WM:()=>er});var o=n(50084),s=n.n(o),a=n(21462);n(15860);let u=e=>"object"==typeof e&&null!=e&&1===e.nodeType,l=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,c=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let n=getComputedStyle(e,null);return l(n.overflowY,t)||l(n.overflowX,t)||(e=>{let t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},d=(e,t,n,r,i,o,s,a)=>o<e&&s>t||o>e&&s<t?0:o<=e&&a<=n||s>=t&&a>=n?o-e-r:s>t&&a<n||o<e&&a>n?s-t+i:0,h=e=>{let t=e.parentElement;return null==t?e.getRootNode().host||null:t};var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;var p=n(95570);function g(){}function m(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function y(e,t){var n;function r(){n&&clearTimeout(n)}function i(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];r(),n=setTimeout(function(){n=null,e.apply(void 0,o)},t)}return i.cancel=r,i}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some(function(t){return t&&t.apply(void 0,[e].concat(r)),e.preventDownshiftDefault||e.hasOwnProperty("nativeEvent")&&e.nativeEvent.preventDownshiftDefault})}}function b(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach(function(t){"function"==typeof t?t(e):t&&(t.current=e)})}}function w(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=void 0!==t[r]?t[r]:e[r],n},{})}function x(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function E(e,t,n,r,i){void 0===i&&(i=!1);var o=n.length;if(0===o)return -1;var s=o-1;("number"!=typeof e||e<0||e>s)&&(e=t>0?-1:s+1);var a=e+t;a<0?a=i?s:0:a>s&&(a=i?0:s);var u=I(a,t<0,n,r,i);return -1===u?e>=o?-1:e:u}function I(e,t,n,r,i){void 0===i&&(i=!1);var o=n.length;if(t){for(var s=e;s>=0;s--)if(!r(n[s],s))return s}else for(var a=e;a<o;a++)if(!r(n[a],a))return a;return i?I(t?o-1:0,t,n,r):-1}function M(e,t,n,r){return void 0===r&&(r=!0),n&&t.some(function(t){return t&&(m(t,e,n)||r&&m(t,n.document.activeElement,n))})}var C=y(function(e){S(e).textContent=""},500);function S(e){var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t)),t}function k(e,t){e&&t&&(S(t).textContent=e,C(t))}var O=["isInitialMount","highlightedIndex","items","environment"],T={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""},_=y(function(e,t){k(e(),t)},200),A="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?a.useLayoutEffect:a.useEffect,U=function(e){var t=e.id,n=e.labelId,r=e.menuId,i=e.getItemId,o=e.toggleButtonId,s=e.inputId,u="downshift-"+a.useId();return t||(t=u),(0,a.useRef)({labelId:n||t+"-label",menuId:r||t+"-menu",getItemId:i||function(e){return t+"-item-"+e},toggleButtonId:o||t+"-toggle-button",inputId:s||t+"-input"}).current};function B(e,t,n,r){var i,o;if(void 0===e){if(void 0===t)throw Error(r);i=n[t],o=t}else o=void 0===t?n.indexOf(e):t,i=e;return[i,o]}function L(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function R(e){var t=(0,a.useRef)(e);return t.current=e,t}function D(e,t,n){var r=(0,a.useRef)(),o=(0,a.useRef)(),s=(0,a.useCallback)(function(t,n){o.current=n;var r=e(t=w(t,n.props),n);return n.props.stateReducer(t,i({},n,{changes:r}))},[e]),u=(0,a.useReducer)(s,t,n),l=u[0],c=u[1],d=R(t),h=(0,a.useCallback)(function(e){return c(i({props:d.current},e))},[d]),f=o.current;return(0,a.useEffect)(function(){var e,t,n,o;f&&r.current&&r.current!==l&&(e=w(r.current,f.props),t=f.props,n=f.type,o={},Object.keys(e).forEach(function(t){var n,r,s,a,u,c,d;n=t,r=f,s=e,a=l,u=r.props,c=r.type,u[d="on"+L(n)+"Change"]&&void 0!==a[n]&&a[n]!==s[n]&&u[d](i({type:c},a)),l[t]!==e[t]&&(o[t]=l[t])}),t.onStateChange&&Object.keys(o).length&&t.onStateChange(i({type:n},o))),r.current=l},[l,t,f]),[l,h]}function P(e,t,n){var r=D(e,t,n),i=r[0],o=r[1];return[w(i,t),o]}var $={itemToString:function(e){return e?String(e):""},stateReducer:function(e,t){return t.changes},getA11ySelectionMessage:function(e){var t=e.selectedItem,n=e.itemToString;return t?n(t)+" has been selected.":""},scrollIntoView:function(e,t){e&&((e,t)=>{var n,r,i,o;if("undefined"==typeof document)return[];let{scrollMode:s,block:a,inline:l,boundary:f,skipOverflowHiddenElements:p}=t,g="function"==typeof f?f:e=>e!==f;if(!u(e))throw TypeError("Invalid target");let m=document.scrollingElement||document.documentElement,y=[],v=e;for(;u(v)&&g(v);){if((v=h(v))===m){y.push(v);break}null!=v&&v===document.body&&c(v)&&!c(document.documentElement)||null!=v&&c(v,p)&&y.push(v)}let b=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,w=null!=(o=null==(i=window.visualViewport)?void 0:i.height)?o:innerHeight,{scrollX:x,scrollY:E}=window,{height:I,width:M,top:C,right:S,bottom:k,left:O}=e.getBoundingClientRect(),{top:T,right:_,bottom:A,left:U}=(e=>{let t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e),B="start"===a||"nearest"===a?C-T:"end"===a?k+A:C+I/2-T+A,L="center"===l?O+M/2-U+_:"end"===l?S+_:O-U,R=[];for(let e=0;e<y.length;e++){let t=y[e],{height:n,width:r,top:i,right:o,bottom:u,left:c}=t.getBoundingClientRect();if("if-needed"===s&&C>=0&&O>=0&&k<=w&&S<=b&&C>=i&&k<=u&&O>=c&&S<=o)break;let h=getComputedStyle(t),f=parseInt(h.borderLeftWidth,10),p=parseInt(h.borderTopWidth,10),g=parseInt(h.borderRightWidth,10),v=parseInt(h.borderBottomWidth,10),T=0,_=0,A="offsetWidth"in t?t.offsetWidth-t.clientWidth-f-g:0,U="offsetHeight"in t?t.offsetHeight-t.clientHeight-p-v:0,D="offsetWidth"in t?0===t.offsetWidth?0:r/t.offsetWidth:0,P="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(m===t)T="start"===a?B:"end"===a?B-w:"nearest"===a?d(E,E+w,w,p,v,E+B,E+B+I,I):B-w/2,_="start"===l?L:"center"===l?L-b/2:"end"===l?L-b:d(x,x+b,b,f,g,x+L,x+L+M,M),T=Math.max(0,T+E),_=Math.max(0,_+x);else{T="start"===a?B-i-p:"end"===a?B-u+v+U:"nearest"===a?d(i,u,n,p,v+U,B,B+I,I):B-(i+n/2)+U/2,_="start"===l?L-c-f:"center"===l?L-(c+r/2)+A/2:"end"===l?L-o+g+A:d(c,o,r,f,g+A,L,L+M,M);let{scrollLeft:e,scrollTop:s}=t;T=0===P?0:Math.max(0,Math.min(s+T/P,t.scrollHeight-n/P+U)),_=0===D?0:Math.max(0,Math.min(e+_/D,t.scrollWidth-r/D+A)),B+=s-T,L+=e-_}R.push({el:t,top:T,left:_})}return R})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(function(e){var t=e.el,n=e.top,r=e.left;t.scrollTop=n,t.scrollLeft=r})},environment:"undefined"==typeof window?void 0:window};function j(e,t,n){void 0===n&&(n=T);var r=e["default"+L(t)];return void 0!==r?r:n[t]}function N(e,t,n){void 0===n&&(n=T);var r=e[t];if(void 0!==r)return r;var i=e["initial"+L(t)];return void 0!==i?i:j(e,t,n)}function H(e){var t=N(e,"selectedItem"),n=N(e,"isOpen"),r=N(e,"highlightedIndex"),i=N(e,"inputValue");return{highlightedIndex:r<0&&t&&n?e.items.indexOf(t):r,isOpen:n,selectedItem:t,inputValue:i}}function F(e,t,n){var r=e.items,i=e.initialHighlightedIndex,o=e.defaultHighlightedIndex,s=t.selectedItem,a=t.highlightedIndex;return 0===r.length?-1:void 0!==i&&a===i?i:void 0!==o?o:s?r.indexOf(s):0===n?-1:n<0?r.length-1:0}function q(e,t,n,r){var i=(0,a.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,a.useEffect)(function(){if(n){var o=function(){i.current.isMouseDown=!0},s=function(o){i.current.isMouseDown=!1,e&&!M(o.target,t.map(function(e){return e.current}),n)&&r()},a=function(){i.current.isTouchMove=!1},u=function(){i.current.isTouchMove=!0},l=function(o){!e||i.current.isTouchMove||M(o.target,t.map(function(e){return e.current}),n,!1)||r()};return n.addEventListener("mousedown",o),n.addEventListener("mouseup",s),n.addEventListener("touchstart",a),n.addEventListener("touchmove",u),n.addEventListener("touchend",l),function(){n.removeEventListener("mousedown",o),n.removeEventListener("mouseup",s),n.removeEventListener("touchstart",a),n.removeEventListener("touchmove",u),n.removeEventListener("touchend",l)}}},[e,n]),i}var V=function(){return g};function K(e,t,n){var o=n.isInitialMount,s=n.highlightedIndex,u=n.items,l=n.environment,c=r(n,O);(0,a.useEffect)(function(){!o&&null!=l&&l.document&&_(function(){return e(i({highlightedIndex:s,highlightedItem:u[s],resultCount:u.length},c))},l.document)},t)}function z(e){var t=e.highlightedIndex,n=e.isOpen,r=e.itemRefs,i=e.getItemNodeFromIndex,o=e.menuElement,s=e.scrollIntoView,u=(0,a.useRef)(!0);return A(function(){!(t<0)&&n&&Object.keys(r.current).length&&(!1===u.current?u.current=!0:s(i(t),o))},[t]),u}function Z(e,t,n){void 0===n&&(n=!0);var r,o=(null==(r=e.items)?void 0:r.length)&&t>=0;return i({isOpen:!1,highlightedIndex:-1},o&&i({selectedItem:e.items[t],isOpen:j(e,"isOpen"),highlightedIndex:j(e,"highlightedIndex")},n&&{inputValue:e.itemToString(e.items[t])}))}var W={environment:s().shape({addEventListener:s().func.isRequired,removeEventListener:s().func.isRequired,document:s().shape({createElement:s().func.isRequired,getElementById:s().func.isRequired,activeElement:s().any.isRequired,body:s().any.isRequired}).isRequired,Node:s().func.isRequired}),itemToString:s().func,stateReducer:s().func},G=i({},W,{getA11yStatusMessage:s().func,highlightedIndex:s().number,defaultHighlightedIndex:s().number,initialHighlightedIndex:s().number,isOpen:s().bool,defaultIsOpen:s().bool,initialIsOpen:s().bool,selectedItem:s().any,initialSelectedItem:s().any,defaultSelectedItem:s().any,id:s().string,labelId:s().string,menuId:s().string,getItemId:s().func,toggleButtonId:s().string,onSelectedItemChange:s().func,onHighlightedIndexChange:s().func,onStateChange:s().func,onIsOpenChange:s().func,scrollIntoView:s().func});function Y(e,t,n){var r,o=t.type,s=t.props;switch(o){case n.ItemMouseMove:r={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:r={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:F(s,e,0)};break;case n.FunctionOpenMenu:r={isOpen:!0,highlightedIndex:F(s,e,0)};break;case n.FunctionCloseMenu:r={isOpen:!1};break;case n.FunctionSetHighlightedIndex:r={highlightedIndex:t.highlightedIndex};break;case n.FunctionSetInputValue:r={inputValue:t.inputValue};break;case n.FunctionReset:r={highlightedIndex:j(s,"highlightedIndex"),isOpen:j(s,"isOpen"),selectedItem:j(s,"selectedItem"),inputValue:j(s,"inputValue")};break;default:throw Error("Reducer called without proper action type.")}return i({},e,r)}f(f({},G),{items:s().array.isRequired,isItemDisabled:s().func,getA11ySelectionMessage:s().func});var X=f(f({},$),{getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,r=e.previousResultCount;return t?n?n!==r?"".concat(n," result").concat(1===n?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""},isItemDisabled:function(){return!1}}),J=Object.freeze({__proto__:null,ToggleButtonClick:0,ToggleButtonKeyDownArrowDown:1,ToggleButtonKeyDownArrowUp:2,ToggleButtonKeyDownCharacter:3,ToggleButtonKeyDownEscape:4,ToggleButtonKeyDownHome:5,ToggleButtonKeyDownEnd:6,ToggleButtonKeyDownEnter:7,ToggleButtonKeyDownSpaceButton:8,ToggleButtonKeyDownPageUp:9,ToggleButtonKeyDownPageDown:10,ToggleButtonBlur:11,MenuMouseLeave:12,ItemMouseMove:13,ItemClick:14,FunctionToggleMenu:15,FunctionOpenMenu:16,FunctionCloseMenu:17,FunctionSetHighlightedIndex:18,FunctionSelectItem:19,FunctionSetInputValue:20,FunctionReset:21});function Q(e,t){var n,r,o=t.type,s=t.props,a=t.altKey;switch(o){case 14:r={isOpen:j(s,"isOpen"),highlightedIndex:j(s,"highlightedIndex"),selectedItem:s.items[t.index]};break;case 3:var u=t.key,l=""+e.inputValue+u,c=function(e){for(var t=e.keysSoFar,n=e.highlightedIndex,r=e.items,i=e.itemToString,o=e.isItemDisabled,s=t.toLowerCase(),a=0;a<r.length;a++){var u=(a+n+ +(t.length<2))%r.length,l=r[u];if(void 0!==l&&i(l).toLowerCase().startsWith(s)&&!o(l,u))return u}return n}({keysSoFar:l,highlightedIndex:!e.isOpen&&e.selectedItem?s.items.indexOf(e.selectedItem):e.highlightedIndex,items:s.items,itemToString:s.itemToString,isItemDisabled:s.isItemDisabled});r={inputValue:l,highlightedIndex:c,isOpen:!0};break;case 1:r={highlightedIndex:e.isOpen?E(e.highlightedIndex,1,s.items,s.isItemDisabled):a&&null==e.selectedItem?-1:F(s,e,1),isOpen:!0};break;case 2:r=e.isOpen&&a?Z(s,e.highlightedIndex,!1):{highlightedIndex:e.isOpen?E(e.highlightedIndex,-1,s.items,s.isItemDisabled):F(s,e,-1),isOpen:!0};break;case 7:case 8:r=Z(s,e.highlightedIndex,!1);break;case 5:r={highlightedIndex:I(0,!1,s.items,s.isItemDisabled),isOpen:!0};break;case 6:r={highlightedIndex:I(s.items.length-1,!0,s.items,s.isItemDisabled),isOpen:!0};break;case 9:r={highlightedIndex:E(e.highlightedIndex,-10,s.items,s.isItemDisabled)};break;case 10:r={highlightedIndex:E(e.highlightedIndex,10,s.items,s.isItemDisabled)};break;case 4:r={isOpen:!1,highlightedIndex:-1};break;case 11:r=i({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&(null==(n=s.items)?void 0:n.length)&&{selectedItem:s.items[e.highlightedIndex]});break;case 19:r={selectedItem:t.selectedItem};break;default:return Y(e,t,J)}return i({},e,r)}var ee=["onMouseLeave","refKey","ref"],et=["onBlur","onClick","onPress","onKeyDown","refKey","ref"],en=["item","index","onMouseMove","onClick","onMouseDown","onPress","refKey","disabled","ref"];function er(e){void 0===e&&(e={});var t=i({},X,e),n=t.items,o=t.scrollIntoView,s=t.environment,u=t.itemToString,l=t.getA11ySelectionMessage,c=t.getA11yStatusMessage,d=P(Q,t,H),h=d[0],f=d[1],g=h.isOpen,m=h.highlightedIndex,w=h.selectedItem,E=h.inputValue,I=(0,a.useRef)(null),M=(0,a.useRef)(null),C=(0,a.useRef)({}),S=(0,a.useRef)(null),k=U(t),O=(0,a.useRef)(),T=(0,a.useRef)(!0),_=R({state:h,props:t}),A=(0,a.useCallback)(function(e){return C.current[k.getItemId(e)]},[k]);K(c,[g,m,E,n],i({isInitialMount:T.current,previousResultCount:O.current,items:n,environment:s,itemToString:u},h)),K(l,[w],i({isInitialMount:T.current,previousResultCount:O.current,items:n,environment:s,itemToString:u},h));var L=z({menuElement:M.current,highlightedIndex:m,isOpen:g,itemRefs:C,scrollIntoView:o,getItemNodeFromIndex:A});(0,a.useEffect)(function(){return S.current=y(function(e){e({type:20,inputValue:""})},500),function(){S.current.cancel()}},[]),(0,a.useEffect)(function(){E&&S.current(f)},[f,E]),T.current,(0,a.useEffect)(function(){T.current||(O.current=n.length)}),(0,a.useEffect)(function(){N(t,"isOpen")&&I.current&&I.current.focus()},[]);var D=q(g,[M,I],s,function(){f({type:11})}),$=V("getMenuProps","getToggleButtonProps");(0,a.useEffect)(function(){return T.current=!1,function(){T.current=!0}},[]),(0,a.useEffect)(function(){g||(C.current={})},[g]);var j=(0,a.useMemo)(function(){return{ArrowDown:function(e){e.preventDefault(),f({type:1,altKey:e.altKey})},ArrowUp:function(e){e.preventDefault(),f({type:2,altKey:e.altKey})},Home:function(e){e.preventDefault(),f({type:5})},End:function(e){e.preventDefault(),f({type:6})},Escape:function(){_.current.state.isOpen&&f({type:4})},Enter:function(e){e.preventDefault(),f({type:7*!!_.current.state.isOpen})},PageUp:function(e){_.current.state.isOpen&&(e.preventDefault(),f({type:9}))},PageDown:function(e){_.current.state.isOpen&&(e.preventDefault(),f({type:10}))}," ":function(e){e.preventDefault();var t=_.current.state;if(!t.isOpen)return void f({type:0});t.inputValue?f({type:3,key:" "}):f({type:8})}}},[f,_]),F=(0,a.useCallback)(function(){f({type:15})},[f]),Z=(0,a.useCallback)(function(){f({type:17})},[f]),W=(0,a.useCallback)(function(){f({type:16})},[f]),G=(0,a.useCallback)(function(e){f({type:18,highlightedIndex:e})},[f]),Y=(0,a.useCallback)(function(e){f({type:19,selectedItem:e})},[f]),J=(0,a.useCallback)(function(){f({type:21})},[f]),er=(0,a.useCallback)(function(e){f({type:20,inputValue:e})},[f]),ei=(0,a.useCallback)(function(e){return i({id:k.labelId,htmlFor:k.toggleButtonId},e)},[k]),eo=(0,a.useCallback)(function(e,t){var n,o=void 0===e?{}:e,s=o.onMouseLeave,a=o.refKey,u=void 0===a?"ref":a,l=o.ref,c=r(o,ee),d=(void 0===t?{}:t).suppressRefError;return $("getMenuProps",void 0!==d&&d,u,M),i(((n={})[u]=b(l,function(e){M.current=e}),n.id=k.menuId,n.role="listbox",n["aria-labelledby"]=c&&c["aria-label"]?void 0:""+k.labelId,n.onMouseLeave=v(s,function(){f({type:12})}),n),c)},[f,$,k]);return{getToggleButtonProps:(0,a.useCallback)(function(e,t){var n,o=void 0===e?{}:e,s=o.onBlur,a=o.onClick;o.onPress;var u=o.onKeyDown,l=o.refKey,c=void 0===l?"ref":l,d=o.ref,h=r(o,et),p=(void 0===t?{}:t).suppressRefError,g=_.current.state,m=i(((n={})[c]=b(d,function(e){I.current=e}),n["aria-activedescendant"]=g.isOpen&&g.highlightedIndex>-1?k.getItemId(g.highlightedIndex):"",n["aria-controls"]=k.menuId,n["aria-expanded"]=_.current.state.isOpen,n["aria-haspopup"]="listbox",n["aria-labelledby"]=h&&h["aria-label"]?void 0:""+k.labelId,n.id=k.toggleButtonId,n.role="combobox",n.tabIndex=0,n.onBlur=v(s,function(){g.isOpen&&!D.current.isMouseDown&&f({type:11})}),n),h);return h.disabled||(m.onClick=v(a,function(){f({type:0})}),m.onKeyDown=v(u,function(e){var t=x(e);t&&j[t]?j[t](e):/^\S{1}$/.test(t)&&f({type:3,key:t})})),$("getToggleButtonProps",void 0!==p&&p,c,I),m},[_,k,$,f,D,j]),getLabelProps:ei,getMenuProps:eo,getItemProps:(0,a.useCallback)(function(e){var t,n=void 0===e?{}:e,o=n.item,s=n.index,a=n.onMouseMove,u=n.onClick,l=n.onMouseDown;n.onPress;var c=n.refKey,d=n.disabled,h=n.ref,g=r(n,en);void 0!==d&&p.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useSelect.');var m=_.current,y=m.state,w=m.props,x=B(o,s,w.items,"Pass either item or index to getItemProps!"),E=x[0],I=x[1],M=w.isItemDisabled(E,I),S=i(((t={})[void 0===c?"ref":c]=b(h,function(e){e&&(C.current[k.getItemId(I)]=e)}),t["aria-disabled"]=M,t["aria-selected"]=""+(E===y.selectedItem),t.id=k.getItemId(I),t.role="option",t),g);return M||(S.onClick=v(u,function(){f({type:14,index:I})})),S.onMouseMove=v(a,function(){I!==y.highlightedIndex&&(L.current=!1,f({type:13,index:I,disabled:M}))}),S.onMouseDown=v(l,function(e){return e.preventDefault()}),S},[_,k,L,f]),toggleMenu:F,openMenu:W,closeMenu:Z,setHighlightedIndex:G,selectItem:Y,reset:J,setInputValue:er,highlightedIndex:m,isOpen:g,selectedItem:w,inputValue:E}}er.stateChangeTypes=J;var ei=Object.freeze({__proto__:null,InputKeyDownArrowDown:0,InputKeyDownArrowUp:1,InputKeyDownEscape:2,InputKeyDownHome:3,InputKeyDownEnd:4,InputKeyDownPageUp:5,InputKeyDownPageDown:6,InputKeyDownEnter:7,InputChange:8,InputBlur:9,InputClick:10,MenuMouseLeave:11,ItemMouseMove:12,ItemClick:13,ToggleButtonClick:14,FunctionToggleMenu:15,FunctionOpenMenu:16,FunctionCloseMenu:17,FunctionSetHighlightedIndex:18,FunctionSelectItem:19,FunctionSetInputValue:20,FunctionReset:21,ControlledPropUpdatedSelectedItem:22});function eo(e){var t=H(e),n=t.selectedItem,r=t.inputValue;return""===r&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue&&(r=e.itemToString(n)),i({},t,{inputValue:r})}i({},G,{items:s().array.isRequired,isItemDisabled:s().func,selectedItemChanged:s().func,getA11ySelectionMessage:s().func,inputValue:s().string,defaultInputValue:s().string,initialInputValue:s().string,inputId:s().string,onInputValueChange:s().func});var es=i({},$,{selectedItemChanged:function(e,t){return e!==t},getA11yStatusMessage:function(e){var t=e.isOpen,n=e.resultCount,r=e.previousResultCount;return t?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""},isItemDisabled:function(){return!1}});function ea(e,t){var n,r,o=t.type,s=t.props,a=t.altKey;switch(o){case 13:r={isOpen:j(s,"isOpen"),highlightedIndex:j(s,"highlightedIndex"),selectedItem:s.items[t.index],inputValue:s.itemToString(s.items[t.index])};break;case 0:r=e.isOpen?{highlightedIndex:E(e.highlightedIndex,1,s.items,s.isItemDisabled,!0)}:{highlightedIndex:a&&null==e.selectedItem?-1:F(s,e,1),isOpen:s.items.length>=0};break;case 1:r=e.isOpen?a?Z(s,e.highlightedIndex):{highlightedIndex:E(e.highlightedIndex,-1,s.items,s.isItemDisabled,!0)}:{highlightedIndex:F(s,e,-1),isOpen:s.items.length>=0};break;case 7:r=Z(s,e.highlightedIndex);break;case 2:r=i({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case 5:r={highlightedIndex:E(e.highlightedIndex,-10,s.items,s.isItemDisabled,!0)};break;case 6:r={highlightedIndex:E(e.highlightedIndex,10,s.items,s.isItemDisabled,!0)};break;case 3:r={highlightedIndex:I(0,!1,s.items,s.isItemDisabled)};break;case 4:r={highlightedIndex:I(s.items.length-1,!0,s.items,s.isItemDisabled)};break;case 9:r=i({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&(null==(n=s.items)?void 0:n.length)&&t.selectItem&&{selectedItem:s.items[e.highlightedIndex],inputValue:s.itemToString(s.items[e.highlightedIndex])});break;case 8:r={isOpen:!0,highlightedIndex:j(s,"highlightedIndex"),inputValue:t.inputValue};break;case 10:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:F(s,e,0)};break;case 19:r={selectedItem:t.selectedItem,inputValue:s.itemToString(t.selectedItem)};break;case 22:r={inputValue:t.inputValue};break;default:return Y(e,t,ei)}return i({},e,r)}var eu=["onMouseLeave","refKey","ref"],el=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],ec=["onClick","onPress","refKey","ref"],ed=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];function eh(e){void 0===e&&(e={});var t,n,o,s,u=i({},es,e),l=u.items,c=u.scrollIntoView,d=u.environment,h=u.getA11yStatusMessage,f=u.getA11ySelectionMessage,g=u.itemToString,m=(t=(0,a.useRef)(),o=(n=D(ea,u,eo))[0],s=n[1],(0,a.useEffect)(function(){void 0!==u.selectedItem&&(u.selectedItemChanged(t.current,u.selectedItem)&&s({type:22,inputValue:u.itemToString(u.selectedItem)}),t.current=o.selectedItem===t.current?u.selectedItem:o.selectedItem)},[o.selectedItem,u.selectedItem]),[w(o,u),s]),y=m[0],E=m[1],I=y.isOpen,M=y.highlightedIndex,C=y.selectedItem,S=y.inputValue,k=(0,a.useRef)(null),O=(0,a.useRef)({}),T=(0,a.useRef)(null),_=(0,a.useRef)(null),A=(0,a.useRef)(!0),L=U(u),P=(0,a.useRef)(),$=R({state:y,props:u}),j=(0,a.useCallback)(function(e){return O.current[L.getItemId(e)]},[L]);K(h,[I,M,S,l],i({isInitialMount:A.current,previousResultCount:P.current,items:l,environment:d,itemToString:g},y)),K(f,[C],i({isInitialMount:A.current,previousResultCount:P.current,items:l,environment:d,itemToString:g},y));var H=z({menuElement:k.current,highlightedIndex:M,isOpen:I,itemRefs:O,scrollIntoView:c,getItemNodeFromIndex:j});A.current,(0,a.useEffect)(function(){N(u,"isOpen")&&T.current&&T.current.focus()},[]),(0,a.useEffect)(function(){A.current||(P.current=l.length)});var F=q(I,[T,k,_],d,function(){E({type:9,selectItem:!1})}),Z=V("getInputProps","getMenuProps");(0,a.useEffect)(function(){return A.current=!1,function(){A.current=!0}},[]),(0,a.useEffect)(function(){I||(O.current={})},[I]),(0,a.useEffect)(function(){var e;I&&null!=d&&d.document&&null!=T&&null!=(e=T.current)&&e.focus&&d.document.activeElement!==T.current&&T.current.focus()},[I,d]);var W=(0,a.useMemo)(function(){return{ArrowDown:function(e){e.preventDefault(),E({type:0,altKey:e.altKey})},ArrowUp:function(e){e.preventDefault(),E({type:1,altKey:e.altKey})},Home:function(e){$.current.state.isOpen&&(e.preventDefault(),E({type:3}))},End:function(e){$.current.state.isOpen&&(e.preventDefault(),E({type:4}))},Escape:function(e){var t=$.current.state;(t.isOpen||t.inputValue||t.selectedItem||t.highlightedIndex>-1)&&(e.preventDefault(),E({type:2}))},Enter:function(e){$.current.state.isOpen&&229!==e.which&&(e.preventDefault(),E({type:7}))},PageUp:function(e){$.current.state.isOpen&&(e.preventDefault(),E({type:5}))},PageDown:function(e){$.current.state.isOpen&&(e.preventDefault(),E({type:6}))}}},[E,$]),G=(0,a.useCallback)(function(e){return i({id:L.labelId,htmlFor:L.inputId},e)},[L]),Y=(0,a.useCallback)(function(e,t){var n,o=void 0===e?{}:e,s=o.onMouseLeave,a=o.refKey,u=void 0===a?"ref":a,l=o.ref,c=r(o,eu),d=(void 0===t?{}:t).suppressRefError;return Z("getMenuProps",void 0!==d&&d,u,k),i(((n={})[u]=b(l,function(e){k.current=e}),n.id=L.menuId,n.role="listbox",n["aria-labelledby"]=c&&c["aria-label"]?void 0:""+L.labelId,n.onMouseLeave=v(s,function(){E({type:11})}),n),c)},[E,Z,L]),X=(0,a.useCallback)(function(e){var t,n,o=void 0===e?{}:e,s=o.item,a=o.index,u=o.refKey,l=o.ref,c=o.onMouseMove,d=o.onMouseDown,h=o.onClick;o.onPress;var f=o.disabled,g=r(o,el);void 0!==f&&p.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var m=$.current,y=m.props,w=m.state,x=B(s,a,y.items,"Pass either item or index to getItemProps!"),I=x[0],M=x[1],C=y.isItemDisabled(I,M);return i(((t={})[void 0===u?"ref":u]=b(l,function(e){e&&(O.current[L.getItemId(M)]=e)}),t["aria-disabled"]=C,t["aria-selected"]=""+(M===w.highlightedIndex),t.id=L.getItemId(M),t.role="option",t),!C&&((n={}).onClick=v(h,function(){E({type:13,index:M})}),n),{onMouseMove:v(c,function(){M!==w.highlightedIndex&&(H.current=!1,E({type:12,index:M,disabled:C}))}),onMouseDown:v(d,function(e){return e.preventDefault()})},g)},[E,$,H,L]),J=(0,a.useCallback)(function(e){var t,n=void 0===e?{}:e,o=n.onClick;n.onPress;var s=n.refKey,a=n.ref,u=r(n,ec),l=$.current.state;return i(((t={})[void 0===s?"ref":s]=b(a,function(e){_.current=e}),t["aria-controls"]=L.menuId,t["aria-expanded"]=l.isOpen,t.id=L.toggleButtonId,t.tabIndex=-1,t),!u.disabled&&i({},{onClick:v(o,function(){E({type:14})})}),u)},[E,$,L]),Q=(0,a.useCallback)(function(e,t){var n,o,s=void 0===e?{}:e,a=s.onKeyDown,u=s.onChange,l=s.onInput,c=s.onBlur;s.onChangeText;var h=s.onClick,f=s.refKey,p=void 0===f?"ref":f,g=s.ref,m=r(s,ed),y=(void 0===t?{}:t).suppressRefError;Z("getInputProps",void 0!==y&&y,p,T);var w=$.current.state,I={};return m.disabled||((o={}).onChange=v(u,l,function(e){E({type:8,inputValue:e.target.value})}),o.onKeyDown=v(a,function(e){var t=x(e);t&&W[t]&&W[t](e)}),o.onBlur=v(c,function(e){null!=d&&d.document&&w.isOpen&&!F.current.isMouseDown&&E({type:9,selectItem:null!==e.relatedTarget||d.document.activeElement===d.document.body})}),o.onClick=v(h,function(){E({type:10})}),I=o),i(((n={})[p]=b(g,function(e){T.current=e}),n["aria-activedescendant"]=w.isOpen&&w.highlightedIndex>-1?L.getItemId(w.highlightedIndex):"",n["aria-autocomplete"]="list",n["aria-controls"]=L.menuId,n["aria-expanded"]=w.isOpen,n["aria-labelledby"]=m&&m["aria-label"]?void 0:L.labelId,n.autoComplete="off",n.id=L.inputId,n.role="combobox",n.value=w.inputValue,n),I,m)},[Z,$,L,W,E,F,d]),ee=(0,a.useCallback)(function(){E({type:15})},[E]),et=(0,a.useCallback)(function(){E({type:17})},[E]),en=(0,a.useCallback)(function(){E({type:16})},[E]),er=(0,a.useCallback)(function(e){E({type:18,highlightedIndex:e})},[E]),ei=(0,a.useCallback)(function(e){E({type:19,selectedItem:e})},[E]);return{getItemProps:X,getLabelProps:G,getMenuProps:Y,getInputProps:Q,getToggleButtonProps:J,toggleMenu:ee,openMenu:en,closeMenu:et,setHighlightedIndex:er,setInputValue:(0,a.useCallback)(function(e){E({type:20,inputValue:e})},[E]),selectItem:ei,reset:(0,a.useCallback)(function(){E({type:21})},[E]),highlightedIndex:M,isOpen:I,selectedItem:C,inputValue:S}}eh.stateChangeTypes=ei;i({},W,{selectedItems:s().array,initialSelectedItems:s().array,defaultSelectedItems:s().array,getA11yRemovalMessage:s().func,activeIndex:s().number,initialActiveIndex:s().number,defaultActiveIndex:s().number,onActiveIndexChange:s().func,onSelectedItemsChange:s().func,keyNavigationNext:s().string,keyNavigationPrevious:s().string});var ef={itemToString:$.itemToString,stateReducer:$.stateReducer,environment:$.environment,getA11yRemovalMessage:function(e){var t=e.removedSelectedItem;return(0,e.itemToString)(t)+" has been removed."},keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},ep=Object.freeze({__proto__:null,SelectedItemClick:0,SelectedItemKeyDownDelete:1,SelectedItemKeyDownBackspace:2,SelectedItemKeyDownNavigationNext:3,SelectedItemKeyDownNavigationPrevious:4,DropdownKeyDownNavigationPrevious:5,DropdownKeyDownBackspace:6,DropdownClick:7,FunctionAddSelectedItem:8,FunctionRemoveSelectedItem:9,FunctionSetSelectedItems:10,FunctionSetActiveIndex:11,FunctionReset:12})},85001:(e,t,n)=>{"use strict";n.d(t,{I:()=>h});var r=n(37591),i=n(38325),o=n(90673),s=n(63650),a=n(97858),u=n(16128),l=class{budgetConsumed;intervalHandle;options;constructor(e){this.options=e,this.budgetConsumed=0}getBackoffMs(){if(0===this.getBudgetConsumed())return 0;let e=Math.max(0,this.getBudgetConsumed()-1),t=Math.floor(Math.random()*this.options.maxJitterMs);return Math.min(this.options.baseIntervalMs*2**e,this.options.maxBackoffMs)+t}get totalBudgetRestoreTime(){return this.options.budgetRestoreIntervalMs*this.options.attemptBudgetCapacity}consumeBudget(){this.stopLeak(),this.budgetConsumed=this.getBudgetConsumed()+1}getBudgetConsumed(){return this.budgetConsumed}hasBudget(){return this.getBudgetConsumed()<this.options.attemptBudgetCapacity}startRestoringBudget(){if(this.intervalHandle)return;let e=()=>{let e=this.budgetConsumed;if(!e)return void this.stopLeak();let t=e-1;0!==t&&(this.budgetConsumed=t)};this.intervalHandle=setInterval(e,this.options.budgetRestoreIntervalMs)}stopLeak(){this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=void 0)}close(){this.stopLeak()}},c=class extends r.oK{options;retryBudget;reconnectOnConnectionDrop=!0;handshakeExtensions;sessions;constructor(e,t){super(e,t),this.sessions=new Map,this.options={...i.I$,...t},this.retryBudget=new l(this.options)}extendHandshake(e){this.handshakeExtensions=e}tryReconnecting(e){let t=this.sessions.get(e);!this.options.enableTransparentSessionReconnects&&t&&this.deleteSession(t),this.reconnectOnConnectionDrop&&"open"===this.getStatus()&&this.connect(e)}send(e,t){if("closed"===this.getStatus()){let e="transport is closed, cant send";throw this.log?.error(e,{clientId:this.clientId,transportMessage:t,tags:["invariant-violation"]}),Error(e)}let n=this.sessions.get(e);return n||(n=this.createUnconnectedSession(e)),n.send(t)}createUnconnectedSession(e){let t=i.Dl.entrypoint(e,this.clientId,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}},this.options,this.log);return this.updateSession(t),t}onConnectingFailed(e){let t=super.onConnectingFailed(e);return this.tryReconnecting(t.to),t}onConnClosed(e){let t=super.onConnClosed(e);return this.tryReconnecting(t.to),t}onConnectionEstablished(e,t){let n=i.Dl.transition.ConnectingToHandshaking(e,t,{onConnectionErrored:e=>{let t=(0,o.xH)(e);this.log?.error(`connection to ${n.to} errored during handshake: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.warn(`connection to ${n.to} closed during handshake`,n.loggingMetadata),this.onConnClosed(n)},onHandshake:e=>{this.onHandshakeResponse(n,e)},onInvalidHandshake:(t,i)=>{this.log?.error(`invalid handshake: ${t}`,n.loggingMetadata),this.deleteSession(e,{unhealthy:!0}),this.protocolError({type:r.bd.HandshakeFailed,code:i,message:t})},onHandshakeTimeout:()=>{this.log?.error(`connection to ${n.to} timed out during handshake`,n.loggingMetadata),this.onConnClosed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});return this.updateSession(n),this.sendHandshake(n),n}rejectHandshakeResponse(e,t,n){e.conn.telemetry?.span.setStatus({code:s.s.ERROR,message:t}),this.log?.warn(t,n),this.deleteSession(e,{unhealthy:!0})}onHandshakeResponse(e,t){if(!a.J(o.O9,t.payload))return void this.rejectHandshakeResponse(e,"received invalid handshake response",{...e.loggingMetadata,transportMessage:t,validationErrors:[...u.I(o.O9,t.payload)]});if(!t.payload.status.ok){let n=a.J(o.Bi,t.payload.status.code),i=`handshake failed: ${t.payload.status.reason}`,s=e.to;this.rejectHandshakeResponse(e,i,{...e.loggingMetadata,transportMessage:t}),n?this.tryReconnecting(s):this.protocolError({type:r.bd.HandshakeFailed,code:t.payload.status.code,message:i});return}if(t.payload.status.sessionId!==e.id){let n=`session id mismatch: expected ${e.id}, got ${t.payload.status.sessionId}`;this.rejectHandshakeResponse(e,n,{...e.loggingMetadata,transportMessage:t});return}this.log?.info(`handshake from ${t.from} ok`,{...e.loggingMetadata,transportMessage:t});let n=i.Dl.transition.HandshakingToConnected(e,{onConnectionErrored:e=>{let t=(0,o.xH)(e);this.log?.warn(`connection to ${n.to} errored: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.info(`connection to ${n.to} closed`,n.loggingMetadata),this.onConnClosed(n)},onMessage:e=>this.handleMsg(e),onInvalidMessage:e=>{this.deleteSession(n,{unhealthy:!0}),this.protocolError({type:r.bd.InvalidMessage,message:e})}});this.updateSession(n),this.retryBudget.startRestoringBudget()}connect(e){if("open"!==this.getStatus())return void this.log?.info(`transport state is no longer open, cancelling attempt to connect to ${e}`);let t=this.sessions.get(e);if("NoConnection"!==(t??=this.createUnconnectedSession(e)).state)return void this.log?.debug(`session to ${e} has state ${t.state}, skipping connect attempt`,t.loggingMetadata);if(!this.retryBudget.hasBudget()){let n=this.retryBudget.getBudgetConsumed(),i=`tried to connect to ${e} but retry budget exceeded (more than ${n} attempts in the last ${this.retryBudget.totalBudgetRestoreTime}ms)`;this.log?.error(i,t.loggingMetadata),this.protocolError({type:r.bd.RetriesExceeded,message:i});return}let n=this.retryBudget.getBackoffMs();this.log?.info(`attempting connection to ${e} (${n}ms backoff)`,t.loggingMetadata),this.retryBudget.consumeBudget();let o=i.Dl.transition.NoConnectionToBackingOff(t,n,{onBackoffFinished:()=>{this.onBackoffFinished(o)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(o)}});this.updateSession(o)}onBackoffFinished(e){let t=o.VL.startActiveSpan("connect",async t=>{try{return await this.createNewOutgoingConnection(e.to)}catch(n){let e=(0,o.xH)(n);throw t.recordException(e),t.setStatus({code:s.s.ERROR}),n}finally{t.end()}}),n=i.Dl.transition.BackingOffToConnecting(e,t,{onConnectionEstablished:e=>{this.log?.debug(`connection to ${n.to} established`,{...e.loggingMetadata,...n.loggingMetadata}),this.onConnectionEstablished(n,e)},onConnectionFailed:e=>{let t=(0,o.xH)(e);this.log?.error(`error connecting to ${n.to}: ${t}`,n.loggingMetadata),this.onConnectingFailed(n)},onConnectionTimeout:()=>{this.log?.error(`connection to ${n.to} timed out`,n.loggingMetadata),this.onConnectingFailed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});this.updateSession(n)}async sendHandshake(e){let t;if(this.handshakeExtensions&&(t=await this.handshakeExtensions.construct()),e._isConsumed)return;let n=(0,o.sE)({from:this.clientId,to:e.to,sessionId:e.id,expectedSessionState:{nextExpectedSeq:e.ack,nextSentSeq:e.nextSeq()},metadata:t,tracing:(0,o.oG)(e.telemetry.ctx)});this.log?.debug(`sending handshake request to ${e.to}`,{...e.loggingMetadata,transportMessage:n}),e.sendHandshake(n)}close(){this.retryBudget.close(),super.close()}},d=class extends r.Ng{ws;extras;get loggingMetadata(){let e=super.loggingMetadata;return this.extras&&(e.extras=this.extras),e}constructor(e,t){super(),this.ws=e,this.extras=t,this.ws.binaryType="arraybuffer";let n=!1;this.ws.onerror=()=>{n=!0},this.ws.onclose=({code:e,reason:t})=>{if(n){let n=Error(`websocket closed with code and reason: ${e} - ${t}`);for(let e of this.errorListeners)e(n)}for(let e of this.closeListeners)e()},this.ws.onmessage=e=>{for(let t of this.dataListeners)t(e.data)}}send(e){return this.ws.readyState===this.ws.OPEN&&(this.ws.send(e),!0)}close(){this.ws.close(1e3)}},h=class extends c{wsGetter;constructor(e,t,n){super(t,n),this.wsGetter=e}async createNewOutgoingConnection(e){this.log?.info(`establishing a new websocket to ${e}`,{clientId:this.clientId,connectedTo:e});let t=await this.wsGetter(e);await new Promise((e,n)=>t.readyState===t.OPEN?void e():t.readyState===t.CLOSING||t.readyState===t.CLOSED?void n(Error("ws is closing or closed")):void(t.onopen=()=>{e()},t.onclose=e=>{n(Error(e.reason))},t.onerror=e=>{n(Error(e.message))}));let n=new d(t);return this.log?.info(`raw websocket to ${e} ok`,{clientId:this.clientId,connectedTo:e,...n.loggingMetadata}),n}}},87819:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(39440),i=n(26571),o=n(37513);function s(e,t){(0,o.A)(2,arguments);var n=(0,i.A)(e),s=(0,i.A)(t);return Math.round((n.getTime()-(0,r.A)(n)-(s.getTime()-(0,r.A)(s)))/864e5)}},90067:(e,t,n)=>{"use strict";n.d(t,{a6:()=>y,vt:()=>Z});var r=n(95570);let i={Remove:"remove",Replace:"replace",Add:"add"},o=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),s=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),a=Symbol.iterator,u={mutable:"mutable",immutable:"immutable"},l={};function c(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){let e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Reflect.getPrototypeOf(n)}}}function h(e){return Object.getPrototypeOf(e)===Set.prototype}function f(e){return Object.getPrototypeOf(e)===Map.prototype}function p(e){var t;return null!=(t=e.copy)?t:e.original}function g(e){return"object"!=typeof e?null:null==e?void 0:e[o]}function m(e){var t;let n=g(e);return n?null!=(t=n.copy)?t:n.original:e}function y(e,t){let n;return!!e&&"object"==typeof e&&(Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!(null==t?void 0:t.mark)&&((n=t.mark(e,u))===u.immutable||"function"==typeof n))}function v(e){return Array.isArray(e)?1:e instanceof Map?2:3*(e instanceof Set)}function b(e,t){return 2===v(e)?e.get(t):e[t]}function w(e,t,n){2===v(e)?e.set(t,n):e[t]=n}function x(e,t){let n=g(e);return(n?p(n):e)[t]}function E(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function I(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function M(e,t){return t?e:[""].concat(e).map(e=>{let t=`${e}`;return -1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}let C=Object.prototype.propertyIsEnumerable;function S(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set)return h(e)?Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values()):new(Object.getPrototypeOf(e)).constructor(e.values());if(e instanceof Map)return f(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e);if((null==t?void 0:t.mark)&&void 0!==(n=t.mark(e,u))&&n!==u.mutable){if(n===u.immutable){let t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let r=Reflect.getOwnPropertyDescriptor(e,n);if(r.enumerable&&r.configurable&&r.writable){t[n]=e[n];return}r.writable||(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(r={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[n]}),Reflect.defineProperty(t,n,r)}),t}if("function"==typeof n){if(t.enablePatches||t.enableAutoFreeze)throw Error("You can't use mark and patches or auto freeze together.");return n()}throw Error(`Unsupported mark result: ${n}`)}if("object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype){let t={};return Object.keys(e).forEach(n=>{t[n]=e[n]}),Object.getOwnPropertySymbols(e).forEach(n=>{C.call(e,n)&&(t[n]=e[n])}),t}else throw Error("Please check mark() to ensure that it is a stable marker draftable function.")}function k(e){e.copy||(e.copy=S(e.original,e.options))}function O(e){return g(e)?function e(t){if(!y(t))return m(t);if(Array.isArray(t))return t.map(e);if(t instanceof Map){let n=Array.from(t.entries()).map(([t,n])=>[t,e(n)]);return f(t)?new Map(n):new(Object.getPrototypeOf(t)).constructor(n)}if(t instanceof Set){let n=Array.from(t).map(e);return h(t)?new Set(n):new(Object.getPrototypeOf(t)).constructor(n)}let n=Object.create(Object.getPrototypeOf(t));for(let r in t)n[r]=e(t[r]);return n}(e):e}function T(e){var t;e.assignedMap=null!=(t=e.assignedMap)?t:new Map,!e.operated&&(e.operated=!0,e.parent&&T(e.parent))}function _(){throw Error("Cannot modify frozen object")}function A(e,t){let n=v(e);if(0===n)Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)});else if(1===n){let n=0;for(let r of e)t(n,r,e),n+=1}else e.forEach((n,r)=>t(r,n,e))}function U(e){3===e.type&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(m(t))}))}function B(e,t,n,r){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&r){let i=function e(t,n=[]){if(Object.hasOwnProperty.call(t,"key")){let e=t.parent.copy,r=g(b(e,t.key));if(null!==r&&(null==r?void 0:r.original)!==t.original)return null;let i=3===t.parent.type,o=i?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(i&&e.size>o||c(e,o)))return null;n.push(o)}if(t.parent)return e(t.parent,n);n.reverse();try{var r=t.copy,i=n;for(let e=0;e<i.length-1;e+=1){let t=i[e];if("object"!=typeof(r=b(3===v(r)?Array.from(r):r,t)))throw Error(`Cannot resolve patch at '${i.join("/")}'.`)}}catch(e){return null}return n}(e);i&&t(e,i,n,r)}e.finalized=!0}}function L(e,t,n,r){let i=g(n);i&&(i.callbacks||(i.callbacks=[]),i.callbacks.push((o,s)=>{var a;let u=3===e.type?e.setMap:e.copy;if(E(b(u,t),n)){let n=i.original;i.copy&&(n=i.copy),U(e),B(e,r,o,s),e.options.enableAutoFreeze&&(e.options.updatedValues=null!=(a=e.options.updatedValues)?a:new WeakMap,e.options.updatedValues.set(n,i.original)),w(u,t,n)}}),e.options.enableAutoFreeze&&i.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),y(n,e.options)&&e.finalities.draft.push(()=>{E(b(3===e.type?e.setMap:e.copy,t),n)&&function(e,t){let n=3===e.type?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&function e(t,n,r){if(g(t)||!y(t,r)||n.has(t)||Object.isFrozen(t))return;let i=t instanceof Set,o=i?new Map:void 0;if(n.add(t),A(t,(s,a)=>{var u;if(g(a)){let e=g(a);k(e),w(i?o:t,s,(null==(u=e.assignedMap)?void 0:u.size)||e.operated?e.copy:e.original)}else e(a,n,r)}),o){let e=Array.from(t);t.clear(),e.forEach(e=>{t.add(o.has(e)?o.get(e):e)})}}(b(n,t),e.finalities.handledSet,e.options)}(e,t)})}function R(e,t,n,r){let{pathAsArray:o=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return function({original:e,copy:t,assignedMap:n},r,o,s,a){n.forEach((n,u)=>{let l=b(e,u),d=O(b(t,u)),h=n?c(e,u)?i.Replace:i.Add:i.Remove;if(E(l,d)&&h===i.Replace)return;let f=M(r.concat(u),a);o.push(h===i.Remove?{op:h,path:f}:{op:h,path:f,value:d}),s.push(h===i.Add?{op:i.Remove,path:f}:h===i.Remove?{op:i.Add,path:f,value:l}:{op:i.Replace,path:f,value:l})})}(e,t,n,r,o);case 1:return function(e,t,n,r,o){let{original:s,assignedMap:a,options:u}=e,l=e.copy;l.length<s.length&&([s,l]=[l,s],[n,r]=[r,n]);for(let e=0;e<s.length;e+=1)if(a.get(e.toString())&&l[e]!==s[e]){let a=M(t.concat([e]),o);n.push({op:i.Replace,path:a,value:O(l[e])}),r.push({op:i.Replace,path:a,value:O(s[e])})}for(let e=s.length;e<l.length;e+=1){let r=M(t.concat([e]),o);n.push({op:i.Add,path:r,value:O(l[e])})}if(s.length<l.length){let{arrayLengthAssignment:e=!0}=u.enablePatches;if(e){let e=M(t.concat(["length"]),o);r.push({op:i.Replace,path:e,value:s.length})}else for(let e=l.length;s.length<e;e-=1){let n=M(t.concat([e-1]),o);r.push({op:i.Remove,path:n})}}}(e,t,n,r,o);case 3:return function({original:e,copy:t},n,r,o,s){let a=0;e.forEach(e=>{if(!t.has(e)){let t=M(n.concat([a]),s);r.push({op:i.Remove,path:t,value:e}),o.unshift({op:i.Add,path:t,value:e})}a+=1}),a=0,t.forEach(t=>{if(!e.has(t)){let e=M(n.concat([a]),s);r.push({op:i.Add,path:e,value:t}),o.unshift({op:i.Remove,path:e,value:t})}a+=1})}(e,t,n,r,o)}}let D=(e,t,n=!1)=>{if("object"==typeof e&&null!==e&&(!y(e,t)||n)&&1)throw Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},P={get size(){return p(g(this)).size},has(e){return p(g(this)).has(e)},set(e,t){let n=g(this),r=p(n);return r.has(e)&&E(r.get(e),t)||(k(n),T(n),n.assignedMap.set(e,!0),n.copy.set(e,t),L(n,e,t,R)),this},delete(e){if(!this.has(e))return!1;let t=g(this);return k(t),T(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){let e=g(this);if(this.size){for(let[t]of(k(e),T(e),e.assignedMap=new Map,e.original))e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){p(g(this)).forEach((n,r)=>{e.call(t,this.get(r),r,this)})},get(e){var t,n;let r=g(this),i=p(r).get(e),o=(null==(n=(t=r.options).mark)?void 0:n.call(t,i,u))===u.mutable;if(r.options.strict&&D(i,r.options,o),o||r.finalized||!y(i,r.options)||i!==r.original.get(e))return i;let s=l.createDraft({original:i,parentDraft:r,key:e,finalities:r.finalities,options:r.options});return k(r),r.copy.set(e,s),s},keys(){return p(g(this)).keys()},values(){let e=this.keys();return{[a]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){let e=this.keys();return{[a]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[a](){return this.entries()}},$=Reflect.ownKeys(P),j=(e,t,{isValuesIterator:n})=>()=>{var r,i;let o=t.next();if(o.done)return o;let s=o.value,a=e.setMap.get(s),c=g(a),d=(null==(i=(r=e.options).mark)?void 0:i.call(r,a,u))===u.mutable;if(e.options.strict&&D(s,e.options,d),!d&&!c&&y(s,e.options)&&!e.finalized&&e.original.has(s)){let t=l.createDraft({original:s,parentDraft:e,key:s,finalities:e.finalities,options:e.options});e.setMap.set(s,t),a=t}else c&&(a=c.proxy);return{done:!1,value:n?a:[a,a]}},N={get size(){return g(this).setMap.size},has(e){let t=g(this);if(t.setMap.has(e))return!0;k(t);let n=g(e);return!!(n&&t.setMap.has(n.original))},add(e){let t=g(this);return this.has(e)||(k(t),T(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),L(t,e,e,R)),this},delete(e){if(!this.has(e))return!1;let t=g(this);k(t),T(t);let n=g(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;let e=g(this);for(let t of(k(e),T(e),e.original))e.assignedMap.set(t,!1);e.setMap.clear()},values(){let e=g(this);k(e);let t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:j(e,t,{isValuesIterator:!0})}},entries(){let e=g(this);k(e);let t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:j(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[a](){return this.values()},forEach(e,t){let n=this.values(),r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}};Set.prototype.difference&&Object.assign(N,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});let H=Reflect.ownKeys(N),F=new WeakSet,q={get(e,t,n){var r,i;let s,a=null==(r=e.copy)?void 0:r[t];if(a&&F.has(a))return a;if(t===o)return e;if(e.options.mark){let r="size"===t&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if((s=e.options.mark(r,u))===u.mutable)return e.options.strict&&D(r,e.options,!0),r}let l=p(e);if(l instanceof Map&&$.includes(t)){if("size"===t)return Object.getOwnPropertyDescriptor(P,"size").get.call(e.proxy);let n=P[t];if(n)return n.bind(e.proxy)}if(l instanceof Set&&H.includes(t)){if("size"===t)return Object.getOwnPropertyDescriptor(N,"size").get.call(e.proxy);let n=N[t];if(n)return n.bind(e.proxy)}if(!c(l,t)){let n=d(l,t);return n?"value"in n?n.value:null==(i=n.get)?void 0:i.call(e.proxy):void 0}let h=l[t];if(e.options.strict&&D(h,e.options),e.finalized||!y(h,e.options))return h;if(h===x(e.original,t)){if(k(e),e.copy[t]=V({original:e.original[t],parentDraft:e,key:1===e.type?Number(t):t,finalities:e.finalities,options:e.options}),"function"==typeof s){let n=g(e.copy[t]);return k(n),T(n),n.copy}return e.copy[t]}return h},set(e,t,n){var r;let i;if(3===e.type||2===e.type)throw Error("Map/Set draft does not support any property assignment.");if(1===e.type&&"length"!==t&&!(Number.isInteger(i=Number(t))&&i>=0&&(0===t||0===i||String(i)===String(t))))throw Error("Only supports setting array indices and the 'length' property.");let o=d(p(e),t);if(null==o?void 0:o.set)return o.set.call(e.proxy,n),!0;let s=x(p(e),t),a=g(s);return a&&E(a.original,n)?(e.copy[t]=n,e.assignedMap=null!=(r=e.assignedMap)?r:new Map,e.assignedMap.set(t,!1),!0):!!(E(n,s)&&(void 0!==n||c(e.original,t)))||(k(e),T(e),c(e.original,t)&&E(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,L(e,t,n,R),!0)},has:(e,t)=>t in p(e),ownKeys:e=>Reflect.ownKeys(p(e)),getOwnPropertyDescriptor(e,t){let n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},getPrototypeOf:e=>Reflect.getPrototypeOf(e.original),setPrototypeOf(){throw Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return 1===e.type?q.set.call(this,e,t,void 0,e.proxy):(void 0!==x(e.original,t)||t in e.original?(k(e),T(e),e.assignedMap.set(t,!1)):(e.assignedMap=null!=(n=e.assignedMap)?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function V(e){let{original:t,parentDraft:n,key:r,finalities:i,options:o}=e,s=v(t),a={type:s,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:i,options:o,setMap:3===s?new Map(t.entries()):void 0};(r||"key"in e)&&(a.key=r);let{proxy:u,revoke:l}=Proxy.revocable(1===s?Object.assign([],a):a,q);if(i.revoke.push(l),F.add(u),a.proxy=u,n)n.finalities.draft.push((e,t)=>{var i,o;let s=g(u),a=3===n.type?n.setMap:n.copy,l=b(a,r),c=g(l);if(c){let o=c.original;c.operated&&(o=m(l)),U(c),B(c,R,e,t),n.options.enableAutoFreeze&&(n.options.updatedValues=null!=(i=n.options.updatedValues)?i:new WeakMap,n.options.updatedValues.set(o,c.original)),w(a,r,o)}null==(o=s.callbacks)||o.forEach(n=>{n(e,t)})});else{let e=g(u);e.finalities.draft.push((t,n)=>{U(e),B(e,R,t,n)})}return u}function K(e){let{rootDraft:t,value:n,useRawReturn:i=!1,isRoot:o=!0}=e;A(n,(n,r,i)=>{let o=g(r);if(o&&t&&o.finalities===t.finalities){e.isContainDraft=!0;let t=o.original;if(i instanceof Set){let e=Array.from(i);i.clear(),e.forEach(e=>i.add(n===e?t:e))}else w(i,n,t)}else"object"==typeof r&&null!==r&&(e.value=r,e.isRoot=!1,K(e))}),o&&(e.isContainDraft||r.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),i&&r.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function z(e){if(!g(e))throw Error(`current() is only used for Draft, parameter: ${e}`);return function e(t){var n;let r,i=g(t);if(!y(t,null==i?void 0:i.options))return t;let o=v(t);if(i&&!i.operated)return i.original;function s(){r=2===o?f(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):3===o?Array.from(i.setMap.values()):S(t,null==i?void 0:i.options)}if(i){i.finalized=!0;try{s()}finally{i.finalized=!1}}else r=t;if(A(r,(n,o)=>{if(i&&E(b(i.original,n),o))return;let a=e(o);a!==o&&(r===t&&s(),w(r,n,a))}),3===o){let e=null!=(n=null==i?void 0:i.original)?n:r;return h(e)?new Set(r):new(Object.getPrototypeOf(e)).constructor(r)}return r}(e)}l.createDraft=V;let Z=(e=>{if(void 0!==e&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(`Invalid options: ${String(e)}, 'options' should be an object.`);return function t(n,r,o){var a,l,c;let d;if("function"==typeof n&&"function"!=typeof r)return function(e,...i){return t(e,e=>n.call(this,e,...i),r)};let h=o;if("function"!=typeof r&&(h=r),void 0!==h&&"[object Object]"!==Object.prototype.toString.call(h))throw Error(`Invalid options: ${h}, 'options' should be an object.`);h=Object.assign(Object.assign({},e),h);let f=g(n)?z(n):n,p=Array.isArray(h.mark)?(e,t)=>{for(let n of h.mark){if("function"!=typeof n)throw Error(`Invalid mark: ${n}, 'mark' should be a function.`);let r=n(e,t);if(r)return r}}:h.mark,m=null!=(a=h.enablePatches)&&a,b=null!=(l=h.strict)&&l,w={enableAutoFreeze:null!=(c=h.enableAutoFreeze)&&c,mark:p,strict:b,enablePatches:m};if(!y(f,w)&&"object"==typeof f&&null!==f)throw Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");let[x,M]=function(e,t){var n;let r,o,s={draft:[],revoke:[],handledSet:new WeakSet};t.enablePatches&&(r=[],o=[]);let a=(null==(n=t.mark)?void 0:n.call(t,e,u))!==u.mutable&&y(e,t)?V({original:e,parentDraft:null,finalities:s,options:t}):e;return[a,(e=[])=>{let[n,s,u]=function(e,t,n,r,o){var s;let a=g(e),u=null!=(s=null==a?void 0:a.original)?s:e,l=!!t.length;if(null==a?void 0:a.operated)for(;a.finalities.draft.length>0;)a.finalities.draft.pop()(n,r);let c=l?t[0]:a?a.operated?a.copy:a.original:e;return a&&I(a),o&&function e(t,n,r,i,o){{r=null!=r?r:new WeakMap,i=null!=i?i:[],o=null!=o?o:[];let e=r.has(t)?r.get(t):t;if(i.length>0){let t=i.indexOf(e);if(e&&"object"==typeof e&&-1!==t){if(i[0]===e)throw Error("Forbids circular reference");throw Error(`Forbids circular reference: ~/${o.slice(0,t).map((e,t)=>{if("symbol"==typeof e)return`[${e.toString()}]`;let n=i[t];return"object"==typeof e&&(n instanceof Map||n instanceof Set)?Array.from(n.keys()).indexOf(e):e}).join("/")}`)}i.push(e),o.push(n)}else i.push(e)}if(Object.isFrozen(t)||g(t)){i.pop(),o.pop();return}switch(v(t)){case 2:for(let[n,s]of t)e(n,n,r,i,o),e(s,n,r,i,o);t.set=t.clear=t.delete=_;break;case 3:for(let n of t)e(n,n,r,i,o);t.add=t.clear=t.delete=_;break;case 1:Object.freeze(t);let s=0;for(let n of t)e(n,s,r,i,o),s+=1;break;default:Object.freeze(t),Object.keys(t).forEach(n=>{e(t[n],n,r,i,o)})}i.pop(),o.pop()}(c,c,null==a?void 0:a.options.updatedValues),[c,n&&l?[{op:i.Replace,path:[],value:t[0]}]:n,r&&l?[{op:i.Replace,path:[],value:u}]:r]}(a,e,r,o,t.enableAutoFreeze);return t.enablePatches?[n,s,u]:n}]}(f,w);if("function"!=typeof r){if(!y(f,w))throw Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[x,M]}try{d=r(x)}catch(e){throw I(g(x)),e}let C=e=>{let t=g(x);if(!g(e)){if(void 0!==e&&!E(e,x)&&(null==t?void 0:t.operated))throw Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");let n=null==e?void 0:e[s];if(n){let r=n[0];return w.strict&&"object"==typeof e&&null!==e&&K({rootDraft:t,value:e,useRawReturn:!0}),M([r])}if(void 0!==e)return"object"==typeof e&&null!==e&&K({rootDraft:t,value:e}),M([e])}if(e===x||void 0===e)return M([]);let n=g(e);if(w===n.options){if(n.operated)throw Error("Cannot return a modified child draft.");return M([z(e)])}return M([e])};return d instanceof Promise?d.then(C,e=>{throw I(g(x)),e}):C(d)}})();Object.prototype.constructor.toString()},92796:(e,t,n)=>{e.exports=n(35329)},93054:e=>{!function(){"use strict";var t={815:function(e){e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(n);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=e.length;a>0&&u>a&&(u=a);for(var l=0;l<u;++l){var c,d,h,f,p=e[l].replace(s,"%20"),g=p.indexOf(r);(g>=0?(c=p.substr(0,g),d=p.substr(g+1)):(c=p,d=""),h=decodeURIComponent(c),f=decodeURIComponent(d),Object.prototype.hasOwnProperty.call(o,h))?t(o[h])?o[h].push(f):o[h]=[o[h],f]:o[h]=f}return o};var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},577:function(e){var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,o,s,a){return(o=o||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e)?r(i(e),function(i){var a=encodeURIComponent(t(i))+s;return n(e[i])?r(e[i],function(e){return a+encodeURIComponent(t(e))}).join(o):a+encodeURIComponent(t(e[i]))}).join(o):a?encodeURIComponent(t(a))+s+encodeURIComponent(t(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},s=!0;try{t[e](o,o.exports,r),s=!1}finally{s&&delete n[e]}return o.exports}r.ab="//";var i={};i.decode=i.parse=r(815),i.encode=i.stringify=r(577),e.exports=i}()},94450:(e,t,n)=>{"use strict";let r;n.d(t,{yU:()=>W,O9:()=>Q,uq:()=>Y,Bi:()=>G,bH:()=>ee,vL:()=>z,xH:()=>ef,UU:()=>ec,f2:()=>ep,_I:()=>es,iH:()=>eo,mH:()=>K,$C:()=>F,oG:()=>ei,EK:()=>ea,sE:()=>et,YD:()=>en,ug:()=>Z,o0:()=>er,rE:()=>eg});var i,o=n(74651),s=n(17616),a=n(7079),u=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),l={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},c={set:function(e,t,n){null!=e&&(e[t]=n)}},d=n(6639),h=(0,n(3107).n)("OpenTelemetry Baggage Key");function f(e){return e.getValue(h)||void 0}function p(){return f(d._.getInstance().active())}function g(e,t){return e.setValue(h,t)}function m(e){return e.deleteValue(h)}var y=n(17063),v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},b=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=v(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=new e(this._entries);try{for(var s=b(r),a=s.next();!a.done;a=s.next()){var u=a.value;o._entries.delete(u)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.clear=function(){return new e},e}();function x(e){return void 0===e&&(e={}),new w(new Map(Object.entries(e)))}y.K.instance();var E="propagation",I=new u,M=(function(){function e(){this.createBaggage=x,this.getBaggage=f,this.getActiveBaggage=p,this.setBaggage=g,this.deleteBaggage=m}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,a.$G)(E,e,y.K.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=c),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=l),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,a.kv)(E,y.K.instance())},e.prototype._getGlobalPropagator=function(){return(0,a.mS)(E)||I},e})().getInstance(),C=n(57010),S=n(66218);!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(i||(i={}));var k=n(97858),O=n(16128),T="UNEXPECTED_DISCONNECT",_="CANCEL",A=e=>o.ZU.Object({ok:o.ZU.Literal(!1),payload:e}),U=o.ZU.Object({path:o.ZU.String(),message:o.ZU.String()});o.ZU.Array(U);var B=o.ZU.Object({code:o.ZU.Literal(_),message:o.ZU.String()});A(B);var L=o.ZU.Union([o.ZU.Object({code:o.ZU.Literal("UNCAUGHT_ERROR"),message:o.ZU.String()}),o.ZU.Object({code:o.ZU.Literal(T),message:o.ZU.String()}),o.ZU.Object({code:o.ZU.Literal("INVALID_REQUEST"),message:o.ZU.String(),extras:o.ZU.Optional(o.ZU.Object({firstValidationErrors:o.ZU.Array(U),totalErrors:o.ZU.Number()}))}),B]),R=A(L),D=o.ZU.Union([o.ZU.Object({ok:o.ZU.Literal(!1),payload:o.ZU.Object({code:o.ZU.String(),message:o.ZU.String(),extras:o.ZU.Optional(o.ZU.Unknown())})}),o.ZU.Object({ok:o.ZU.Literal(!0),payload:o.ZU.Unknown()})]);function P(e){return{ok:!1,payload:e}}var $={code:"READABLE_BROKEN",message:"Readable was broken before it is fully consumed"},j=class{closed=!1;locked=!1;broken=!1;brokenWithValuesLeftToRead=!1;queue=[];next=null;[Symbol.asyncIterator](){if(this.locked)throw TypeError("Readable is already locked");this.locked=!0;let e=!1;return{next:async()=>{if(e)return{done:!0,value:void 0};for(;0===this.queue.length;){if(this.closed&&!this.brokenWithValuesLeftToRead)return{done:!0,value:void 0};if(this.broken)return e=!0,{done:!1,value:P($)};this.next||(this.next=function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}()),await this.next.promise,this.next=null}return{done:!1,value:this.queue.shift()}},return:async()=>(this.break(),{done:!0,value:void 0})}}async collect(){let e=[];for await(let t of this)e.push(t);return e}break(){this.broken||(this.locked=!0,this.broken=!0,this.brokenWithValuesLeftToRead=this.queue.length>0,this.queue.length=0,this.next?.resolve())}isReadable(){return!this.locked&&!this.broken}_pushValue(e){if(!this.broken){if(this.closed)throw Error("Cannot push to closed Readable");this.queue.push(e),this.next?.resolve()}}_triggerClose(){if(this.closed)throw Error("Unexpected closing multiple times");this.closed=!0,this.next?.resolve()}_hasValuesInQueue(){return this.queue.length>0}isClosed(){return this.closed}},N=class{writeCb;closeCb;closed=!1;constructor(e){this.writeCb=e.writeCb,this.closeCb=e.closeCb}write(e){if(this.closed)throw Error("Cannot write to closed Writable");this.writeCb(e)}isWritable(){return!this.closed}close(){this.closed||(this.closed=!0,this.writeCb=()=>void 0,this.closeCb(),this.closeCb=()=>void 0)}isClosed(){return this.closed}},H=(0,s.d_)("1234567890abcdefghijklmnopqrstuvxyzABCDEFGHIJKLMNOPQRSTUVXYZ"),F=()=>H(12),q=o.ZU.Object({type:o.ZU.Literal("ACK")}),V=o.ZU.Object({type:o.ZU.Literal("CLOSE")}),K="v2.0",z=["v1.1",K];function Z(e){return z.includes(e)}var W=o.ZU.Object({type:o.ZU.Literal("HANDSHAKE_REQ"),protocolVersion:o.ZU.String(),sessionId:o.ZU.String(),expectedSessionState:o.ZU.Object({nextExpectedSeq:o.ZU.Integer(),nextSentSeq:o.ZU.Integer()}),metadata:o.ZU.Optional(o.ZU.Unknown())}),G=o.ZU.Union([o.ZU.Literal("SESSION_STATE_MISMATCH")]),Y=o.ZU.Union([o.ZU.Literal("REJECTED_UNSUPPORTED_CLIENT"),o.ZU.Literal("REJECTED_BY_CUSTOM_HANDLER")]),X=o.ZU.Union([Y,o.ZU.Literal("MALFORMED_HANDSHAKE_META"),o.ZU.Literal("MALFORMED_HANDSHAKE"),o.ZU.Literal("PROTOCOL_VERSION_MISMATCH")]),J=o.ZU.Union([G,X]),Q=o.ZU.Object({type:o.ZU.Literal("HANDSHAKE_RESP"),status:o.ZU.Union([o.ZU.Object({ok:o.ZU.Literal(!0),sessionId:o.ZU.String()}),o.ZU.Object({ok:o.ZU.Literal(!1),reason:o.ZU.String(),code:J})])});o.ZU.Union([V,q,W,Q]);var ee=(r=o.ZU.Unknown(),o.ZU.Object({id:o.ZU.String(),from:o.ZU.String(),to:o.ZU.String(),seq:o.ZU.Integer(),ack:o.ZU.Integer(),serviceName:o.ZU.Optional(o.ZU.String()),procedureName:o.ZU.Optional(o.ZU.String()),streamId:o.ZU.String(),controlFlags:o.ZU.Integer(),tracing:o.ZU.Optional(o.ZU.Object({traceparent:o.ZU.String(),tracestate:o.ZU.String()})),payload:r}));function et({from:e,to:t,sessionId:n,expectedSessionState:r,metadata:i,tracing:o}){return{id:F(),from:e,to:t,seq:0,ack:0,streamId:F(),controlFlags:0,tracing:o,payload:{type:"HANDSHAKE_REQ",protocolVersion:K,sessionId:n,expectedSessionState:r,metadata:i}}}function en({from:e,to:t,status:n}){return{id:F(),from:e,to:t,seq:0,ack:0,streamId:F(),controlFlags:0,payload:{type:"HANDSHAKE_RESP",status:n}}}function er(e){return(1&e)==1}function ei(e){let t={traceparent:"",tracestate:""};return M.inject(e,t),t}function eo(e,t,n,r,i){let o=i?M.extract(C._.active(),i):C._.active(),s=e.startSpan("river.session",{attributes:{component:"river","river.session.id":t,"river.session.to":n,"river.session.from":r}},o),a=S.u.setSpan(o,s);return{span:s,ctx:a}}function es(e,t,n){let r=e.startSpan("river.connection",{attributes:{component:"river","river.connection.id":t.id},links:[{context:n.span.spanContext()}]},n.ctx),i=S.u.setSpan(n.ctx,r);return{span:r,ctx:i}}function ea(){return S.u.getTracer("river",eg)}var eu=()=>{},el={connectOnInvoke:!0,eagerlyConnect:!0};function ec(e,t,n={}){n.handshakeOptions&&e.extendHandshake(n.handshakeOptions);let r={...el,...n};return r.eagerlyConnect&&e.connect(t),function e(t,n){return new Proxy(eu,{get(r,i){if("string"==typeof i)return e(t,[...n,i])},apply:(e,r,i)=>t({path:n,args:i})})}(n=>{let[o,s,a]=[...n.path];if(!(o&&s&&a))throw Error("invalid river call, ensure the service and procedure you are calling exists");let[u,l]=n.args;if(r.connectOnInvoke&&!e.sessions.has(t)&&e.connect(t),"rpc"!==a&&"subscribe"!==a&&"stream"!==a&&"upload"!==a)throw Error(`invalid river call, unknown procedure type ${a}`);return function(e,t,n,r,o,s,a){if("closed"===t.getStatus()){var u=e;let t=new j,n=P({code:T,message:"transport is closed"});t._pushValue(n),t._triggerClose();let r=new N({writeCb:()=>{},closeCb:()=>{}});return r.close(),ed(u,t,r)}let l=t.sessions.get(n)??t.createUnconnectedSession(n),c=t.getSessionBoundSendFn(n,l.id),d="rpc"===e||"subscription"===e,h=F(),{span:f,ctx:p}=function(e,t,n,r,o,s){let a=C._.active(),u=e.startSpan(`river.client.${r}.${o}`,{attributes:{component:"river","river.method.kind":n,"river.method.service":r,"river.method.name":o,"river.streamId":s,"span.kind":"client"},links:[{context:t.telemetry.span.spanContext()}],kind:i.CLIENT},a),l=S.u.setSpan(a,u),c={...t.loggingMetadata,transportMessage:{procedureName:o,serviceName:r}};return u.isRecording()&&(c.telemetry={traceId:u.spanContext().traceId,spanId:u.spanContext().spanId}),t.log?.info(`invoked ${r}.${o}`,c),{span:u,ctx:l}}(t.tracer,l,e,o,s,h),g=!0,m=new N({writeCb:e=>{c({streamId:h,payload:e,controlFlags:0})},closeCb:()=>{f.addEvent("reqWritable closed"),!d&&g&&c({streamId:h,controlFlags:8,payload:{type:"CLOSE"}}),y.isClosed()&&b()}}),y=new j,v=()=>{y._triggerClose(),f.addEvent("resReadable closed"),m.isClosed()&&b()};function b(){t.removeEventListener("message",x),t.removeEventListener("sessionStatus",E),a?.removeEventListener("abort",w),f.end()}function w(){!(y.isClosed()&&m.isClosed())&&(f.addEvent("sending cancel"),g=!1,y.isClosed()||(y._pushValue(P({code:_,message:"cancelled by client"})),v()),m.close(),c({streamId:h,controlFlags:4,payload:P({code:_,message:"cancelled by client"})}))}function x(e){if(e.streamId===h){if(e.to!==t.clientId)return void t.log?.error("got stream message from unexpected client",{clientId:t.clientId,transportMessage:e});if((4&e.controlFlags)==4){let n;g=!1,f.addEvent("received cancel"),k.J(R,e.payload)?n=e.payload:(n=P({code:_,message:"stream cancelled with invalid payload"}),t.log?.warn("got stream cancel without a valid protocol error",{clientId:t.clientId,transportMessage:e,validationErrors:[...O.I(R,e.payload)]})),y.isClosed()||(y._pushValue(n),v()),m.close();return}if(y.isClosed()){f.recordException("received message after response stream is closed"),t.log?.error("received message after response stream is closed",{clientId:t.clientId,transportMessage:e});return}k.J(V,e.payload)||(k.J(D,e.payload)?y._pushValue(e.payload):t.log?.error("Got non-control payload, but was not a valid result",{clientId:t.clientId,transportMessage:e,validationErrors:[...O.I(D,e.payload)]})),(8&e.controlFlags)==8&&(f.addEvent("received response close"),y.isClosed()?t.log?.error("received stream close but readable was already closed"):v())}}function E(e){"closing"===e.status&&e.session.to===n&&l.id===e.session.id&&(g=!1,y.isClosed()||(y._pushValue(P({code:T,message:`${n} unexpectedly disconnected`})),v()),m.close())}return a?.addEventListener("abort",w),t.addEventListener("message",x),t.addEventListener("sessionStatus",E),c({streamId:h,serviceName:o,procedureName:s,tracing:ei(p),payload:r,controlFlags:d?10:2}),d&&m.close(),ed(e,y,m,t.log)}("subscribe"===a?"subscription":a,e,t,u,o,s,l?l.signal:void 0)},[])}function ed(e,t,n,r){if("subscription"===e)return{resReadable:t};if("rpc"===e)return eh(t,r);if("upload"===e){let e=!1;return{reqWritable:n,finalize:()=>{if(e)throw Error("upload stream already finalized");return e=!0,n.isClosed()||n.close(),eh(t,r)}}}return{resReadable:t,reqWritable:n}}async function eh(e,t){let n=await e.collect();return n.length>1&&t?.error("Expected single message from server, got multiple"),n[0]}function ef(e){return e instanceof Error?e.message||"unknown reason":`[coerced to error] ${String(e)}`}function ep(e,t){return{schema:e,construct:t}}var eg="0.209.3"},94598:(e,t,n)=>{"use strict";n.d(t,{l:()=>u});var r=n(17051),i=n(21186),o=n(58059),s=n(22102),a=function(){function e(e){var t,n,r,o,s,a,u,l;this.extensionCodec=null!=(t=null==e?void 0:e.extensionCodec)?t:i.g.defaultCodec,this.context=null==e?void 0:e.context,this.useBigInt64=null!=(n=null==e?void 0:e.useBigInt64)&&n,this.maxDepth=null!=(r=null==e?void 0:e.maxDepth)?r:100,this.initialBufferSize=null!=(o=null==e?void 0:e.initialBufferSize)?o:2048,this.sortKeys=null!=(s=null==e?void 0:e.sortKeys)&&s,this.forceFloat32=null!=(a=null==e?void 0:e.forceFloat32)&&a,this.ignoreUndefined=null!=(u=null==e?void 0:e.ignoreUndefined)&&u,this.forceIntegerToFloat=null!=(l=null==e?void 0:e.forceIntegerToFloat)&&l,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<0x100000000?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-0x80000000?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)},e.prototype.encodeNumberAsFloat=function(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.encodeBigInt64=function(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<0x100000000)this.writeU8(219),this.writeU32(e);else throw Error("Too long string: ".concat(e," bytes in UTF-8"))},e.prototype.encodeString=function(e){var t=(0,r.dS)(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),(0,r.yi)(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if("object"==typeof e)this.encodeMap(e,t);else throw Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<0x100000000)this.writeU8(198),this.writeU32(t);else throw Error("Too large binary: ".concat(t));var n=(0,s.C)(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<0x100000000)this.writeU8(221),this.writeU32(n);else throw Error("Too large array: ".concat(n));for(var r=0;r<e.length;r++){var i=e[r];this.doEncode(i,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0;r<t.length;r++)void 0!==e[t[r]]&&n++;return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else if(r<0x100000000)this.writeU8(223),this.writeU32(r);else throw Error("Too large map object: ".concat(r));for(var i=0;i<n.length;i++){var o=n[i],s=e[o];this.ignoreUndefined&&void 0===s||(this.encodeString(o),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<0x100000000)this.writeU8(201),this.writeU32(t);else throw Error("Too large extension object: ".concat(t));this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),(0,o.X3)(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),(0,o._j)(this.view,this.pos,e),this.pos+=8},e.prototype.writeBigUint64=function(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8},e.prototype.writeBigInt64=function(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8},e}();function u(e,t){return new a(t).encodeSharedRef(e)}}}]);
//# sourceMappingURL=9748-04098f23db3c0e75.js.map