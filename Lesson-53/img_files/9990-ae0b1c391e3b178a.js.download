!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="957525f8-e181-483e-a618-02965de40c6a",e._sentryDebugIdIdentifier="sentry-dbid-957525f8-e181-483e-a618-02965de40c6a")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"f78dcecc"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9990],{3850:(e,t,r)=>{r.d(t,{Cg:()=>i,Gb:()=>c,ME:()=>l,P5:()=>u,a8:()=>g,nE:()=>d,t5:()=>o,zc:()=>p});var n,a=r(83846),s=r(86105),i="password",o="apple.com",u="facebook.com",c="github.com",l="google.com",d="x.com",p="figma.com",f=[o,u,c,l,d,p];(0,s._)(f).concat([i]);var h=(n={},(0,a._)(n,o,"Apple"),(0,a._)(n,u,"Facebook"),(0,a._)(n,c,"GitHub"),(0,a._)(n,l,"Google"),(0,a._)(n,d,"X"),(0,a._)(n,p,"Figma"),n),m={"twitter.com":d};function g(e){if(e)return f.includes(e)?h[e]:m[e]?h[m[e]]:e}},5127:(e,t,r)=>{r.d(t,{H_:()=>O,ZI:()=>C,d5:()=>D,hw:()=>q,Gj:()=>N,rQ:()=>x,ol:()=>F,mq:()=>P,vm:()=>B,b0:()=>k,Zh:()=>Y,OD:()=>A,xd:()=>L,CI:()=>R,th:()=>j,E8:()=>X});var n=r(29935),a=r(82643),s=r(21462),i=r(90629),o=r(19868),u=r(43355),c=r(57844),l=function(e){var t=(0,c.Dk)();return 0!==t.length?t[0]:(0,c.Wp)(e)},d=function(e){var t=l(e);return(0,o.xI)(t)},p=r(3850),f=r(53847),h=function(e){if(!(0,f._)(e,c.g))return{type:"error",treatment:"unknown"};switch(e.code){case"auth/account-exists-with-different-credential":var t,r=null==(t=e.customData)?void 0:t.email,n=o.LD.credentialFromError(e);if(!n||!r)return{type:"error",treatment:"unhandled"};return{type:"error",treatment:"requires-provider-link",context:{credential:n,email:r}};case"auth/auth-domain-config-required":case"auth/unauthorized-domain":return{type:"error",treatment:"configuration-error"};case"auth/credential-already-in-use":return{type:"error",treatment:"credential-conflict"};case"auth/email-already-in-use":return{type:"error",treatment:"email-conflict"};case"auth/expired-action-code":return{type:"error",treatment:"expired-input"};case"auth/invalid-action-code":return{type:"error",treatment:"invalid-input"};case"auth/invalid-credential":return{type:"error",treatment:"invalid-credential"};case"auth/invalid-email":return{type:"error",treatment:"invalid-email"};case"auth/no-such-provider":return{type:"error",treatment:"provider-not-linked"};case"auth/operation-not-allowed":case"auth/operation-not-supported-in-this-environment":return{type:"error",treatment:"forbidden-operation"};case"auth/provider-already-linked":return{type:"error",treatment:"provider-exists"};case"auth/timeout":return{type:"error",treatment:"timeout"};case"auth/too-many-requests":return{type:"error",treatment:"too-many-requests"};case"auth/user-disabled":return{type:"error",treatment:"banned-user"};case"auth/user-not-found":return{type:"error",treatment:"missing-user"};case"auth/weak-password":return{type:"error",treatment:"weak-password"};case"auth/wrong-password":return{type:"error",treatment:"wrong-password"};default:return{type:"error",treatment:"unhandled"}}},m=function(e,t){return(0,n._)(function(){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,{type:"success",result:n.sent()}];case 2:return r=n.sent(),e.logger.error("Failed to execute Firebase Client SDK command: ".concat(r.message),{command:e.command,errorCode:r.code}),[2,h(r)];case 3:return[2]}})})()},g=function(e,t){var r=e.logger,s=t.user,i=t.providerId;return(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,m({logger:r,command:"unlink"},function(){return(0,o.y1)(s,i)})];case 1:return[2,e.sent()]}})})()},y=function(e){var t=e.auth,r=e.logger;return(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,m({logger:r,command:"signInAnonymously"},function(){return(0,o.zK)(t)})];case 1:return[2,e.sent()]}})})()},v=r(35843),U=r(73900),b=r(37743),w=function(e){return e.AUTH="auth",e.EMAIL_VERIFICATION="email-verification",e}({}),E=function(e){return e.SIGN_OUT="signOut",e}({}),I=function(e){return e.POLLING="emailVerificationPolling",e}({}),Z=function(){"use strict";function e(){(0,b._)(this,e)}return e.available=function(){return"undefined"!=typeof BroadcastChannel},e.getChannel=function(e){if(!this.available())return null;if(!this.channels[e])try{this.channels[e]=new BroadcastChannel(e)}catch(e){return null}return this.channels[e]},e.postMessage=function(e,t,r){var n=this.getChannel(e);if(n)try{n.postMessage({type:t,data:r})}catch(e){}},e.addEventListener=function(e,t,r){var n=this.getChannel(e);if(n){var a=function(e){e.data.type===t&&r(e.data.data)};try{return n.addEventListener("message",a),function(){n.removeEventListener("message",a)}}catch(e){}}},e.close=function(e){var t=this.channels[e];if(t)try{t.close(),delete this.channels[e]}catch(e){}},e}();Z.channels={};var S=r(52853),_=r(61683),O=500,T=function(){var e=v.Rt.NEXT_PUBLIC_FIREBASE_API_KEY;if(!e)throw Error("NEXT_PUBLIC_FIREBASE_API_KEY is required");var t=window.location.origin;if(!t)throw Error("ORIGIN is required");try{return d({apiKey:e,authDomain:new URL(t).hostname,projectId:v.Rt.NEXT_PUBLIC_FIREBASE_PROJECT_ID,appId:v.Rt.NEXT_PUBLIC_FIREBASE_APP_ID})}catch(e){throw i.v4(function(t){t.setExtra("setupAuthClient","true"),i.Cp(e)}),e}}(),C=function(){return(0,n._)(function(){var e;return(0,a.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,o.Qe)(T)];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),S.vF.error("Failed to initialize reCAPTCHA: ".concat(e.message)),[3,3];case 3:return[2]}})})()},P=function(e){return(0,o.iZ)(T,e)},x=function(){return null!==T.currentUser},R=function(e){return(0,n._)(function(){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,T.signOut()];case 1:return t.sent(),[4,e.clearStore()];case 2:return t.sent(),_.A.clear(),Z.postMessage(w.AUTH,E.SIGN_OUT),[2]}})})()},k=function(e){return(0,n._)(function(){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,e.getIdTokenResult()];case 1:if(t=r.sent(),e.isAnonymous||"anonymous"===t.signInProvider||t.authTime===t.issuedAtTime)return[2,!1];return[2,(new Date().getTime()-new Date(t.issuedAtTime).getTime())/1e3<60]}})})()},A=function(e){var t=e.tenantId,r=e.provider;return(0,n._)(function(){var e,n;return(0,a.YH)(this,function(a){switch(a.label){case 0:return e="saml"===r.type?new o.rG(r.providerId):H(r.providerId),T.tenantId=null!=t?t:null,[4,m({logger:S.vF,command:"signInWithRedirect"},function(){return(0,o.$2)(T,e)})];case 1:return"error"===(n=a.sent()).type&&i.v4(function(e){e.setExtras({provider:r,result:n}),i.Cp(Error("Failed to initiate OAuth flow"))}),[2,n]}})})()},L="Something went wrong, please try again. If you continue to experience issues, you may have a browser setting or extension installed that is interfering with the redirect.",H=function(e){var t;switch(e){case p.t5:t=new o.LD(e);break;case p.P5:t=new o.sk;break;case p.Gb:t=new o.Dt;break;case p.ME:t=new o.HF;break;case p.nE:t=new o.ny;break;case p.zc:t=new o.LD(e);break;default:(0,u.A)(e)}return t},N=function(){return(0,n._)(function(){var e,t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,m({logger:S.vF,command:"getRedirectResult"},function(){return(0,o.Q4)(T)})];case 1:if("success"===(e=r.sent()).type&&e.result&&S.vF.info("Auth: Successful OAuth auth for uid: ".concat(e.result.user.uid)),!("success"===e.type&&e.result))return[3,5];if(!(null===(t=e.result.user).email&&t.providerData.length>0&&t.providerData[0].email))return[3,4];return[4,(0,o.Ww)(t,t.providerData[0].email)];case 2:return r.sent(),[4,t.reload()];case 3:r.sent(),r.label=4;case 4:if(null===t.email)return i.v4(function(t){t.setExtras({redirectResult:e}),i.Cp(Error("OAuth provider login resulted in a user without an email address"))}),[2,{type:"error",treatment:"user-needs-email",credential:e.result}];r.label=5;case 5:return"error"===e.type&&"email-conflict"!==e.treatment&&i.v4(function(t){t.setExtras({redirectResult:e}),i.Cp(Error("Failed to handle OAuth redirect"))}),[2,e]}})})()},F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,n._)(function(){var n,s,u,c,l,d,p,f;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=H(t),r.scopes){s=!0,u=!1,c=void 0;try{for(l=r.scopes[Symbol.iterator]();!(s=(d=l.next()).done);s=!0)p=d.value,n.addScope(p)}catch(e){u=!0,c=e}finally{try{s||null==l.return||l.return()}finally{if(u)throw c}}}return[4,m({logger:S.vF,command:"linkWithRedirect"},function(){return(0,o.dC)(e,n)})];case 1:return"error"===(f=a.sent()).type&&i.v4(function(e){e.setExtras({result:f}),i.Cp(Error("Failed to initiate linking an additional OAuth provider"))}),[2,f]}})})()},j=function(e,t){return(0,n._)(function(){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,g({auth:T,logger:S.vF},{user:e,providerId:t})];case 1:return"error"===(r=n.sent()).type&&i.v4(function(e){e.setExtras({result:r}),i.Cp(Error("Failed to unlink provider"))}),[2,r]}})})()},Y=function(){return(0,n._)(function(){var e;return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,y({auth:T,logger:S.vF})];case 1:return"error"===(e=t.sent()).type&&i.v4(function(t){t.setExtras({result:e}),i.Cp(Error("Failed to create anonymous user"))}),[2,e]}})})()},D=function(e,t){switch(e){case p.t5:return o.LD.credentialFromResult(t);case p.P5:return o.sk.credentialFromResult(t);case p.Gb:return o.Dt.credentialFromResult(t);case p.ME:return o.HF.credentialFromResult(t);case p.nE:return o.ny.credentialFromResult(t);case p.zc:return o.LD.credentialFromResult(t);default:(0,u.A)(e)}},q=function(e){var t=e.action;return(0,n._)(function(){var e;return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.race([T._getRecaptchaConfig(T,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),new Promise(function(e,t){return setTimeout(function(){return t(Error("Could not fetch reCAPTCHA site key in 5s"))},5e3)})])];case 1:return[2,e.sent().siteKey]}})})()];case 1:return e=r.sent(),[4,window.grecaptcha.enterprise.execute(e,{action:t})];case 2:return[2,r.sent()]}})})()},B=function(e){var t=e.response;return(0,n._)(function(){var e,r,n;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!T.currentUser)return[3,1];return e=T.currentUser,[3,3];case 1:return[4,Y()];case 2:if("error"===(r=a.sent()).type)return[2,{type:"error",message:"Something went wrong configuring your session, please try again."}];e=r.result.user,a.label=3;case 3:return[4,Object.getPrototypeOf(e).constructor._fromIdTokenResponse(T,t)];case 4:return n=a.sent(),T.updateCurrentUser(n),[2,{type:"success",user:n}]}})})()},X=function(e){(0,s.useEffect)(function(){var t=Z.addEventListener(w.EMAIL_VERIFICATION,I.POLLING,function(t){"waitingVerification"===t.status&&e()});return function(){return null==t?void 0:t()}},[e])};Z.available()&&Z.addEventListener(w.AUTH,E.SIGN_OUT,function(){window.alert("You have been logged out in another tab.\n\nYou will be redirected to the login page which will take you back here once you log in."),(0,U.A)()})},34190:(e,t,r)=>{r.d(t,{p6:()=>w,xJ:()=>v,TV:()=>y,M:()=>b,ai:()=>U});var n=r(29935),a=r(17844),s=r(82643),i=r(90629),o=r(97858),u=r(74651);u.ZU.Object({privacyInviteCode:u.ZU.Optional(u.ZU.String()),rawPassword:u.ZU.Optional(u.ZU.String()),source:u.ZU.Optional(u.ZU.String()),referrerId:u.ZU.Optional(u.ZU.Number()),tenantId:u.ZU.Optional(u.ZU.String())});var c=u.ZU.Object({isNewUser:u.ZU.Boolean(),userId:u.ZU.Number(),redirectUrl:u.ZU.Optional(u.ZU.String())}),l=u.ZU.Union([c,u.ZU.Object({message:u.ZU.String(),reauth:u.ZU.Optional(u.ZU.Object({tenantId:u.ZU.String(),samlProviderId:u.ZU.String()}))})]);u.ZU.Union([u.ZU.Object({type:u.ZU.Literal("tenantId"),tenantId:u.ZU.String()}),u.ZU.Object({type:u.ZU.Literal("email"),email:u.ZU.String()})]);var d=u.ZU.Object({tenantId:u.ZU.String(),samlProviderId:u.ZU.String()}),p=u.ZU.Union([d,u.ZU.Object({message:u.ZU.String()})]),f=u.ZU.Union([u.ZU.Literal("CLIENT_TYPE_ANDROID"),u.ZU.Literal("CLIENT_TYPE_IOS"),u.ZU.Literal("CLIENT_TYPE_WEB")]);u.ZU.Object({email:u.ZU.String(),privacyInviteCode:u.ZU.Optional(u.ZU.String()),rawPassword:u.ZU.String(),clientType:f,recaptchaToken:u.ZU.String(),source:u.ZU.String(),referrerId:u.ZU.Optional(u.ZU.Number()),aiPrompt:u.ZU.Optional(u.ZU.String())}),u.ZU.Object({emailOrUsername:u.ZU.String(),rawPassword:u.ZU.String(),clientType:f,recaptchaToken:u.ZU.String()});var h=u.ZU.Object({kind:u.ZU.String(),idToken:u.ZU.String(),displayName:u.ZU.Optional(u.ZU.String()),email:u.ZU.String(),refreshToken:u.ZU.String(),expiresIn:u.ZU.String(),localId:u.ZU.String()});u.ZU.Object({error:u.ZU.Object({code:u.ZU.Number(),message:u.ZU.String(),errors:u.ZU.Array(u.ZU.Object({message:u.ZU.String(),domain:u.ZU.String(),reason:u.ZU.String()}))})});var m=u.ZU.Union([u.ZU.Object({userId:u.ZU.Number(),session:h}),u.ZU.Object({message:u.ZU.String()})]),g="/api/v1/auth",y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n._)(function(){var r,n,u,c,d;return(0,s.YH)(this,function(s){switch(s.label){case 0:return[4,e.getIdToken()];case 1:return r=s.sent(),n=null!==e.tenantId?{tenantId:e.tenantId}:{},u=(0,a._)({},t,n),[4,fetch(g,{method:"POST",headers:{Authorization:"Bearer ".concat(r),"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(u)})];case 2:return[4,(c=s.sent()).json()];case 3:if(d=s.sent(),!o.J(l,d))return i.v4(function(t){t.setExtras({fuid:e.uid,status:c.status,body:d}),i.Cp(Error("Unexpected POST ".concat(g," response format")))}),[2,{type:"error",message:"Something unexpected happened, please try again."}];if(c.ok||428===c.status||i.v4(function(t){t.setExtras({fuid:e.uid,status:c.status,body:d}),i.Cp(Error("Unexpected POST ".concat(g," response")))}),"message"in d)return[2,{type:428===c.status?"needs_email_verification":"error",message:d.message,reauth:d.reauth}];return[2,{type:"success",userId:d.userId,isNewUser:d.isNewUser,redirectUrl:d.redirectUrl}]}})})()},v=function(e){return(0,n._)(function(){var t,r,n,a;return(0,s.YH)(this,function(s){switch(s.label){case 0:return[4,e.getIdToken()];case 1:return t=s.sent(),[4,fetch("".concat(g,"-anon"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"same-origin"})];case 2:switch((r=s.sent()).status){case 204:case 304:return[3,3]}return[3,4];case 3:return[2,{type:"success"}];case 4:return[4,r.json()];case 5:return n=s.sent(),i.v4(function(t){t.setExtras({anonUser:e}),i.Cp(Error("Unexpected POST ".concat(g,"-anon response")))}),[2,{type:"error",message:null!=(a=n.message)?a:"Something unexpected happened, please try again."}];case 6:return[2]}})})()},U=function(e){return(0,n._)(function(){var t,r,n;return(0,s.YH)(this,function(a){switch(a.label){case 0:return[4,fetch(t="/api/v1/auth/sign-up",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})];case 1:r=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.json()];case 3:return n=a.sent(),[3,5];case 4:return a.sent(),[3,5];case 5:if(!r.ok&&400!==r.status){if(i.v4(function(a){a.setExtras({email:e.email,status:r.status,body:n}),i.Cp(Error("Unexpected POST ".concat(t," response status")))}),429===r.status)return[2,{type:"error",message:"You are doing that too many times, please try again later. If you believe this is an error, please reach out to support@replit.com"}];return[2,{type:"error",message:"Something unexpected happened, please try again."}]}if(!o.J(m,n))return i.v4(function(a){a.setExtras({email:e.email,status:r.status,body:n}),i.Cp(Error("Unexpected POST ".concat(t," response format")))}),[2,{type:"error",message:"Something unexpected happened, please try again."}];if("message"in n)return[2,{type:"error",message:n.message}];return[2,{type:"success",userId:n.userId,session:n.session}]}})})()},b=function(e){return(0,n._)(function(){var t,r,n;return(0,s.YH)(this,function(a){switch(a.label){case 0:return[4,fetch(t="/api/v1/auth/sign-in",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})];case 1:return[4,(r=a.sent()).json()];case 2:if(n=a.sent(),!o.J(m,n))return i.v4(function(a){a.setExtras({emailOrUsername:e.emailOrUsername,status:r.status,body:n}),i.Cp(Error("Unexpected POST ".concat(t," response format")))}),[2,{type:"error",message:"Something unexpected happened, please try again."}];if(r.ok||400===r.status||i.v4(function(a){a.setExtras({emailOrUsername:e.emailOrUsername,status:r.status,body:n}),i.Cp(Error("Unexpected POST ".concat(t," response status")))}),"message"in n)return[2,{type:"error",message:n.message}];return[2,{type:"success",userId:n.userId,session:n.session}]}})})()},w=function(e){return(0,n._)(function(){var t,r,n;return(0,s.YH)(this,function(a){switch(a.label){case 0:return[4,fetch(t="/api/v1/auth/tenants",{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(e)})];case 1:return[4,(r=a.sent()).json()];case 2:if(n=a.sent(),!o.J(p,n))return i.v4(function(a){a.setExtras({request:e,status:r.status,body:n}),i.Cp(Error("Unexpected POST ".concat(t," response format")))}),[2,{type:"error",message:"Something unexpected happened, please try again."}];if(!r.ok&&404!==r.status&&422!==r.status)return i.v4(function(t){t.setExtras({request:e,status:r.status}),i.Cp(Error("Unexpected GET /api/v1/auth/tenants response"))}),[2,{type:"error",message:"Something unexpected happened, please try again."}];if("message"in n)return[2,{type:"error",message:n.message}];return[2,{type:"success",tenantId:n.tenantId,samlProviderId:n.samlProviderId}]}})})()}}}]);
//# sourceMappingURL=9990-ae0b1c391e3b178a.js.map