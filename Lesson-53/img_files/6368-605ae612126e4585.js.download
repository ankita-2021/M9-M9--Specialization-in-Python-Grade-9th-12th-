!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3754624c-d8b9-49db-9099-73afe5a19c42",e._sentryDebugIdIdentifier="sentry-dbid-3754624c-d8b9-49db-9099-73afe5a19c42")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"f78dcecc"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6368],{15218:(e,t,n)=>{"use strict";n.d(t,{T:()=>c,w:()=>s});var r=n(29935),o=n(12694),a=n(82643),i=n(21462);function s(){return(0,r._)(function(){return(0,a.YH)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var t=function(){document.hidden||(document.removeEventListener("visibilitychange",t),e())};document.addEventListener("visibilitychange",t)})]:[2]})})()}function c(){var e=(0,o._)((0,i.useState)(!1),2),t=e[0],n=e[1];return(0,i.useEffect)(function(){var e=function(){n(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),t}},29765:(e,t,n)=>{"use strict";n.d(t,{KN:()=>w.K,no:()=>E,wF:()=>y,XQ:()=>_,Ay:()=>x});var r=n(29935),o=n(17844),a=n(93629),i=n(17459),s=n(86105),c=n(82643),u=n(90629),l=n(8696),d=n.n(l),f=n(70225),p=n(38023),g=n(91991),v=n(79344),h=n(43880);function m(e){return(0,r._)(function(e){var t,n,r,o;return(0,c.YH)(this,function(a){return t=e.client,n=e.args,r=e.env,o=e.noUserEnv,[2,new Promise(function(e){var a=t.openChannel({service:"exec"},function(t){var i=t.channel,s="";i.onCommand(function(e){e.output&&(s+=e.output)}),i.request({exec:{args:n,env:r,noUserEnv:null!=o&&o}}).then(function(t){return t.channelClosed?void e({error:"Channel closed",output:s||null}):("open"===i.status&&a(),t.error)?void e({error:t.error,output:s||null}):void e({output:s,error:null})})})})]})}).apply(this,arguments)}var C=n(52648),w=n(86288),b=n(95570),y=5900,E=5904,_=5905,T=1e-4>=Math.random();function M(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function x(e){var t=e.fetchConnectionMetadata,n=e.getOverrideClusterMetadata,l=e.getDotdevUrl,E=e.logger,_=e.onUnrecoverableError,x=e.performance,O=e.preFetchConnectionMetadata,S=e.registerReconnectionMonitor,A=e.unregisterReconnectionMonitor,R=e.crosisTimeout,N=e.crosisWebSocketClass,k=e.traceCtx,P=e.getPid2Version,L=(0,g.Ay)();L.setMaxListeners(1e3);var D=null,H=new f.Kj;H.setUnrecoverableErrorHandler(_),H.onDebugLog(function(e){if("breadcrumb"===e.type){t="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,u.ZQ({category:"crosisV6",message:e.message,data:t});var t,n={replid:null==D?void 0:D.repl.id,language:null==D?void 0:D.repl.language};switch(e.message){case"timeout:hit":E.error("crosis connect timeout",n);break;case"onUnrecoverableError":var r=(0,o._)({errorMessage:e.data.message},n);E.error("crosis unrecoverable error",r);break;case"status:retrying":var a=e.data,s=a.error,c=(0,i._)(a,["error"]),l=(0,o._)({errorMessage:s.message},n,c);E.error("crosis retrying",l);break;case"status:connecting":case"status:reconnecting":var d=e.message.split(":")[1];E.info("crosis ".concat(d),(0,o._)({},n,"data"in e?e.data:void 0));break;case"websocket:polling fallback":E.info("crosis polling fallback",(0,o._)({},n))}}});var I=window.location.search.includes("debug=1");I&&H.onDebugLog(function(e){"log"===e.type&&b.log("in"===e.log.direction?"--\x3e":"<--",e.log.channel.service,{cmd:e.log.cmd,channel:e.log.channel})});var U=function(e){var t=void 0;if(void 0!==k&&e.service){var n="";"string"==typeof e.service?n=e.service:D&&(n=e.service(D)),n&&(t=(0,v.Ux)(k,"container.".concat(n,".openChannel")).span)}return t};return{logger:E,performance:x,onPortOpened:function(e){return L.on(w.s.PORT_OPEN,e),function(){L.removeListener(w.s.PORT_OPEN,e)}},onPortClosed:function(e){return L.on(w.s.PORT_CLOSE,e),function(){L.removeListener(w.s.PORT_CLOSE,e)}},onToast:function(e){return L.on(w.s.TOAST,e),function(){L.removeListener(w.s.TOAST,e)}},onConnectionStateChanged:function(e){return H.onConnectionStateChange(e)},connect:function(e){var u=this,l=e.context,g=e.fetchConnectionMetadataExtras,v=e.getMinimumRetryDelayMs,m=(0,i._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);H.getConnectionState()!==w.K.DISCONNECTED&&H.close(),D=l,S(function(){H.getConnectionState()===w.K.DISCONNECTED&&u.connect((0,o._)({context:l,fetchConnectionMetadataExtras:g,getMinimumRetryDelayMs:v},m))},function(){H.getConnectionState()!==w.K.DISCONNECTED&&u.close({expectReconnect:!0})});var A=function(e){var t=e.chan0,n=e.gurl,a=e.isFirst;return(0,r._)(function(){var e,r,i,s;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(e=this,"open"!==t.status)return[2];return r=E.timeStart({gurl:n}),i=setTimeout(function(){E.error("ping with no response",{gurl:n}),e.connect((0,o._)({context:l,fetchConnectionMetadataExtras:g,getMinimumRetryDelayMs:v},m))},3e4),[4,t.request({ping:{}})];case 1:if(s=c.sent().channelClosed,clearTimeout(i),s)return[2];return a?r("latency to pid1",{type:"startup"}):T&&r("latency to pid1",{type:"periodic"}),setTimeout(function(){return A({chan0:t,gurl:n,isFirst:!1})},1e3),[2]}})}).call(u)},k={getNextRetryDelayMs:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Math.max(M.apply(void 0,(0,s._)(t)),v())},context:l,reuseConnectionMetadata:!0,fetchConnectionMetadata:function(e){return(0,r._)(function(){var r,i,s,u,d,v;return(0,c.YH)(this,function(c){switch(c.label){case 0:if("function"!=typeof O)return[3,2];return[4,O()];case 1:c.sent(),c.label=2;case 2:if("function"!=typeof n)return[3,4];return[4,n()];case 3:return i=c.sent(),[3,5];case 4:i=null,c.label=5;case 5:if(r=i,e.aborted)return[2,{error:f.wd.Aborted}];s=E.timeStart({hasCustomFetch:!!m.fetchConnectionMetadata}),c.label=6;case 6:if(c.trys.push([6,12,,13]),!m.fetchConnectionMetadata)return[3,8];return[4,m.fetchConnectionMetadata()];case 7:return u=c.sent(),[3,11];case 8:return d={asViewer:l.asViewer,replId:l.repl.id,isLoggedIn:!!l.currentUser},[4,P()];case 9:return[4,t.apply(void 0,[o._.apply(void 0,[(d.requestedPid2Version=c.sent(),d.format=p.api.token.ReplToken.WireFormat.PROTOBUF,d.overrideClusterMetadata=r,d),g])])];case 10:u=c.sent(),c.label=11;case 11:return[3,13];case 12:if(v=c.sent(),e.aborted)return[2,{error:f.wd.Aborted}];switch(v&&v.statusCode){case 400:case 401:case 403:throw new C.mU(v.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return E.warn("Retriable error while fetching connection metadata",{statusCode:v.statusCode,originalMessage:v.message}),[2,{error:f.wd.Retriable}]}throw v;case 13:if(e.aborted)return[2,{error:f.wd.Aborted}];return I&&b.log("connecting",u),s("fetched connection metadata"),[2,(0,a._)((0,o._)({},u),{error:null})]}})})()}};R&&R>0&&(k.timeout=R),N?k.WebSocketClass=N:"undefined"==typeof WebSocket&&(k.WebSocketClass=d());var U=x.now(),Y=0;H.open(k,function(e){var t,n=e.channel;I&&b.log("connected",{replId:l.repl.id});var r=n.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var t=!!e.portOpen.forwarded,n=e.portOpen,r=n.address,o=n.cmdline,a=n.cgroup,i=n.pid,s=e.portOpen.port||0;if(8284===s||5901===s)return;L.emit(w.s.PORT_OPEN,{port:s,externalPort:e.portOpen.externalPort,isVnc:s===y,isForwarded:t,address:r,cmdline:o,cgroup:a,pid:i});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var c=e.portClose.port||0,u=e.portClose.address;if(8284===c||5901===c)return;L.emit(w.s.PORT_CLOSE,{port:c,externalPort:e.portClose.externalPort,isVnc:c===y,address:u});break;case"protocolError":_(new h.A("goval panic").setExtra("message",null!=(d=null==(l=e.protocolError)?void 0:l.text)?d:"protocol error"));break;case"toast":var l,d,f,p=null==(f=e.toast)?void 0:f.text;if(!p)break;L.emit(w.s.TOAST,p)}});A({chan0:n,gurl:null==(t=H.getConnectionMetadata())?void 0:t.gurl,isFirst:!0}),window.v6ws=H.ws;var o=x.now()-U;return E.info("connected to pid1",{time:o,reconnectCount:Y,replid:l.repl.id,language:l.repl.language}),function(e){var t=e.willReconnect;if(r(),!t){D=null;return}U=x.now(),Y++}})},openChannel:function(e,t){var n=U(e);return H.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var t,n;_(new h.A("goval panic").setExtra("message",null!=(n=null==(t=e.protocolError)?void 0:t.text)?n:"protocol error"))}}),o=t(e);return void 0!==n&&n.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return H.getConnectionState()},exec:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(function(){return(0,c.YH)(this,function(e){return[2,m({client:H,args:t})]})})()},execImmediately:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(function(){return(0,c.YH)(this,function(e){return[2,m({client:H,args:t,noUserEnv:!0})]})})()},execWithEnv:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return(0,r._)(function(){return(0,c.YH)(this,function(t){return[2,m({client:H,args:n,env:e})]})})()},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};H.getConnectionState()!==w.K.DISCONNECTED&&H.close(e)},destroy:function(){H.destroy(),L.removeAllListeners(),A()},client:function(){return H},focus:function(){var e=H.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return H.getConnectionMetadata()},getContext:function(){return D},getDotdevUrl:function(){var e=H.getConnectionMetadata();if(!e||H.getConnectionState()!==w.K.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return l(e)},unrecoverableError:function(e,t){H.destroy(),L.removeAllListeners(),_(t?h.A.wrap(e).setExtras(t):e)}}}},52648:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,mU:()=>d,ub:()=>c});var r=n(62019),o=n(37743),a=n(1833),i=n(12694),s=n(89264),c=function(e){return e.NotFound="NotFound",e.NotAllowed="NotAllowed",e.ConcurrentReplLimit="ConcurrentReplLimit",e.LanguageTokenDenied="LanguageTokenDenied",e.RequiresRefresh="RequiresRefresh",e.CrosisChannel="CrosisChannel",e}({}),u={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","user is required to refresh":"RequiresRefresh","channel with name ot":"CrosisChannel","cannot send any more commands after a close request on channel for ot":"CrosisChannel"};function l(e){var t=!0,n=!1,r=void 0;try{for(var o,a=Object.entries(u)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=(0,i._)(o.value,2),c=s[0],l=s[1];if(e.message.toLowerCase().includes(c))return l}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}var d=function(e){function t(e){return(0,o._)(this,t),(0,r._)(this,t,["user is required to refresh: "+e])}return(0,a._)(t,e),t}((0,s._)(Error))},56229:(e,t,n)=>{"use strict";n.d(t,{A:()=>function e(t){return(0,r._)(function(t){var n,r,s,l,d,f,p,g,v,h,_,T,M;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(n=t.replId,r=t.isLoggedIn,s=t.overrideClusterMetadata,l=t.requestedPid2Version,d=t.format,f=t.asViewer,p=t.retry,g=t.before,!w.V)throw Error("Expected apollo client");if(v=!!(c().query.lite||c().query.embed),h={url:"/data/repls/".concat(n,"/get_connection_metadata"),overrideClusterMetadata:s,requestedPid2Version:l,format:null!=d?d:u.api.token.ReplToken.WireFormat.PROTOBUF,clientVersion:"f78dcecc",hCaptchaSiteKey:y.lh,isEmbed:v,retry:p||0,asViewer:f,before:g},r||v&&!E)return[3,8];i.label=1;case 1:i.trys.push([1,7,,8]),i.label=2;case 2:return i.trys.push([2,4,,6]),[4,(0,C.hw)({action:"genReplToken"})];case 3:return T=i.sent(),[3,6];case 4:return i.sent(),[4,(0,y.Ay)()];case 5:return _=i.sent(),[3,6];case 6:return[2,m((0,a._)((0,o._)({},h),{captcha:_,recaptchaToken:T}))];case 7:return M=i.sent(),b.vF.error("Goval connection failure",{errorMessage:M&&M.message||"unidentified failure",replid:n,reason:"captcha",context:"services"}),[2,e({replId:n,overrideClusterMetadata:s,retry:(p||0)+1,requestedPid2Version:l,format:d,isLoggedIn:r,asViewer:f,before:g})];case 8:return[2,m(h)]}})}).apply(this,arguments)}});var r=n(29935),o=n(17844),a=n(93629),i=n(82643),s=n(27338),c=n.n(s),u=n(38023),l=n(17459),d=n(22531),f=n(80478),p=n(5053),g=n.n(p),v=n(43880),h=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function m(e){return(0,r._)(function(){var t,n,r,a,s,c,u,p,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:t=e.url,n=(0,l._)(e,["url"]),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,g()(t,{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},method:"post",body:JSON.stringify(n)})];case 2:return r=i.sent(),[3,4];case 3:throw(a=i.sent()).statusCode||(a.statusCode=504),a;case 4:if(c=(s=r.headers.get("content-type"))&&s.includes("application/json"),r.ok)return[3,9];if(!c)return[3,6];return[4,r.json()];case 5:return u=i.sent().message,[3,8];case 6:return[4,r.text()];case 7:u=i.sent(),i.label=8;case 8:throw new v.A(u||r.statusText).setExtras((0,o._)({url:t},n)).setStatusCode(r.status);case 9:if(c)return[3,11];return[4,r.text()];case 10:throw p=i.sent(),new v.A("Expected JSON response for connection metadata").setExtras((0,o._)({contentType:s,statusText:r.statusText,response:p,url:t},n)).setStatusCode(r.status);case 11:return[4,r.json()];case 12:var C;if(!((C=m=i.sent())&&(void 0===C?"undefined":(0,d._)(C))==="object"&&"token"in C&&"string"==typeof C.token&&"gurl"in C&&"string"==typeof C.gurl&&"conmanURL"in C&&"string"==typeof C.conmanURL&&("dotdevHostname"in C&&"string"==typeof C.dotdevHostname||(f.vF.error("Lore returned an incomplete metadata",{res:C}),C.dotdevHostname=""),1)))throw new v.A("Invalid format for connection metadata response").setExtras((0,o._)({connectionMetadata:m,url:t},n));if(!(m.token.startsWith("v2.public.")||h.test(m.token)))throw new v.A("Expected token to be PASETO- or base64-encoded").setExtras((0,o._)({connectionMetadata:m,url:t},n));return[2,m]}})})()}var C=n(5127),w=n(97388),b=n(52853),y=n(71753),E=!!n(38853).env.CAPTCHA_EMBEDS},73984:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(29935),o=n(82643),a=n(90629),i=n(52853),s=n(61683),c=n(95570);function u(){return(0,r._)(function(){var e,t,n;return(0,o.YH)(this,function(r){switch(r.label){case 0:return e="0.0.1624",window.location.search.includes("debug=1")&&"string"==typeof(t=s.A.get("pid2Version"))&&(c.log("using pid2 version from localStorage",t),e=t),[3,2];case 1:return n=r.sent(),null!=e||(e=null!=n?n:"dev"),[2,e];case 2:if(!e)throw Error("expected PID2_VERSION to be set in prod");return(0,i.nY)(e),a.NA("pid2Version",e),[2,e]}})})()}},75804:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>v,KN:()=>g.K});var r=n(29935),o=n(82643),a=n(27338),i=n.n(a),s=n(34441),c=n(29765),u=n(52853),l=n(15218),d=n(73984),f=n(56229),p=n(79723),g=n(86288);function v(e){var t,n,a=e.onUnrecoverableError,g=e.ctx,v={register:function(e,r){return n(),window.addEventListener("online",e),window.addEventListener("offline",r),t=function(){window.removeEventListener("online",e),window.removeEventListener("offline",r)},n},unregister:n=function(){t&&(t(),t=void 0)}},m=v.register,C=v.unregister;return(0,c.Ay)({fetchConnectionMetadata:f.A,getOverrideClusterMetadata:p.A,getDotdevUrl:h,logger:u.vF,onUnrecoverableError:a,performance:window.performance,preFetchConnectionMetadata:function(){return(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleEnd),e=u.vF.timeStart(),window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleStart),"/migrateReplToNix"===i().pathname)return[3,2];return[4,(0,l.w)()];case 1:t.sent(),t.label=2;case 2:window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),t.label=3;case 3:return[2]}})})()},registerReconnectionMonitor:m,unregisterReconnectionMonitor:C,traceCtx:g,getPid2Version:d.E})}function h(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}},79344:(e,t,n)=>{"use strict";n.d(t,{Ux:()=>d,ce:()=>u,eT:()=>l,mY:()=>f,rA:()=>s});var r=n(29935),o=n(82643),a=n(50548),i=n(3136),s="repl.it-web",c=a.u.getTracer(s);function u(e,t,n){return(0,r._)(function(){var r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=c.startSpan(t,void 0,e),i=a.u.setSpan(e,r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,n(i)];case 2:return[2,o.sent()];case 3:return r.end(),[7];case 4:return[2]}})})()}function l(e,t,n){return(0,r._)(function(){var r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(void 0!==e)return[3,2];return[4,n()];case 1:return[2,o.sent()];case 2:r=c.startSpan(t,void 0,e),i=a.u.setSpan(e,r),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,n(i,r)];case 4:return[2,o.sent()];case 5:return r.end(),[7];case 6:return[2]}})})()}function d(e,t){var n=c.startSpan(t,void 0,e),r=a.u.setSpan(e,n);return{span:n,childCtx:r}}function f(e){var t={};return new i.lm().inject(e,t,{set:function(e,t,n){e[t]=n}}),t}},79723:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,x:()=>s});var r=n(29935),o=n(82643),a=n(61683),i=n(95570);function s(e){var t=function(e){try{t=new URL(e)}catch(e){return i.log("failed to parse gurl"),i.error(e),null}var t,n={secure:!1,port:""+t.port,host:t.hostname};return"wss:"===t.protocol?n.secure=!0:"ws:"!==t.protocol&&i.log(e,"Expected gurl protocol to be ws or wss, assuming insecure connection"),n.port||(n.port=n.secure?"443":"80"),n}(e);if(!t)return null;var n=t.secure,r=t.host,o=t.port;return"repl.it"===r||"gp-v2.replit.com"===r||"eval.replit.com"===r?null:{id:"development",gurl:"ws".concat(n?"s":"","://").concat(r,":").concat(o),conmanURL:"http".concat(n?"s":"","://").concat(r,":").concat(o),proxy:"http".concat(n?"s":"","://").concat(r.replace("eval","proxy"),":").concat(o)}}function c(){return(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,(0,r._)(function(){return(0,o.YH)(this,function(e){return a.A.get("gurl")?(i.log("Getting gurl from localstorage"),[2,a.A.get("gurl")]):[2,null]})})()];case 1:if(!(e=t.sent()))return[2,null];return[2,s(e)]}})})()}},81085:()=>{},86288:(e,t,n)=>{"use strict";n.d(t,{K:()=>r.KN,s:()=>o});var r=n(70225),o=function(e){return e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.PORT_OPEN="PORT_OPEN",e.PORT_CLOSE="PORT_CLOSE",e.TOAST="TOAST",e}({})},91991:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,gT:()=>a});var r=n(88555);function o(){return new r.EventEmitter}function a(e,t){return function(n){return e.on(t,n),function(){e.off(t,n)}}}}}]);
//# sourceMappingURL=6368-605ae612126e4585.js.map